// For license information, see `https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/launch-df0c37f89f0a.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2025-04-15T10:12:51Z",turbineBuildDate:"2024-08-22T17:32:44Z",turbineVersion:"28.0.0"},environment:{id:"EN420ab799c452493f8600804ab3d12153",stage:"production"},dataElements:{"mortgage payment change calculator|metadata (evar46)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const o=nbs_ddl.action.length-e.detail.arrayLength;var t="",n=nbs_ddl.action[o]?.calculator?.property;if(n&&"mortgage payment change"==nbs_ddl.action[o]?.calculator?.name&&void 0!==n)for(var a=0;a<n.length;a++)t+=n[a].name+":"+n[a].value+"|";if(""!=t)return t+="end:1"}catch(e){_satellite.getVar("global|store error codes").write("mortgage payment change calculator|metadata (evar46)-1")}}}},"contentsquare integration key (eVar126)":{storageDuration:"session",modulePath:"core/src/lib/dataElements/sessionStorage.js",settings:{name:"csMatchingKey"}},"mortgage overpayment calc|overpayment term (event220)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage overpayment"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"overpaymenttermmonths"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|overpayment term (event220)-1")}}}},"mortgage overpayment calc|current mortgage balance (event215)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage overpayment"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property?.length;n++)"currentmortgagebalance"==nbs_ddl.action[a].calculator.property[n]?.name&&void 0!==nbs_ddl.action[a].calculator.property[n]?.value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|current mortgage balance (event215)-1")}}}},"liveperson waiting (event337)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl?.action?.length-e.detail.arrayLength;if("lpunifiedwindow"===nbs_ddl.action[t]?.type?.toLowerCase()&&"waiting"===nbs_ddl.action[t]?.lpdata?.state)return 1}catch(e){_satellite.getVar("global|store error codes").write("liveperson waiting (event337)-1")}}}},"cdp|loan calc|existing current account":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength,n=nbs_ddl.action[t];if("calculator result loaded"===n?.type&&"loans repayments calculator"===n?.calculator?.name){let e=n?.calculator?.property;if(e)for(let t=0;t<e.length;t++)if("hasproductyesno"===e[t]?.name&&void 0!==e[t]?.value)return e[t].value}}catch(e){_satellite.getVar("global|store error codes").write("cdp|loan calc|existing current account-1")}}}},"mortgage payment change calculator|mortgage amount (event325)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;var t=nbs_ddl.action[a]?.calculator?.property;if(t&&"mortgage payment change"==nbs_ddl.action[a]?.calculator?.name&&void 0!==t)for(var n=0;n<t.length;n++)if("amount"==t[n].name&&void 0!==t[n].value)return t[n].value}catch(e){_satellite.getVar("global|store error codes").write("mortgage payment change calculator|mortgage amount (event325)-1")}}}},"redirects campaign id (evar98)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(void 0!==nbs_ddl.page?.redirects&&nbs_ddl.page?.redirects&&nbs_ddl.page?.redirects?.length)return nbs_ddl.page.redirects[0].url.match(/cmpid=([^&]*)/)[1]}catch(e){_satellite.getVar("global|store error codes").write("redirects campaign id (evar98)-1")}}}},"calculator or tool|started (event118)":{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if("impression"===nbs_ddl.action[t]?.type&&"tool"===nbs_ddl.action[t]?.component?.impression_metadata||"form"===nbs_ddl.action[t]?.component?.impression_metadata)return 1}catch(e){_satellite.getVar("global|store error codes").write("calculator or tool|started (event118)-1")}}}},"merge|xdm object|action":{modulePath:"core/src/lib/dataElements/mergedObjects.js",settings:{objects:["%xdm object data|action%","%xdm object data|global%"]}},"liveperson postchat (event336)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl?.action?.length-e.detail.arrayLength;if("lpunifiedwindow"===nbs_ddl.action[t]?.type?.toLowerCase()&&"postchat"===nbs_ddl.action[t]?.lpdata?.state)return 1}catch(e){_satellite.getVar("global|store error codes").write("liveperson postchat (event336)-1")}}}},"search|standard search event (event44)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(nbs_ddl.page?.search?.term&&"standard search"===nbs_ddl.page?.search?.event||nbs_ddl.page.search?.term&&"recent search"===nbs_ddl.page?.search?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("search|standard search event (event44)-1")}}}},"mortgage rates tool|metadata (evar82)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const E=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[E]?.calculator&&"mortgage rates tool"===nbs_ddl.action[E]?.calculator?.name){var t,n,a,o,r,i,s,c,l,d;if(void 0!==nbs_ddl.action[E].calculator.property&&nbs_ddl.action[E].calculator.property)for(var u=0;u<nbs_ddl.action[E].calculator.property?.length;u++){var p;"buyertype"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(t=nbs_ddl.action[E].calculator.property[u].value),"mortgageterminmonths"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(n=nbs_ddl.action[E].calculator.property[u].value),"propertyvalue"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(a=nbs_ddl.action[E].calculator.property[u].value),"deposit"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(o=nbs_ddl.action[E].calculator.property[u].value),"additionalborrowingamount"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(r=nbs_ddl.action[E].calculator.property[u].value),"mortgagetypefilter"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(i=nbs_ddl.action[E].calculator.property[u].value),"dealperiodsfilter"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(s=nbs_ddl.action[E].calculator.property[u].value),"productfeesfilter"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(c=nbs_ddl.action[E].calculator.property[u].value.toString());var m,g,f,v="",b="";"mortgageamount"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(p=nbs_ddl.action[E].calculator.property[u].value),"propertyvalue"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(v=nbs_ddl.action[E].calculator.property[u].value),"deposit"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(b=nbs_ddl.action[E].calculator.property[u].value),""!==v&&""!==b&&(p=v-b),"hashelptobuysharedequityloan"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(m=nbs_ddl.action[E].calculator.property[u].name),"hassavetobuyorhelptobuyisa"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(m=nbs_ddl.action[E].calculator.property[u].name),"isgreenmortgageproduct"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(g=nbs_ddl.action[E].calculator.property[u].name),"isborrowingonbehalfoffamily"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(g=nbs_ddl.action[E].calculator.property[u].name);var h="",y="",_="",w="";"mortgageamount"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(h=parseInt(nbs_ddl.action[E].calculator.property[u].value)),"additionalborrowingamount"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(y=parseInt(nbs_ddl.action[E].calculator.property[u].value)),"propertyvalue"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(_=parseInt(nbs_ddl.action[E].calculator.property[u].value)),"deposit"==nbs_ddl.action[E].calculator.property[u].name&&void 0!==nbs_ddl.action[E].calculator.property[u].value&&(w=parseInt(nbs_ddl.action[E].calculator.property[u].value)),""!==_&&""!==w&&(h=_-w),""!==y&&(h+=y),""!==h&&""!==_&&(f=(h/_*100).toFixed(2))}if(void 0!==nbs_ddl.action[E].calculator.result&&nbs_ddl.action[E].calculator.result)for(u=0;u<nbs_ddl.action[E].calculator.result?.length;u++)"number of results"==nbs_ddl.action[E].calculator.result[u].name&&void 0!==nbs_ddl.action[E].calculator.result[u].value&&(l=nbs_ddl.action[E].calculator.result[u].value.toString()),"result message"==nbs_ddl.action[E].calculator.result[u].name&&void 0!==nbs_ddl.action[E].calculator.result[u].value&&(d=nbs_ddl.action[E].calculator.result[u].value);var C="";if(t&&(C+="BT:"+t+"|"),n&&(C+="MTe:"+n+"|"),a&&(C+="PV:"+a+"|"),o&&(C+="DA:"+o+"|"),r&&(C+="ABA:"+r+"|"),i&&(C+="MTy:"+i+"|"),s&&(C+="DP:"+s+"|"),c&&(C+="Fee:"+c+"|"),p&&(C+="MA:"+p+"|"),m&&(C+="HTBS:"+m+"|"),g&&(C+="ABR:"+g+"|"),f&&(C+="LTVT:"+f+"|"),l&&(C+="rcnt:"+l+"|"),d&&(C+="rmsg:"+d+"|"),(i||s||c)&&(C+="fa:y|"),""!=C)return C+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("mortgage rates tool|metadata (evar82)-1")}}}},"global|store error codes":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return{write:function(e){var t=sessionStorage.getItem("adobe.nbs.TMSError");(t=t?JSON.parse(t):[]).push(e),sessionStorage.setItem("adobe.nbs.TMSError",JSON.stringify(t))}}}catch(e){}}}},"calculator or tool name (evar108)":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;let n=nbs_ddl.action[t];if(n?.calculator?.name)return n.calculator.name;if(n?.form?.name)return n.form.name;if("impression"===n?.type&&"tool"===n?.component?.impression_metadata)return n.component.name;if("impression"===n?.type&&"form"===n?.component?.impression_metadata)return n.component.identifier}catch(e){_satellite.getVar("global|store error codes").write("calculator or tool name (evar108)-1")}}}},"global|consent cookie read":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return{userExperience:function(){let e=!1,t=_satellite.cookie.get("OptanonConsent"),n=_satellite.cookie.get("OptanonAlertBoxClosed");return void 0!==t&&void 0!==n&&(e=!!t.match(/C0002:1/)||e,e=!t.match(/C0002:0/)&&e),e},targetMarketing:function(){let e=!1,t=_satellite.cookie.get("OptanonConsent"),n=_satellite.cookie.get("OptanonAlertBoxClosed");return void 0!==t&&void 0!==n&&(e=!!t.match(/C0004:1/)||e,e=!t.match(/C0004:0/)&&e),e},customisation:function(){let e=!1,t=_satellite.cookie.get("OptanonConsent"),n=_satellite.cookie.get("OptanonAlertBoxClosed");return void 0!==t&&void 0!==n&&(e=!!t.match(/C0003:1/)||e,e=!t.match(/C0003:0/)&&e),e}}}}},"calculator or tool|marketing prompt impression (event26)":{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{let t="",n=nbs_ddl.page?.impression?.component;if(void 0!==n&&n?.length)for(var e=0;e<n.length;e++)if(void 0!==n[e]?.impression_metadata&&(t=n[e].impression_metadata.toLowerCase()),""!==t&&"tool"!==t)return 1}catch(e){_satellite.getVar("global|store error codes").write("calculator or tool|marketing prompt impression (event26)-1")}}}},"mortgage overpayment calc|current mortgage interest rate (event216)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage overpayment"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property?.length;n++)"currentmortgageinterestrate"==nbs_ddl.action[a].calculator.property[n]?.name&&void 0!==nbs_ddl.action[a].calculator.property[n]?.value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|current mortgage interest rate (event216)-1")}}}},"campaign id (evar98)":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"cmpid",caseInsensitive:!0}},"liveperson offer click (event127)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl?.action?.length-e.detail.arrayLength;if("lp_offers"===nbs_ddl.action[t]?.type?.toLowerCase()&&"offer_click"===nbs_ddl.action[t]?.lpevent?.eventName?.toLowerCase())return 1}catch(e){_satellite.getVar("global|store error codes").write("liveperson impression (event127)-1")}}}},"feedback tool text (evar87)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if("feedback tool"===nbs_ddl.action[t]?.type)return nbs_ddl.action[t].feedback.text}catch(e){_satellite.getVar("global|store error codes").write("feedback tool text (evar87)-1")}}}},"xdm object data|page":{modulePath:"adobe-alloy/dist/lib/dataElements/xdmObject/index.js",settings:{data:{web:{webPageDetails:{pageViews:{value:1}}},_experience:{analytics:{customDimensions:{lists:{list1:{list:"%listvar page (listvar1)%"}}}}}},sandbox:{name:"prod"}}},"third party|floodlight activity":{defaultValue:"not set",modulePath:"mapping-table/src/lib/dataElements/mappingTable.js",settings:{0:{input:"nbw:homepage",method:"exact match",output:"content/homepage"},1:{input:"nbw:current accounts",method:"exact match",output:"cur-prod/cur-pp"},2:{input:"nbw:current accounts:compare",method:"exact match",output:"cur-prod/cur-comp"},3:{input:"nbw:current accounts:flexplus",method:"exact match",output:"cur-prod/cur-fp"},4:{input:"nbw:current accounts:flexplus:apply",method:"exact match",output:"cur-app/cur-fpa"},5:{input:"nbw:current accounts:flexdirect",method:"exact match",output:"cur-prod/cur-fd"},6:{input:"nbw:current accounts:flexdirect:apply",method:"exact match",output:"cur-app/cur-fda"},7:{input:"nbw:current accounts:flexaccount",method:"exact match",output:"cur-prod/cur-fa"},8:{input:"nbw:current accounts:flexaccount:apply",method:"exact match",output:"cur-app/cur-faa"},9:{input:"nbw:current accounts:flexone",method:"exact match",output:"fon-prod/cur-f1"},10:{input:"nbw:current accounts:flexone:apply",method:"exact match",output:"fon-app/cur-f1a"},11:{input:"nbw:current accounts:flexstudent",method:"exact match",output:"fst-prod/cur-fs"},12:{input:"nbw:current accounts:flexstudent:apply",method:"exact match",output:"fst-app/cur-fsa"},13:{input:"nbw:current accounts:flexbasic",method:"exact match",output:"cur-prod/cur-fb"},14:{input:"nbw:current accounts:switch",method:"exact match",output:"cur-prod/cur-swit"},15:{input:"nbw:current accounts:overdrafts",method:"exact match",output:"cur-prod/cur-od"},16:{input:"nbw:mortgages",method:"exact match",output:"mor-prod/mor-pp"},17:{input:"nbw:mortgages:mortgage calculators",method:"exact match",output:"mor-prod/mor-calc"},18:{input:"nbw:mortgages:remortgage to nationwide",method:"exact match",output:"mor-prod/mor-rem"},19:{input:"nbw:mortgages:existing customer switching",method:"exact match",output:"mor-prod/mor-swt"},20:{input:"nbw:mortgages:existing customer switching:apply",method:"exact match",output:"mor-app/mor-swta"},21:{input:"nbw:mortgages:first time buyers",method:"exact match",output:"mor-prod/mor-ftb"},22:{input:"nbw:mortgages:borrowing more",method:"exact match",output:"mor-prod/mor-bm"},23:{input:"nbw:mortgages:moving home",method:"exact match",output:"mor-prod/mor-mh"},24:{input:"nbw:mortgages:buy to let",method:"exact match",output:"mor-prod/mor-btl"},25:{input:"nbw:mortgages:continue saved application",method:"exact match",output:"mor-prod/mor-capp"},26:{input:"nbw:mortgages:help",method:"exact match",output:"support/mor-help"},27:{input:"nbw:savings",method:"exact match",output:"sav-prod/sav-pp"},28:{input:"nbw:savings:compare savings accounts and isas",method:"exact match",output:"sav-prod/sav-comp"},29:{input:"nbw:savings:fixed rate isa",method:"exact match",output:"sav-prod/sav-fri"},30:{input:"nbw:savings:fixed rate isa:apply",method:"exact match",output:"sav-app/sav-fria"},31:{input:"nbw:savings:triple access online isa",method:"exact match",output:"sav-prod/sav-oyi"},32:{input:"nbw:savings:triple access online isa:apply",method:"exact match",output:"sav-app/sav-oyia"},33:{input:"nbw:savings:triple access online saver",method:"exact match",output:"sav-prod/sav-oyt"},34:{input:"nbw:savings:triple access online saver:apply",method:"exact match",output:"sav-app/sav-oyta"},35:{input:"nbw:savings:instant access saver",method:"exact match",output:"sav-prod/sav-ias"},36:{input:"nbw:savings:instant access saver:apply",method:"exact match",output:"sav-app/sav-iasa"},37:{input:"nbw:savings:check savings interest rate",method:"exact match",output:"sav-prod/sav-cyir"},38:{input:"nbw:savings:help",method:"exact match",output:"support/sav-help"},39:{input:"nbw:investments",method:"exact match",output:"sav-prod/inv-ipp"},40:{input:"nbw:investments:nationwide investments guide",method:"exact match",output:"sav-prod/inv-gud"},41:{input:"nbw:investments:when to invest",method:"exact match",output:"sav-prod/inv-when"},42:{input:"nbw:investments:stocks and shares isa",method:"exact match",output:"sav-prod/inv-ssi"},43:{input:"nbw:investments:choose an investment online",method:"exact match",output:"sav-prod/inv-oli"},44:{input:"nbw:investments:help",method:"exact match",output:"support/inv-help"},45:{input:"nbw:loans",method:"exact match",output:"ln-prod/ln-pp"},46:{input:"nbw:loans:calculator",method:"exact match",output:"ln-prod/ln-lc"},47:{input:"nbw:loans:loan rates",method:"exact match",output:"ln-prod/ln-rdet"},48:{input:"nbw:loans:borrow more",method:"exact match",output:"ln-prod/ln-bm"},49:{input:"nbw:loans:apply",method:"exact match",output:"ln-app/ln-qa"},50:{input:"nbw:loans:help",method:"exact match",output:"support/ln-help"},51:{input:"nbw:credit cards",method:"exact match",output:"cc-prod/cc-pp"},52:{input:"nbw:credit cards:member credit card",method:"exact match",output:"cc-prod/cc-mcc"},53:{input:"nbw:credit cards:member credit card:apply",method:"exact match",output:"cc-app/cc-mcca"},54:{input:"nbw:credit cards:help",method:"exact match",output:"support/cc-help"},55:{input:"nbw:insurance",method:"exact match",output:"lif-prod/li-pp"},56:{input:"nbw:insurance:life insurance",method:"exact match",output:"lif-prod/li-li"},57:{input:"nbw:insurance:life insurance:life insurance quote",method:"exact match",output:"lif-prod/li-lia"},58:{input:"nbw:insurance:critical illness cover",method:"exact match",output:"lif-prod/li-ci"},59:{input:"nbw:insurance:guide to life insurance",method:"exact match",output:"lif-prod/li-wli"},60:{input:"nbw:insurance:income protection benefit",method:"exact match",output:"lif-prod/li-ipi"},61:{input:"nbw:insurance:home insurance",method:"exact match",output:"hom-prod/hi-pp"},62:{input:"nbw:help",method:"exact match",output:"support/help"},63:{input:"nbw:ways to bank",method:"exact match",output:"support/way2bank"},64:{input:"nbw:about us",method:"exact match",output:"support/about"},65:{input:"nbw:mortgages:affordable housing schemes",method:"exact match",output:"mor-prod/mor-hos"},66:{input:"nbw:mortgages:family deposit mortgage",method:"exact match",output:"mor-prod/mor-fdm"},67:{input:"nbw:savings:fixed rate isa maturity",method:"exact match",output:"sav-prod/sav-frm"},68:{input:"nbw:savings:fixed rate isa maturity:apply",method:"exact match",output:"sav-app/sav-frma"},69:{input:"nbw:savings:savingswatch",method:"exact match",output:"sav-prod/sav-osws"},70:{input:"nbw:loans:home improvement",method:"exact match",output:"ln-prod/ln-hil"},71:{input:"nbw:loans:debt consolidation",method:"exact match",output:"ln-prod/ln-dcl"},size:72,dataElement:"%page|name (pagename)%",defaultValueEmpty:!0}},"video|video waiting (event236)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"video waiting"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|video waiting (event236)-1")}}}},"mortgage borrowing calculator|helping hand payment min range value (event355) ":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a].calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"helping hand payment range min payment"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|helping hand payment min range value (event355) -1")}}}},"liveperson interactive (event335)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl?.action?.length-e.detail.arrayLength;if("lpunifiedwindow"===nbs_ddl.action[t]?.type?.toLowerCase()&&"interactive"===nbs_ddl.action[t]?.lpdata?.state)return 1}catch(e){_satellite.getVar("global|store error codes").write("liveperson interactive (event335)-1")}}}},"product string|action (product)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;let n=[];if("impression"===nbs_ddl.action[t]?.type&&"kantar"!==nbs_ddl.action[t]?.component?.impression_metadata&&"tool"!==nbs_ddl.action[t]?.component?.impression_metadata&&"form"!==nbs_ddl.action[t]?.component?.impression_metadata&&n.push(";marketing|icmd:"+nbs_ddl.action[t].component.impression_metadata+"|cid:"+nbs_ddl.action[t].component.identifier+"|cnme:"+nbs_ddl.action[t].component.name+";;;event26=1"),"true"===nbs_ddl.action[t]?.component?.impression_flag&&"kantar"!==nbs_ddl.action[t]?.component?.impression_metadata&&"tool"!==nbs_ddl.action[t]?.component?.impression_metadata&&n.push(";marketing|icmd:"+nbs_ddl.action[t].component.impression_metadata+"|cid:"+nbs_ddl.action[t].component.identifier+"|cnme:"+nbs_ddl.action[t].component.name+";;;event16=1"),"lp_offers"===nbs_ddl.action[t]?.type?.toLowerCase()&&"offer_impression"===nbs_ddl.action[t]?.lpevent?.eventName?.toLowerCase()&&n.push(";webchat|wctype:liveperson proactive;;;event117=1"),"lp_offers"===nbs_ddl.action[t]?.type?.toLowerCase()&&"offer_click"===nbs_ddl.action[t]?.lpevent?.eventName?.toLowerCase()&&n.push(";webchat|wctype:liveperson proactive;;;event127=1"),"lpunifiedwindow"===nbs_ddl.action[t]?.type?.toLowerCase()&&("init"===nbs_ddl.action[t]?.lpdata?.state&&n.push(";webchat|wctype:liveperson proactive;;;event334=1"),"waiting"===nbs_ddl.action[t]?.lpdata?.state&&n.push(";webchat|wctype:liveperson proactive;;;event337=1"),"interactive"===nbs_ddl.action[t]?.lpdata?.state&&n.push(";webchat|wctype:liveperson proactive;;;event335=1"),"postchat"===nbs_ddl.action[t]?.lpdata?.state&&n.push(";webchat|wctype:liveperson proactive;;;event336=1")),"impression"===nbs_ddl.action[t]?.type&&nbs_ddl.action[t]?.component?.impression_metadata?.includes("kantar")&&n.push(";csat survey|stype:kantar proactive;;;event51=1"),"launch csat survey"===nbs_ddl.action[t]?.type&&n.push(";csat survey|stype:kantar proactive;;;event129=1"),n.length>0)return n=n.toString(),n}catch(e){_satellite.getVar("global|store error codes").write("product string|action (product)-1")}}}},"mortgage borrowing calculator|payment range max value (event358)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a].calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result?.length;n++)"mortgage payment range max payment"==nbs_ddl.action[a].calculator.result[n]?.name&&void 0!==nbs_ddl.action[a].calculator.result[n]?.value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|payment range max value (event358)-1")}}}},"calculator or tool|marketing prompt click (event16)":{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{let e=nbs_ddl.page?.navigation?.component;if(e?.impression_flag?.includes(!0)&&"kantar"!==e?.impression_metadata&&"tool"!==e?.impression_metadata)return 1}catch(e){_satellite.getVar("global|store error codes").write("calculator or tool|marketing prompt click (event16)-1")}}}},"listvar action (listvar1)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;let n=[],a={};if("user input"===nbs_ddl.action[t]?.type){let e="";nbs_ddl.action[t]?.user_input?.type&&(e+="uitype:"+nbs_ddl.action[t].user_input.type+"|"),nbs_ddl.action[t]?.user_input?.name&&(e+="uiname:"+nbs_ddl.action[t].user_input.name+"|"),nbs_ddl.action[t]?.user_input?.status&&(e+="uistat:"+nbs_ddl.action[t].user_input.status+"|"),nbs_ddl.action[t]?.user_input?.message&&(e+="uimsg:"+nbs_ddl.action[t].user_input.message+"|"),a={value:e},n.push(a)}if(void 0!==nbs_ddl.action[t]?.calculator&&void 0!==nbs_ddl.action[t]?.calculator?.result&&nbs_ddl.action[t]?.calculator?.result.length>0){let e,o="";for(let n=0;n<nbs_ddl.action[t].calculator.result.length;n++)"result message"==nbs_ddl.action[t].calculator.result[n].name&&void 0!==nbs_ddl.action[t].calculator.result[n].value&&(e=nbs_ddl.action[t].calculator.result[n].value);void 0!==e&&(o="|pmtxt:"+e+"|pmcse:tool error-"+nbs_ddl.action[t].calculator.name+"~",a={value:o},n.push(a))}let o=nbs_ddl.action[t]?.type,r=nbs_ddl.action[t]?.calculator?.property,i=nbs_ddl.action[t]?.calculator?.result,s=nbs_ddl.action[t]?.calculator?.name;if("calculator result loaded"===o||"filter applied"===o||"tool result loaded"===o){for(let e=0;e<r.length;e++)a={value:"obj|platform:couk|toolnme:"+s+"|propiden:"+r[e].name},n.push(a);for(let e=0;e<i.length;e++)a={value:"obj|platform:couk|toolnme:"+s+"|residen:"+i[e].name},n.push(a)}if(0!==n.length)return n}catch(e){_satellite.getVar("global|store error codes").write("listvar action (listvar1)-1")}}}},"target scopes":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(!0===_satellite.getVar("global|consent cookie read").userExperience()&&void 0!==nbs_ddl.target?.scopes&&nbs_ddl.target?.scopes)for(var e=0;e<nbs_ddl.target.scopes.length;e++)return nbs_ddl.target.scopes}catch(e){_satellite.getVar("global|store error codes").write("target scopes-1")}}}},"home & exit action|campaign id (evar75)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if("impression"===nbs_ddl.action[t]?.type&&"kantar"!==nbs_ddl.action[t]?.component?.impression_metadata&&"tool"!==nbs_ddl.action[t]?.component?.impression_metadata&&"form"!==nbs_ddl.action[t]?.component?.impression_metadata)return nbs_ddl.action[t].component.impression_metadata;if(nbs_ddl.action[t]?.component?.impression_flag?.includes(!0)&&"kantar"!==nbs_ddl.action[t]?.component?.impression_metadata&&"tool"!==nbs_ddl.action[t]?.component?.impression_metadata&&"form"!==nbs_ddl.action[t]?.component?.impression_metadata)return nbs_ddl.action[t].component.impression_metadata}catch(e){_satellite.getVar("global|store error codes").write("home & exit action|campaign id (evar75)-1")}}}},"data object merge (interaction)":{modulePath:"core/src/lib/dataElements/mergedObjects.js",settings:{objects:["%product string|action (product)%"]}},"mortgage erc calculator|mortgage erc rate max (event374)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage erc calculator v2"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"mortgageratemax"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|mortgage erc rate max (event374)-1")}}}},"navigation data|external (evar73)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const n=nbs_ddl.action.length-e.detail.arrayLength;if("navigation"===nbs_ddl.action[n]?.type){var t="";nbs_ddl.action[n]?.component?.name&&(t+="cnme:"+nbs_ddl.action[n].component.name+"|"),nbs_ddl.action[n]?.component?.identifier&&(t+="cid:"+nbs_ddl.action[n].component.identifier+"|"),nbs_ddl.action[n]?.component?.element.name&&(t+="enme:"+nbs_ddl.action[n].component.element.name+"|"),nbs_ddl.action[n]?.component?.element.identifier&&(t+="enid:"+nbs_ddl.action[n].component.element.identifier+"|"),nbs_ddl.action[n]?.component?.index_number&&(t+="ind:"+nbs_ddl.action[n].component.index_number+"|"),nbs_ddl.action[n]?.component?.total&&(t+="tot:"+nbs_ddl.action[n].component.total+"|"),nbs_ddl.action[n]?.product_name&&(t+="pnme:"+nbs_ddl.action[n].product_name+"|"),""!=t&&(t+="end:1")}}catch(e){_satellite.getVar("global|store error codes").write("navigation data|external (evar73)-1")}finally{return t}}}},"check savings rates tool|metadata (evar54)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const u=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[u]?.calculator&&"tool result loaded"===nbs_ddl.action[u]?.type&&"savings check your rates"===nbs_ddl.action[u]?.calculator?.name){var t,n,a,o,r,i,s,c
;if(void 0!==nbs_ddl.action[u]?.calculator?.property&&nbs_ddl.action[u]?.calculator?.property)for(var l=0;l<nbs_ddl.action[u].calculator.property.length;l++)"howoften"==nbs_ddl.action[u].calculator.property[l].name&&void 0!==nbs_ddl.action[u].calculator.property[l].value&&(t=nbs_ddl.action[u].calculator.property[l].value),"holdaccount"==nbs_ddl.action[u].calculator.property[l].name&&void 0!==nbs_ddl.action[u].calculator.property[l].value&&(n=nbs_ddl.action[u].calculator.property[l].value),"knowname"==nbs_ddl.action[u].calculator.property[l].name&&void 0!==nbs_ddl.action[u].calculator.property[l].value&&(a=nbs_ddl.action[u].calculator.property[l].value),"accountpurpose"==nbs_ddl.action[u].calculator.property[l].name&&void 0!==nbs_ddl.action[u].calculator.property[l].value&&(o=nbs_ddl.action[u].calculator.property[l].value),"haveonlinebanking"==nbs_ddl.action[u].calculator.property[l].name&&void 0!==nbs_ddl.action[u].calculator.property[l].value&&(r=nbs_ddl.action[u].calculator.property[l].value),"selectedproduct"==nbs_ddl.action[u].calculator.property[l].name&&void 0!==nbs_ddl.action[u].calculator.property[l].value&&(i=nbs_ddl.action[u].calculator.property[l].value);if(void 0!==nbs_ddl.action[u]?.calculator?.result&&nbs_ddl.action[u]?.calculator?.result)for(l=0;l<nbs_ddl.action[u].calculator.result.length;l++)"number of results"==nbs_ddl.action[u].calculator.result[l].name&&void 0!==nbs_ddl.action[u].calculator.result[l].value&&(s=nbs_ddl.action[u].calculator.result[l].value.toString()),"result message"==nbs_ddl.action[u].calculator.result[l].name&&void 0!==nbs_ddl.action[u].calculator.result[l].value&&(c=nbs_ddl.action[u].calculator.result[l].value);var d="";if(n&&(d+="hasacct:"+n+"|"),r&&(d+="ibreg:"+r+"|"),a&&(d+="kwnme:"+a+"|"),o&&(d+="apurp:"+o+"|"),t&&(d+="acfrq:"+t+"|"),i&&(d+="selprod:"+i+"|"),s&&(d+="rcnt:"+s+"|"),c&&(d+="rmsg:"+c+"|"),""!=d)return d+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("check savings rates tool|metadata (evar54)-1")}}}},"referral id":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/queryStringParameter.js",settings:{name:"referralID",caseInsensitive:!0}},"mortgage borrowing calculator|metadata (evar88)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const h=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[h]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[h]?.calculator?.name){if(void 0!==nbs_ddl.action[h].calculator?.property&&nbs_ddl.action[h].calculator?.property)for(var t,n,a,o,r,i="",s="",c=0;c<nbs_ddl.action[h].calculator?.property?.length;c++)"numberofapplicants"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&(t=nbs_ddl.action[h].calculator.property[c].value),"iwantto"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&(n=nbs_ddl.action[h].calculator.property[c].value),"newpropertyvalue"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&(a=nbs_ddl.action[h].calculator.property[c].value),"additionalborrowingamount"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&(o=nbs_ddl.action[h].calculator.property[c].value),"currentpropertyvalue"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&""==o&&(o=nbs_ddl.action[h].calculator.property[c].value),"mortgagedeposit"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&(s=nbs_ddl.action[h].calculator.property[c].value),"newpropertyvalue"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&(o=i=nbs_ddl.action[h].calculator.property[c].value),""!==s&&""!==i&&(o=i-s),"mortgagelength"==nbs_ddl.action[h].calculator.property[c].name&&void 0!==nbs_ddl.action[h].calculator.property[c].value&&(r=nbs_ddl.action[h].calculator.property[c].value);var l,d,u,p,m,g,f,v;if(void 0!==nbs_ddl.action[h].calculator?.result&&nbs_ddl.action[h].calculator?.result)for(c=0;c<nbs_ddl.action[h].calculator.result?.length;c++)"mortgage max amount"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[h].calculator.result[c].value&&(l=nbs_ddl.action[h].calculator.result[c].value.toString()),"mortgage min term months"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[h].calculator.result[c].value&&(d=nbs_ddl.action[h].calculator.result[c].value.toString()),"mortgage payment range min payment"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[h].calculator.result[c].value&&(u=nbs_ddl.action[h].calculator.result[c].value.toString()),"mortgage payment range max payment"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[h].calculator.result[c].value&&(p=nbs_ddl.action[h].calculator.result[c].value.toString()),"helping hand max amount"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[0].calculator.result[c].value&&(m=nbs_ddl.action[h].calculator.result[c].value.toString()),"helping hand payment range max payment"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[h].calculator.result[c].value&&(g=nbs_ddl.action[h].calculator.result[c].value.toString()),"helping hand payment range min payment"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[h].calculator.result[c].value&&(f=nbs_ddl.action[h].calculator.result[c].value.toString()),"result message"==nbs_ddl.action[h].calculator.result[c].name&&void 0!==nbs_ddl.action[h].calculator.result[c].value&&(v=nbs_ddl.action[h].calculator.result[c].value);var b="";if(t&&(b+="apps:"+t+"|"),n&&(b+="pur:"+n+"|"),a&&(b+="pprc:"+a+"|"),o&&(b+="ramt:"+o+"|"),r&&(b+="rtrm:"+r+"|"),l&&(b+="mxamt:"+l+"|"),d&&(b+="mntm:"+d+"|"),u&&(b+="prmiv:"+u+"|"),p&&(b+="prmav:"+p+"|"),m&&(b+="hhma:"+m+"|"),g&&(b+="hhmav:"+g+"|"),f&&(b+="hhmiv:"+f+"|"),v&&(b+="rmsg:"+v+"|"),""!=b)return b+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|metadata (evar88)-1")}}}},"cookie domain":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{let e="nationwide.co.uk",t=_satellite.environment.stage,n=location.hostname;return"development"!==t&&"staging"!==t||n.includes(".nationwide.co.uk")||(e=n),e}catch(e){_satellite.getVar("global|store error codes").write("data element:cookie domain")}}}},"search term (evar1)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"nbs_ddl.page.search.term"}},"merge|xdm object|page":{modulePath:"core/src/lib/dataElements/mergedObjects.js",settings:{objects:["%xdm object data|page%","%xdm object data|global%"]}},"kantar survey id (evar101)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{if(!0===_satellite.getVar("global|consent cookie read").userExperience()){const t=nbs_ddl.action.length-e.detail.arrayLength;if("launch csat survey"===nbs_ddl.action[t]?.type)return nbs_ddl.action[t].csat_survey_id}}catch(e){_satellite.getVar("global|store error codes").write("kantar survey id (evar101)-1")}}}},"mortgage rates tool|mortgage amount (event272)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const r=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[r]?.type&&"mortgage rates tool"===nbs_ddl.action[r]?.calculator?.name){var t,n="",a="";if(void 0!==nbs_ddl.action[r].calculator.property&&nbs_ddl.action[r].calculator.property)for(var o=0;o<nbs_ddl.action[r].calculator.property.length;o++)"mortgageamount"==nbs_ddl.action[r].calculator.property[o].name&&void 0!==nbs_ddl.action[r].calculator.property[o].value&&(t=nbs_ddl.action[r].calculator.property[o].value),"propertyvalue"==nbs_ddl.action[r].calculator.property[o].name&&void 0!==nbs_ddl.action[r].calculator.property[o].value&&(n=nbs_ddl.action[r].calculator.property[o].value),"deposit"==nbs_ddl.action[r].calculator.property[o].name&&void 0!==nbs_ddl.action[r].calculator.property[o].value&&(a=nbs_ddl.action[r].calculator.property[o].value),""!==n&&""!==a&&(t=n-a);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage rates tool|mortgage amount (event272)-1")}}}},"fragment id action (prop28)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const n=nbs_ddl.action.length-e.detail.arrayLength;if("fragment id"===nbs_ddl.action[n]?.type){var t="";if(nbs_ddl.action[n]?.fragment_id?.value&&(t+="fid:"+nbs_ddl.action[n].fragment_id.value+"|"),nbs_ddl.action[n].fragment_id?.validity&&(t+="fidv:"+nbs_ddl.action[n].fragment_id.validity+"|"),""!=t)return t+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("fragment id action (prop28)-1")}}}},"mortgage rates tool|additional borrowing amount (event273)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage rates tool"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"additionalborrowingamount"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage rates tool|additional borrowing amount (event273)-1")}}}},"mortgage erc calculator|mortgage erc rate min (event373)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage erc calculator v2"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"mortgageratemin"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|mortgage erc rate min (event373)-1")}}}},"home & exit page|campaign id (evar75)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(nbs_ddl.page?.navigation?.component?.impression_flag?.includes(!0)&&"kantar"!==nbs_ddl.page?.navigation?.component?.impression_metadata&&"tool"!==nbs_ddl.page?.navigation?.component?.impression_metadata){let e=nbs_ddl?.page?.navigation?.component?.impression_metadata;return e}}catch(e){_satellite.getVar("global|store error codes").write("home & exit page|campaign id (evar75)-1")}}}},"mortgage overpayment calc|one off payment amount (event218)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage overpayment"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"oneoffpaymentamount"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|one off payment amount (event218)-1")}}}},"routing tool|metadata (evar118)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const i=nbs_ddl.action.length-e.detail.arrayLength;if("tool result loaded"===nbs_ddl.action[i]?.type&&"routing"===nbs_ddl.action[i]?.calculator?.name){var t="",n=30,a=11;if(void 0!==nbs_ddl.action[i].calculator.property&&nbs_ddl.action[i].calculator.property)for(var o=0;o<nbs_ddl.action[i].calculator.property.length;o++){let e=nbs_ddl.action[i].calculator.property[o].name,r=nbs_ddl.action[i].calculator.property[o].value;"between1januaryand31march2024didyoupayinaminimumof500foratleast2ofthemonths"===e&&(e="payinaminimumof500"),"between1januaryand31march2024didyoumakeatleast10paymentsoutofyourcurrentaccountforatleast2ofthemonths"===e&&(e="makeatleast10payments"),"between1januaryand31march2024didyoumakeaminimumof2paymentsoutforatleast2ofthemonths"===e&&(e="makeaminimumof2payments"),t+="|"+e.slice(0,n)+":"+r.slice(0,a)}var r="";if(t&&(r+=t+"|"),""!=r)return r+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("routing tool|metadata (evar118)-1")}}}},"mortgage borrowing calculator|minimum term (event319)":{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result?.length;n++)"mortgage min term months"==nbs_ddl.action[a].calculator.result[n]?.name&&void 0!==nbs_ddl.action[a].calculator.result[n]?.value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|minimum term (event319)-1")}}}},"environment stage":{modulePath:"core/src/lib/dataElements/runtimeEnvironment.js",settings:{attribute:"environmentStage"}},"fragment id page (prop28)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(nbs_ddl.page?.fragment_id?.value){var e="";if(e+="fid:"+nbs_ddl.page.fragment_id.value+"|",nbs_ddl.page?.fragment_id?.validity&&(e+="fidv:"+nbs_ddl.page.fragment_id.validity+"|"),""!=e)return e+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("fragment id page (prop28)-1")}}}},"xdm object data|action":{modulePath:"adobe-alloy/dist/lib/dataElements/xdmObject/index.js",settings:{data:{web:{webInteraction:{URL:"%event.detail.actionUrl%",name:"%event.detail.actionName%",type:"%event.detail.actionType%",linkClicks:{value:1}}},_experience:{analytics:{customDimensions:{lists:{list1:{list:"%listvar action (listvar1)%"}}}}},_nationwide:{couk:{loansCalc:{amount:"%cdp|loan calc|loan amount%",repAPR:"%cdp|loan calc|representative apr%",existingCurrentAccount:"%cdp|loan calc|existing current account%"}}}},sandbox:{name:"prod"}}},"mortgage erc calculator|mortgage early repayment charge min (event375)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage erc calculator v2"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"mortgagechargemin"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|mortgage early repayment charge min (event375)-1")}}}},"mortgage erc calculator|mortgage early repayment charge max (event376)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage erc calculator v2"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"mortgagechargemax"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|mortgage early repayment charge max (event376)-1")}}}},"global|delete cookies":"kndctr_1D4334B852784A2D0A490D44_AdobeOrg_identity","s_ecid"];for(var n=0;n<t.length;n++)document.cookie=t[n]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; domain="+e+"; path=/;"}}}}},"cookie consent|category|targeting and marketing":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("OptanonConsent"),t=_satellite.cookie.get("OptanonAlertBoxClosed"),n="notset";void 0!==e&&void 0!==t&&(e.match(/C0004:1/)&&(n=!0),e.match(/C0004:0/)&&(n=!1))}catch(e){_satellite.getVar("global|store error codes").write("cookie consent|category|targeting and marketing-1")}finally{return n}}}},"hpi calculator|metadata (evar120)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const r=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[r]?.type&&"hpi calculator"===nbs_ddl.action[r]?.calculator?.name){var t,n;if(void 0!==nbs_ddl.action[r]?.calculator?.property&&nbs_ddl.action[r]?.calculator?.property)for(var a=0;a<nbs_ddl.action[r].calculator.property.length;a++)"region"==nbs_ddl.action[r].calculator.property[a].name&&void 0!==nbs_ddl.action[r].calculator.property[a].value&&(t=nbs_ddl.action[r].calculator.property[a].value);if(void 0!==nbs_ddl.action[r]?.calculator?.result&&nbs_ddl.action[r]?.calculator?.result)for(a=0;a<nbs_ddl.action[r].calculator.result.length;a++)"result message"==nbs_ddl.action[r]?.calculator?.result[a]?.name&&void 0!==nbs_ddl.action[r]?.calculator?.result[a]?.value&&(n=nbs_ddl.action[r].calculator.result[a].value);var o="";if(t&&(o+="rgn:"+t+"|"),n&&(o+="rmsg:"+n+"|"),""!=o)return o+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("hpi calculator|metadata (evar 120)-1")}}}},"mortgage rates tool|deposit amount (event271)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage rates tool"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"deposit"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage rates tool|deposit amount (event271)-1")}}}},"mortgage borrowing calculator|max loan amount (event323)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a].calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"mortgage max amount"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|max loan amount (event323)-1")}}}},"mortgage borrowing calculator|helping hand payment max range value (event356)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a].calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"helping hand payment range max payment"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|helping hand payment max range value (event356)-1")}}}},"product string|page (product)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{let t=[],n="",a="",o="",r="";if(void 0!==nbs_ddl.page?.impression?.component&&nbs_ddl.page?.impression?.component?.length)for(var e=0;e<nbs_ddl.page.impression.component.length;e++)void 0!==nbs_ddl.page?.impression?.component[e]?.name&&(a=nbs_ddl.page.impression.component[e].name),void 0!==nbs_ddl.page?.impression?.component[e]?.identifier&&(o=nbs_ddl.page.impression.component[e].identifier),void 0!==nbs_ddl.page?.impression?.component[e]?.impression_metadata&&(r=nbs_ddl.page.impression.component[e].impression_metadata.toLowerCase()),nbs_ddl.page?.impression?.component[e]?.impression_metadata&&("tool"==r?(n="tools|tnme:"+a,t.push(";"+n+";;;event118=1")):(n="marketing|icmd:"+r+"|cnme:"+a+"|cid:"+o,t.push(";"+n+";;;event26=1")));if(nbs_ddl.page?.navigation?.component?.impression_flag?.includes(!0)&&"kantar"!==nbs_ddl.page?.navigation?.component?.impression_metadata&&"tool"!==nbs_ddl.page?.navigation?.component?.impression_metadata&&(n="marketing|icmd:"+nbs_ddl.page.navigation.component.impression_metadata+"|cnme:"+nbs_ddl.page.navigation.component.name+"|cid:"+nbs_ddl.page.navigation.component.identifier,t.push(";"+n+";;;event16=1")),t.length>0)return t=t.toString(),t}catch(e){_satellite.getVar("global|store error codes").write("product string|page (product)-1")}}}},"video|video ended (event233)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"video ended"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|video ended (event233)-1")}}}},"xdm object data|global copy":{modulePath:"adobe-alloy/dist/lib/dataElements/xdmObject/index.js",settings:{data:{web:{webReferrer:{URL:"%referrer override%"},webPageDetails:{name:"%page|name (pagename)%",siteSection:"%channel%"}},_experience:{analytics:{customDimensions:{eVars:{eVar11:"%domain and path (evar11)%",eVar98:"%campaign id (evar98)%",eVar100:"%referring url (evar100)%",eVar105:"%cookie consent (evar105)%",eVar126:"%contentsquare integration key (eVar126)%",eVar135:"%error codes (evar135)%"},props:{prop44:"%page template (prop44)%",prop52:"%build id (prop52)%",prop73:"%responsive state (prop73)%"}}}},identityMap:"%identity map%"},sandbox:{name:"nbs-explat-dev"}}},"video|metadata (evar114)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const n=nbs_ddl.action.length-e.detail.arrayLength;if("video"===nbs_ddl.action[n]?.type){var t="";if(nbs_ddl.action[n]?.video?.name&&(t+="vnme:"+nbs_ddl.action[n].video.name+"|"),nbs_ddl.action[n]?.video?.id&&(t+="vid:"+nbs_ddl.action[n].video.id+"|"),nbs_ddl.action[n]?.video?.genre&&(t+="vcat:"+nbs_ddl.action[n].video.genre+"|"),nbs_ddl.action[n]?.video?.length&&(t+="vdur:"+nbs_ddl.action[n].video.length+"|"),nbs_ddl.action[n]?.video?.progress&&(t+="vperc:"+nbs_ddl.action[n].video.progress+"|"),nbs_ddl.action[n]?.video?.event&&(t+="vact:"+nbs_ddl.action[n].video.event+"|"),""!=t)return t+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("video metadata (evar114)-1")}}}},"video|user play (event229)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"user play"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|user play (event229)-1")}}}},"page|name (pagename)":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=nbs_ddl.page.name;return"nbw:"==e&&(e="nbw:homepage"),e}catch(e){_satellite.getVar("global|store error codes").write("page|name (pagename)-1")}}}},"mortgage overpayment calc|term with overpayment (event226)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage overpayment"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var t,n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"withoverpaymentterm"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value);return t.toFixed()}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|term with overpayment (event226)-1")}}}},"fpid cookie read":{modulePath:"core/src/lib/dataElements/cookie.js",settings:{name:"FPID"}},"fpid failure (event516)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(_satellite.cookie.get("fpidFailure"))return 1}catch(e){_satellite.getVar("global|store error codes").write("fpid failure (event516)-1")}}}},"liveperson metadata (evar72)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if("lpunifiedwindow"===nbs_ddl.action[t]?.type.toLowerCase()||"lp_offers"===nbs_ddl.action[t]?.type.toLowerCase()&&"offer_impression"===nbs_ddl.action[t]?.lpevent?.eventName.toLowerCase()||"lp_offers"===nbs_ddl.action[t]?.type.toLowerCase()&&"offer_click"===nbs_ddl.action[t]?.lpevent?.eventName.toLowerCase()){let e="";if(nbs_ddl.action[t]?.lpdata?.campaignId&&(e+="lpcmp:"+nbs_ddl.action[t].lpdata.campaignId+"|"),nbs_ddl.action[t]?.lpdata?.state&&(e+="lpws:"+nbs_ddl.action[t].lpdata.state+"|"),!0===_satellite.getVar("global|consent cookie read").userExperience()&&nbs_ddl.action[t]?.lpdata?.conversationId&&(e+="lpwcid:"+nbs_ddl.action[t].lpdata.conversationId+"|"),nbs_ddl.action[t]?.lpdata?.engagementId&&(e+="lpoid:"+nbs_ddl.action[t].lpdata.engagementId+"|"),nbs_ddl.action[t]?.lpdata?.engagementName&&(e+="lponme:"+nbs_ddl.action[t].lpdata.engagementName+"|"),nbs_ddl.action[t]?.lpdata?.state&&(e+="lpost:"+nbs_ddl.action[t].lpdata.state+"|"),""!=e)return e+="end:1",e}}catch(e){_satellite.getVar("global|store error codes").write("liveperson metadata (evar72)-1")}}}},"interaction (evar35)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const m=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[m]?.type)var t=nbs_ddl.action[m].type.toLowerCase();if(void 0!==nbs_ddl.action[m]?.component?.name)var n=nbs_ddl.action[m].component.name;if(void 0!==nbs_ddl.action[m]?.component?.identifier)var a=nbs_ddl.action[m].component.identifier;if(void 0!==nbs_ddl.action[m]?.component?.element?.name)var o=nbs_ddl.action[m].component.element.name;if(void 0!==nbs_ddl.action[m]?.component?.element?.identifier)var r=nbs_ddl.action[m].component.element.identifier;if(void 0!==nbs_ddl.action[m]?.component?.impression_metadata)var i=nbs_ddl.action[m].component.impression_metadata;if(void 0!==nbs_ddl.action[m]?.calculator?.name)var s=nbs_ddl.action[m].calculator.name;if("navigation"===t){var c="";return t&&(c+="int:"+t+"|"),""!=c&&(c+="end:1"),c}if("download"===t||"exit"===t)return n;if("calculator result loaded"===t||"tool result loaded"===t||"filter applied"===t&&"savings rates table"===s){var l="";return s&&(l+="|int:tool result loaded|tool:"+s+"|"),""!=l&&(l+="end:1"),l}if("impression"===nbs_ddl.action[m]?.type&&"tool"===nbs_ddl.action[m]?.component?.impression_metadata)return"|int:"+t+"|tool:"+n;if("video"===t){var d="";return d+="int:video-"+t+"|"}if("lp_offers"===t?.toLowerCase()&&"offer_click"===nbs_ddl.action[m]?.lpevent?.eventName?.toLowerCase()){var u="";return u+="|int:launch proactive liveperson webchat"}var p="";return t&&(p+="int:"+t+"|"),n&&(p+="cnme:"+n+"|"),a&&(p+="cid:"+a+"|"),o&&(p+="enme:"+o+"|"),r&&(p+="enid:"+r+"|"),i&&(p+="icmd:"+i+"|"),""!=p&&(p+="end:1"),p}catch(e){_satellite.getVar("global|store error codes").write("interaction (evar35)-1")}}}},"video|video playing (event230)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"video playing"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|video playing (event230)-1")}}}},"nav tracking page name|internal (prop61)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e;nbs_ddl.page.navigation?.component?.name&&"nbw:"===(e=_satellite.cookie.get("gpv_p19"))&&(e="nbw:homepage")}catch(e){_satellite.getVar("global|store error codes").write("nav tracking page name|internal (prop61)-1")}finally{return e}}}},"referring url (evar100)":{defaultValue:"",forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/pageInfo.js",settings:{attribute:"referrer"}},"mortgage erc calculator|mortgage total max (event378)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage erc calculator v2"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"mortgagetotalmax"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|mortgage total max (event378)-1")}}}},"mortgage overpayment calc|regular payment amount (event219) ":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage overpayment"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var t,n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"regularpaymentamount"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|regular payment amount (event219)-1")}}}},"cookie consent|category|user experience":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("OptanonConsent"),t=_satellite.cookie.get("OptanonAlertBoxClosed"),n="notset";void 0!==e&&void 0!==t&&(e.match(/C0002:1/)&&(n=!0),e.match(/C0002:0/)&&(n=!1))}catch(e){_satellite.getVar("global|store error codes").write("cookie consent|category|user experience-1")}finally{return n}}}},"search|recent search event (event331)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{
if(nbs_ddl.page.search?.term&&"recent search"===nbs_ddl.page?.search?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("search|recent search event (event331)-1")}}}},"cdp|loan calc|representative apr":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength,n=nbs_ddl.action[t];if("calculator result loaded"===n?.type&&"loans repayments calculator"===n?.calculator?.name){let e=n?.calculator?.result;if(e)for(let t=0;t<e.length;t++)if("apr"===e[t]?.name&&void 0!==e[t]?.value)return parseFloat(e[t].value)}}catch(e){_satellite.getVar("global|store error codes").write("cdp|loan calc|representative apr-1")}}}},"overdraft calculator|overdraft amount (event267)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"overdraft calculator"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a]?.calculator?.property&&nbs_ddl.action[a]?.calculator?.property)for(var t,n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"overdraftamount"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("overdraft calculator|overdraft amount (event267)-1")}}}},"mortgage overpayment calc|current mortgage term remaining (event217)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage overpayment"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator?.property&&nbs_ddl.action[a].calculator?.property)for(var n=0;n<nbs_ddl.action[a].calculator.property?.length;n++)"currentmortgagetermremainingmonths"==nbs_ddl.action[a].calculator.property[n]?.name&&void 0!==nbs_ddl.action[a].calculator.property[n]?.value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|current mortgage term remaining (event217)-1")}}}},"video|video loaded (event235)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"video loaded"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|video loaded (event235)-1")}}}},"mortgage overpayment calc|term reduction (event228)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const r=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[r]?.type&&"mortgage overpayment"===nbs_ddl.action[r]?.calculator?.name){if(void 0!==nbs_ddl.action[r].calculator.result&&nbs_ddl.action[r].calculator.result)for(var t,n="",a="",o=0;o<nbs_ddl.action[r].calculator.result.length;o++)"withoutoverpaymentterm"==nbs_ddl.action[r].calculator.result[o].name&&void 0!==nbs_ddl.action[r].calculator.result[o].value&&(n=nbs_ddl.action[r].calculator.result[o].value),"withoverpaymentterm"==nbs_ddl.action[r].calculator.result[o].name&&void 0!==nbs_ddl.action[r].calculator.result[o].value&&(a=nbs_ddl.action[r].calculator.result[o].value),t=(n-a).toFixed();return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|term reduction (event228)-1")}}}},"cdp|loan calc|loan amount":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength,n=nbs_ddl.action[t];if("calculator result loaded"===n?.type&&"loans repayments calculator"===n?.calculator?.name){let e=n?.calculator?.result;if(e)for(let t=0;t<e.length;t++)if("loanamount"===e[t]?.name&&void 0!==e[t]?.value)return parseInt(e[t].value,10)}}catch(e){_satellite.getVar("global|store error codes").write("cdp|loan calc|loan amount-1")}}}},"mortgage overpayment calc|total saving (event227)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const r=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[r]?.type&&"mortgage overpayment"===nbs_ddl.action[r]?.calculator?.name){if(void 0!==nbs_ddl.action[r]?.calculator?.result&&nbs_ddl.action[r]?.calculator?.result)for(var t,n="",a="",o=0;o<nbs_ddl.action[r].calculator.result.length;o++)"withoutoverpaymenttotal"==nbs_ddl.action[r].calculator.result[o].name&&void 0!==nbs_ddl.action[r].calculator.result[o].value&&(n=nbs_ddl.action[r].calculator.result[o].value),"withoverpaymenttotal"==nbs_ddl.action[r].calculator.result[o].name&&void 0!==nbs_ddl.action[r].calculator.result[o].value&&(a=nbs_ddl.action[r].calculator.result[o].value),t=n-a;return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|total saving (event227)-1")}}}},"recipient id (evar152)":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(!0===_satellite.getVar("global|consent cookie read").userExperience()){let e=new URLSearchParams(window.location.search).get("acrid");if(e)return e}}catch(e){_satellite.getVar("global|store error codes").write("referral ID (event152)-1")}}}},"wa_view fallback counter (event120)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("true"===window.localStorage.getItem("wa_view fallback"))return window.localStorage.setItem("wa_view fallback",""),1}catch(e){_satellite.getVar("global|store error codes").write("wa_view fallback counter (event120)-1")}}}},"overdraft calculator tool|metadata (evar57)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const l=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[l]?.type&&"overdraft calculator"===nbs_ddl.action[l]?.calculator?.name){var t,n,a,o,r,i;if(void 0!==nbs_ddl.action[l]?.calculator?.property&&nbs_ddl.action[l]?.calculator?.property)for(var s=0;s<nbs_ddl.action[l].calculator.property.length;s++)"account"==nbs_ddl.action[l].calculator.property[s].name&&void 0!==nbs_ddl.action[l].calculator.property[s].value&&(t=nbs_ddl.action[l].calculator.property[s].value),"overdrafttype"==nbs_ddl.action[l].calculator.property[s].name&&void 0!==nbs_ddl.action[l].calculator.property[s].value&&(n=nbs_ddl.action[l].calculator.property[s].value),"overdraftamount"==nbs_ddl.action[l].calculator.property[s].name&&void 0!==nbs_ddl.action[l].calculator.property[s].value&&(a=nbs_ddl.action[l].calculator.property[s].value),"overdraftdays"==nbs_ddl.action[l].calculator.property[s].name&&void 0!==nbs_ddl.action[l].calculator.property[s].value&&(o=nbs_ddl.action[l].calculator.property[s].value);if(void 0!==nbs_ddl.action[l]?.calculator?.result&&nbs_ddl.action[l]?.calculator?.result)for(s=0;s<nbs_ddl.action[l].calculator.result.length;s++)"charge1"==nbs_ddl.action[l].calculator.result[s].name&&void 0!==nbs_ddl.action[l].calculator.result[s].value&&(i=nbs_ddl.action[l].calculator.result[s].value),"result message"==nbs_ddl.action[l].calculator.result[s].name&&void 0!==nbs_ddl.action[l].calculator.result[s].value&&(r=nbs_ddl.action[l].calculator.result[s].value);var c="";if(t&&(c+="ovaccts:"+t+"|"),n&&(c+="ovtype:"+n+"|"),a&&(c+="ovamt:"+a+"|"),o&&(c+="ovdays:"+o+"|"),i&&(c+="ovchrg:"+i+"|"),r&&(c+="rmsg:"+r+"|"),""!=c)return c+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("overdraft calculator tool|metadata (evar57)-1")}}}},"calculator or tool complete (event98)":{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[t]?.type||"tool result loaded"===nbs_ddl.action[t]?.type||"form submitted"===nbs_ddl.action[t]?.type)return 1;if("filter applied"===nbs_ddl.action[t]?.type&&"savings rates table"===nbs_ddl.action[t]?.calculator?.name)return 1}catch(e){_satellite.getVar("global|store error codes").write("calculator or tool complete (event98)-1")}}}},"signly|metadata (evar141)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const n=nbs_ddl.action.length-e.detail.arrayLength;let a;if(void 0!==nbs_ddl.action[n]?.calculator&&"tool result loaded"===nbs_ddl.action[n]?.type&&"signly"===nbs_ddl.action[n]?.calculator?.name){if(void 0!==nbs_ddl.action[n]?.calculator?.property&&nbs_ddl.action[n]?.calculator?.property)for(var t=0;t<nbs_ddl.action[n].calculator.property.length;t++)if("signlyenabled"==nbs_ddl.action[n].calculator.property[t].name&&void 0!==nbs_ddl.action[n].calculator.property[t].value){a=nbs_ddl.action[n].calculator.property[t].value;break}let e="";if(a&&(e+="status:"+a+"|"),""!=e)return e+="end:1",e}}catch(e){_satellite.getVar("global|store error codes").write("signly|metadata (evar141)-1")}}}},"mortgage overpayment calc|metadata (evar63)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const y=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[y]?.type&&"mortgage overpayment"===nbs_ddl.action[y]?.calculator?.name){var t,n,a,o,r,i,s,c,l,d;if(void 0!==nbs_ddl.action[y]?.calculator?.property&&nbs_ddl.action[y]?.calculator?.property)for(var u=0;u<nbs_ddl.action[y].calculator.property.length;u++)"currentmortgagetype"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(t=nbs_ddl.action[y].calculator.property[u].value),"currentmortgagebalance"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(n=nbs_ddl.action[y].calculator.property[u].value),"currentmortgageinterestrate"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(a=nbs_ddl.action[y].calculator.property[u].value),"currentmortgagetermremainingmonths"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(o=nbs_ddl.action[y].calculator.property[u].value),"oneoffpaymentamount"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(r=nbs_ddl.action[y].calculator.property[u].value),"regularpaymentamount"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(i=nbs_ddl.action[y].calculator.property[u].value),"regularpaymenttermtype"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(s=nbs_ddl.action[y].calculator.property[u].value),"repaymenttype"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&(c=nbs_ddl.action[y].calculator.property[u].value),"overpaymenttermmonths"==nbs_ddl.action[y].calculator.property[u]?.name&&void 0!==nbs_ddl.action[y].calculator.property[u]?.value&&0!==nbs_ddl.action[0].calculator.property[u]?.value&&(l=nbs_ddl.action[y].calculator.property[u].value);var p,m,g="",f="",v="",b="";if(void 0!==nbs_ddl.action[y]?.calculator?.result&&nbs_ddl.action[y]?.calculator?.result)for(u=0;u<nbs_ddl.action[y].calculator.result?.length;u++)"withoverpaymentterm"==nbs_ddl.action[y].calculator.result[u]?.name&&void 0!==nbs_ddl.action[y].calculator.result[u]?.value&&(d=nbs_ddl.action[y].calculator.result[u].value),"withoutoverpaymentterm"==nbs_ddl.action[y].calculator.result[u]?.name&&void 0!==nbs_ddl.action[y].calculator.result[u]?.value&&(g=nbs_ddl.action[y].calculator.result[u].value),"withoverpaymentterm"==nbs_ddl.action[y].calculator.result[u]?.name&&void 0!==nbs_ddl.action[y].calculator.result[u]?.value&&(f=nbs_ddl.action[y].calculator.result[u].value),p=(g-f).toFixed(),"withoutoverpaymenttotal"==nbs_ddl.action[y].calculator.result[u]?.name&&void 0!==nbs_ddl.action[y].calculator.result[u]?.value&&(v=nbs_ddl.action[y].calculator.result[u].value),"withoverpaymenttotal"==nbs_ddl.action[y].calculator.result[u]?.name&&void 0!==nbs_ddl.action[y].calculator.result[u]?.value&&(b=nbs_ddl.action[y].calculator.result[u].value),m=v-b;var h="";if(t&&(h+="ctyp:"+t+"|"),n&&(h+="cbal:"+n+"|"),a&&(h+="cintr:"+a+"|"),o&&(h+="cterm:"+o+"|"),r&&(h+="oopay:"+r+"|"),i&&(h+="rgpay:"+i+"|"),s&&(h+="rgptrm:"+s+"|"),c&&(h+="rptyp:"+c+"|"),l&&(h+="ovptrm:"+l+"|"),d&&(h+="mtwovp:"+d+"|"),p&&(h+="trmred:"+p+"|"),m&&(h+="totsav:"+m+"|"),""!=h)return h+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("mortgage overpayment calc|metadata (evar63)-1")}}}},"navigation data|internal (evar73)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if("undefined"!==nbs_ddl.page?.navigation){var e="";nbs_ddl.page.navigation?.component?.name&&(e+="cnme:"+nbs_ddl.page.navigation.component.name+"|"),nbs_ddl.page.navigation?.component?.identifier&&(e+="cid:"+nbs_ddl.page.navigation.component.identifier+"|"),nbs_ddl.page.navigation?.component?.element?.name&&(e+="enme:"+nbs_ddl.page.navigation.component.element.name+"|"),nbs_ddl.page.navigation?.component?.element?.identifier&&(e+="enid:"+nbs_ddl.page.navigation.component.element.identifier+"|"),nbs_ddl.page.navigation?.component?.index_number&&(e+="ind:"+nbs_ddl.page.navigation.component.index_number+"|"),nbs_ddl.page.navigation?.product_name&&(e+="pnme:"+nbs_ddl.page.navigation.product_name+"|"),""!=e&&(e+="end:1")}}catch(e){_satellite.getVar("global|store error codes").write("navigation data|internal (evar73)-1")}finally{return e}}}},"video|user pause (event231)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"user pause"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|user pause (event231)-1")}}}},"mortgage erc calculator|mortgage total min (event377)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage erc calculator v2"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"mortgagetotalmin"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|mortgage total min (event377)-1")}}}},"appdynamics check":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){if(window["adrum-start-time"])return!0}}},"referrer override":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(window.waViewCalledFlag&&window.waViewCalledFlag<=1)return document.referrer;if(window.waViewCalledFlag&&window.waViewCalledFlag>1)return window.location.origin+window.location.pathname}catch(e){_satellite.getVar("global|store error codes").write("referrer override-1")}}}},channel:{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/runtimeEnvironment.js",settings:{attribute:"propertyName"}},"liveperson initiated (event334)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl?.action?.length-e.detail.arrayLength;if("lpunifiedwindow"===nbs_ddl.action[t]?.type?.toLowerCase()&&"init"===nbs_ddl.action[t]?.lpdata?.state)return 1}catch(e){_satellite.getVar("global|store error codes").write("liveperson initiated (event334)-1")}}}},"cdp|cookie consent|targeting and marketing":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){let e="notset";try{let t=_satellite.cookie.get("OptanonConsent"),n=_satellite.cookie.get("OptanonAlertBoxClosed");void 0!==t&&void 0!==n&&(e=t.match(/C0004:1/)?"true":e,e=t.match(/C0004:0/)?"false":e)}catch(e){_satellite.getVar("global|store error codes").write("cookie consent|targeting and marketing-1",e)}finally{return e}}}},"cookie consent|category|consent":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("OptanonConsent"),t=_satellite.cookie.get("OptanonAlertBoxClosed"),n=(new Date).toISOString();if(void 0!==e&&void 0!==t){if(e.match(/C0002:1/))return{collect:{val:"y"},metadata:{time:n}};if(e.match(/C0002:0/))return{collect:{val:"n"},metadata:{time:n}}}}catch(e){_satellite.getVar("global|store error codes").write("cookie consent|category|consent-1")}}}},"liveperson impression (event117)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl?.action?.length-e.detail.arrayLength;if("lp_offers"===nbs_ddl.action[t]?.type?.toLowerCase()&&"offer_impression"===nbs_ddl.action[t]?.lpevent?.eventName?.toLowerCase())return 1}catch(e){_satellite.getVar("global|store error codes").write("liveperson impression (event117)-1")}}}},"search|search unavailable event (event110)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(nbs_ddl.page.search?.term&&"search unavailable"===nbs_ddl.page?.search?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("search|search unavailable event (event110)-1")}}}},"calculator or tool|zero results (event269)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[a]?.calculator?.result&&nbs_ddl.action[a]?.calculator?.result)for(var t,n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"number of results"===nbs_ddl.action[a]?.calculator?.result[n]?.name&&void 0!==nbs_ddl.action[a]?.calculator?.result[n]?.value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());if("0"===t)return 1}catch(e){_satellite.getVar("global|store error codes").write("calculator or tool|zero results (event269)-1")}}}},"loan calc|representative apr (event354)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[a]?.calculator&&"loans repayments calculator"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a]?.calculator?.result&&nbs_ddl.action[a]?.calculator?.result)for(var t,n=0;n<nbs_ddl.action[a].calculator?.result.length;n++)"apr"==nbs_ddl.action[a].calculator?.result[n].name&&void 0!==nbs_ddl.action[a].calculator?.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("loan calc|representative apr (event354)-1")}}}},"domain and path (evar11)":{defaultValue:"",forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=window.location.hostname+window.location.pathname;return document.location.protocol.match(/file:/)&&(e="Redacted due to local file path"),e}catch(e){_satellite.getVar("global|store error codes").write("domain and path (evar11)-1")}}}},"data variable":{modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{cacheId:"19ba59f7-88b1-4814-8f33-32c0f8fe1cd7",solutions:["analytics"],dataElementId:"DEa4cf6b5418904d51a7325b150054b12e"}},"target parameters":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(!0===_satellite.getVar("global|consent cookie read").userExperience()&&!0===_satellite.getVar("global|consent cookie read").targetMarketing()){let e,t=nbs_ddl.page.name,n={};switch(!0){case t.startsWith("nbw:current accounts"):e="current accounts";break;case t.startsWith("nbw:savings"):e="savings";break;case t.startsWith("nbw:loans"):e="loans";break;case t.startsWith("nbw:credit cards"):e="credit cards";break;case t.startsWith("nbw:insurance:home insurance"):e="home insurance";break;case t.startsWith("nbw:investments"):e="investments";break;case t.startsWith("nbw:mortgages:existing mortgage members"):e="exisiting mortgage"}return nbs_ddl.page.name.startsWith("nbw:mortgages")&&!nbs_ddl.page.name.startsWith("nbw:mortgages:existing mortgage members")&&(e="mortgages"),e&&(n={__adobe:{target:{"user.categoryId":e}}}),n}}catch(e){_satellite.getVar("global|store error codes").write("target parameters-1")}}}},"mortgage erc calculator|metadata (evar89)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const m=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[m]?.calculator&&"mortgage erc calculator v2"===nbs_ddl.action[m]?.calculator?.name){var t,n,a,o,r,i,s,c,l,d;if(void 0!==nbs_ddl.action[m].calculator.property&&nbs_ddl.action[m].calculator.property)for(var u=0;u<nbs_ddl.action[m].calculator.property?.length;u++)"mortgagetype"==nbs_ddl.action[m].calculator.property[u].name&&void 0!==nbs_ddl.action[m].calculator.property[u].value&&(t=nbs_ddl.action[m].calculator.property[u].value),"mortgagebalance:"==nbs_ddl.action[m].calculator.property[u].name&&void 0!==nbs_ddl.action[m].calculator.property[u].value&&(n=nbs_ddl.action[m].calculator.property[u].value),"mortgagestartmonth"==nbs_ddl.action[m].calculator.property[u].name&&void 0!==nbs_ddl.action[m].calculator.property[u].value&&(a=nbs_ddl.action[m].calculator.property[u].value),"mortgagestartyear"==nbs_ddl.action[m].calculator.property[u].name&&void 0!==nbs_ddl.action[m].calculator.property[u].value&&(o=nbs_ddl.action[m].calculator.property[u].value);if(void 0!==nbs_ddl.action[m].calculator.result&&nbs_ddl.action[m].calculator.result)for(u=0;u<nbs_ddl.action[m].calculator.result?.length;u++)"mortgageratemin"==nbs_ddl.action[m].calculator.result[u].name&&void 0!==nbs_ddl.action[m].calculator.result[u].value&&(r=nbs_ddl.action[m].calculator.result[u].value.toString()),"mortgageratemax"==nbs_ddl.action[m].calculator.result[u].name&&void 0!==nbs_ddl.action[m].calculator.result[u].value&&(i=nbs_ddl.action[m].calculator.result[u].value.toString()),"mortgagechargemin"==nbs_ddl.action[m].calculator.result[u].name&&void 0!==nbs_ddl.action[m].calculator.result[u].value&&(s=nbs_ddl.action[m].calculator.result[u].value.toString()),"mortgagechargemax"==nbs_ddl.action[m].calculator.result[u].name&&void 0!==nbs_ddl.action[m].calculator.result[u].value&&(c=nbs_ddl.action[m].calculator.result[u].value.toString()),"mortgagetotalmin"==nbs_ddl.action[m].calculator.result[u].name&&void 0!==nbs_ddl.action[m].calculator.result[u].value&&(l=nbs_ddl.action[m].calculator.result[u].value),"mortgagetotalmax"==nbs_ddl.action[m].calculator.result[u].name&&void 0!==nbs_ddl.action[m].calculator.result[u].value&&(d=nbs_ddl.action[m].calculator.result[u].value);var p="";if(a&&o&&(p+="mdat:"+a+"/"+o+"|"),t&&(p+="mtyp:"+t+"|"),n&&(p+="mbal:"+n+"|"),r&&(p+="mrtemin:"+r+"|"),i&&(p+="mrtemax:"+i+"|"),s&&(p+="mchrgmin:"+s+"|"),c&&(p+="mchrgmax:"+c+"|"),l&&(p+="mtotmin:"+l+"|"),d&&(p+="mtotmax:"+d+"|"),""!=p)return p+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|metadata (evar89)-1")}}}},"cookie consent (evar105)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e,t=_satellite.cookie.get("OptanonConsent"),n=_satellite.cookie.get("OptanonAlertBoxClosed"),a="notset",o="notset",r="notset";void 0!==t&&void 0!==n&&(t.match(/C0003:1/)&&(a=!0),t.match(/C0003:0/)&&(a=!1)),void 0!==t&&void 0!==n&&(t.match(/C0004:1/)&&(o=!0),t.match(/C0004:0/)&&(o=!1)),void 0!==t&&void 0!==n&&(t.match(/C0002:1/)&&(r=!0),t.match(/C0002:0/)&&(r=!1)),e="|ux:"+r+"|cust:"+a+"|tm:"+o}catch(e){_satellite.getVar("global|store error codes").write("cookie consent (evar105)-1")}finally{return e}}}},"listvar page (listvar1)":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=[],t={};if(void 0!==nbs_ddl.page?.message&&nbs_ddl.page?.message&&nbs_ddl.page?.message?.length>0)for(var n="",a="",o=0;o<nbs_ddl.page.message.length;o++)void 0!==nbs_ddl.page?.message[o]?.text&&(n=nbs_ddl.page.message[o].text),void 0!==nbs_ddl.page?.message[o]?.cause&&(a=nbs_ddl.page.message[o].cause),t={value:"|pmtxt:"+n+"|pmcse:"+a+"~"},e.push(t);if(void 0!==nbs_ddl.page?.redirects&&nbs_ddl.page?.redirects&&nbs_ddl.page?.redirects?.length>0){var r="";for(o=0;o<nbs_ddl.page.redirects.length;o++)void 0!==nbs_ddl.page?.redirects[o]?.url&&(r+="|rurl:"+nbs_ddl.page.redirects[o].url),t={value:r},e.push(t)}if(0!==e.length)return e}catch(e){_satellite.getVar("global|store error codes").write("listvar page (listvar1)-1")}}}},"responsive state (prop73)":{forceLowerCase:!0,cleanText:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"nbs_ddl.page.responsive_state"}},"overdraft calculator|overdraft charge (event255)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"overdraft calculator"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a]?.calculator?.property&&nbs_ddl.action[a]?.calculator?.property)for(var t,n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"charge1"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[a].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("overdraft calculator|overdraft charge (event255)-1")}}}},"mortgage borrowing calculator|requested loan amount (event321)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const r=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[r]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[r]?.calculator?.name){var t,n,a;if(void 0!==nbs_ddl.action[r].calculator.property&&nbs_ddl.action[r].calculator.property)for(var o=0;o<nbs_ddl.action[r].calculator.property?.length;o++)"additionalborrowingamount"==nbs_ddl.action[r].calculator.property[o]?.name&&void 0!==nbs_ddl.action[r].calculator.property[o]?.value&&(t=nbs_ddl.action[r].calculator.property[o].value),"currentpropertyvalue"==nbs_ddl.action[r].calculator.property[o]?.name&&void 0!==nbs_ddl.action[r].calculator.property[o]?.value&&""==t&&(t=nbs_ddl.action[r].calculator.property[o].value),"mortgagedeposit"==nbs_ddl.action[r].calculator.property[o]?.name&&void 0!==nbs_ddl.action[r].calculator.property[o]?.value&&(n=nbs_ddl.action[r].calculator.property[o].value),"newpropertyvalue"==nbs_ddl.action[r].calculator.property[o]?.name&&void 0!==nbs_ddl.action[r].calculator.property[o]?.value&&(t=a=nbs_ddl.action[r].calculator.property[o].value),""!==n&&""!==a&&(t=a-n);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|requested loan amount (event321)-1")}}}},"mortgage rates tool|mortgage term (event274)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage rates tool"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"mortgageterminmonths"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage rates tool|mortgage term (event274)-1")}}}},"search|zero results event (event99)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e;if(nbs_ddl.page,void 0!==nbs_ddl.page?.search?.result_count&&(e=nbs_ddl.page?.search?.result_count.toString()),"0"===e)return 1}catch(e){_satellite.getVar("global|store error codes").write("search|zero results event (event99)-1")}}}},"mortgage erc calculator|mortgage balance (event360)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage erc calculator v2"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"mortgagebalance:"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage erc calculator|mortgage balance (event360)-1")}}}},"mortgage borrowing calculator|set purchase price (event320)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property?.length;n++)"newpropertyvalue"==nbs_ddl.action[a].calculator.property[n]?.name&&void 0!==nbs_ddl.action[a].calculator.property[n]?.value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|set purchase price (event320)-1")}}}},"datastream switch (live)":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return!0===_satellite.getVar("global|consent cookie read").userExperience()&&!0===_satellite.getVar("global|consent cookie read").targetMarketing()&&!0===_satellite.getVar("global|consent cookie read").customisation()?"a647022c-61b9-400d-a941-9053f5c60d9c":"69c2effd-f64f-4169-a5f9-832395c10ec3"}}},"search|search paginated view (event324)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(nbs_ddl.page.search?.term&&"further results viewed"===nbs_ddl.page?.search?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("search|search paginated view (event324)-1")}}}},"savings product finder tool|metadata (evar51)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const c=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[c]?.calculator&&"savings rates table"===nbs_ddl.action[c]?.calculator?.name&&"filter applied"===nbs_ddl.action[c]?.type){var t,n,a,o,r;if(void 0!==nbs_ddl.action[c]?.calculator?.property&&nbs_ddl.action[c]?.calculator?.property)for(var i=0;i<nbs_ddl.action[c].calculator?.property.length;i++)"access frequency"==nbs_ddl.action[c].calculator?.property[i]?.name&&void 0!==nbs_ddl.action[c].calculator?.property[i]?.value&&(t=nbs_ddl.action[c].calculator.property[i].value),"just isas"==nbs_ddl.action[c].calculator?.property[i]?.name&&void 0!==nbs_ddl.action[c].calculator?.property[i]?.value&&(n=nbs_ddl.action[c].calculator.property[i].value),"savings reason"==nbs_ddl.action[c].calculator?.property[i]?.name&&void 0!==nbs_ddl.action[c].calculator?.property[i]?.value&&(a=nbs_ddl.action[c].calculator.property[i].value);if(void 0!==nbs_ddl.action[c]?.calculator?.result&&nbs_ddl.action[c]?.calculator?.result)for(i=0;i<nbs_ddl.action[c].calculator.result.length;i++)"number of results"==nbs_ddl.action[c].calculator.result[i].name&&void 0!==nbs_ddl.action[c].calculator.result[i].value&&(o=nbs_ddl.action[c].calculator.result[i].value.toString()),
"result message"==nbs_ddl.action[c].calculator.result[i].name&&void 0!==nbs_ddl.action[c].calculator.result[i].value&&(r=nbs_ddl.action[c].calculator.result[i].value);var s="";if(t&&(s+="acfrq:"+t+"|"),n&&(s+="isaflg:"+n+"|"),a&&(s+="svrsn:"+a+"|"),o&&(s+="rcnt:"+o+"|"),r&&(s+="rmsg:"+r+"|"),""!=s)return s+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("savings product finder tool|metadata (evar51)-1")}}}},"cdp|cookie consent|customisation":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){let e="notset";try{let t=_satellite.cookie.get("OptanonConsent"),n=_satellite.cookie.get("OptanonAlertBoxClosed");void 0!==t&&void 0!==n&&(e=t.match(/C0003:1/)?"true":e,e=t.match(/C0003:0/)?"false":e)}catch(e){_satellite.getVar("global|store error codes").write("cookie consent|customisation-1",e)}finally{return e}}}},"feedback tool metadata (evar124)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if("feedback tool"===nbs_ddl.action[t]?.type)return"thr:"+nbs_ddl.action[t].feedback.thumb_rating}catch(e){_satellite.getVar("global|store error codes").write("feedback tool metadata (evar124)-1")}}}},"third party|rightmove flag":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e,t,n,a=!1;return window.location.search&&(e=window.location.search.match(/[&?]cmpid=[^&]*_s\/25_[^&]*/i))&&(t=e[0].match(/_pn\/mt/i),n=e[0].match(/_dis\/y/i),!t&&n&&(a=!0)),a}catch(e){_satellite.getVar("global|store error codes").write("third party|rightmove flag-1")}}}},"infinity id (transactionID)":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e;if(!0===_satellite.getVar("global|consent cookie read").userExperience())return void 0!==window.uniqueId&&(e=window.uniqueId),e}catch(e){_satellite.getVar("global|store error codes").write("infinity id (transactionID)-1")}}}},"error codes (evar135)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=sessionStorage.getItem("adobe.nbs.TMSError"),t="";e&&(t+=(e=JSON.parse(e)).join(", "),t+="end:1")}catch(e){}finally{return t}}}},"cdp|cookie consent|user experience":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){let e="notset";try{let t=_satellite.cookie.get("OptanonConsent"),n=_satellite.cookie.get("OptanonAlertBoxClosed");void 0!==t&&void 0!==n&&(e=t.match(/C0002:1/)?"true":e,e=t.match(/C0002:0/)?"false":e)}catch(e){_satellite.getVar("global|store error codes").write("cookie consent|user experience-1",e)}finally{return e}}}},"mortgage rates tool|ltv tier (event275)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const s=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[s]?.type&&"mortgage rates tool"===nbs_ddl.action[s]?.calculator?.name){var t,n="",a="",o="",r="";if(void 0!==nbs_ddl.action[s].calculator.property&&nbs_ddl.action[s].calculator.property)for(var i=0;i<nbs_ddl.action[s].calculator.property.length;i++)"mortgageamount"==nbs_ddl.action[s].calculator.property[i].name&&void 0!==nbs_ddl.action[s].calculator.property[i].value&&(n=parseInt(nbs_ddl.action[s].calculator.property[i].value)),"additionalborrowingamount"==nbs_ddl.action[s].calculator.property[i].name&&void 0!==nbs_ddl.action[s].calculator.property[i].value&&(a=parseInt(nbs_ddl.action[s].calculator.property[i].value)),"propertyvalue"==nbs_ddl.action[s].calculator.property[i].name&&void 0!==nbs_ddl.action[s].calculator.property[i].value&&(o=parseInt(nbs_ddl.action[s].calculator.property[i].value)),"deposit"==nbs_ddl.action[s].calculator.property[i].name&&void 0!==nbs_ddl.action[s].calculator.property[i].value&&(r=parseInt(nbs_ddl.action[s].calculator.property[i].value)),""!==o&&""!==r&&(n=o-r),""!==a&&(n+=a),""!==n&&""!==o&&(t=(n/o*100).toFixed(2));return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage rates tool|ltv tier (event275)-1")}}}},"nav tracking page name|external (prop61)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const n=nbs_ddl.action.length-e.detail.arrayLength;var t;"navigation"===nbs_ddl.action[n]?.type&&"nbw:"===(t=nbs_ddl.page.name)&&(t="nbw:homepage")}catch(e){_satellite.getVar("global|store error codes").write("nav tracking page name|external (prop61)-1")}finally{return t}}}},"fpid present (event515)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(_satellite.cookie.get("FPID"))return 1}catch(e){_satellite.getVar("global|store error codes").write("fpid present (event515)-1")}}}},"build id (prop52)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(nbs_ddl.page?.build_id)return nbs_ddl.page.build_id}catch(e){_satellite.getVar("global|store error codes").write("build id (prop52)-1")}}}},"global|function|cleanse":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return{cleanseObject:function(e){function t(e){return"object"==typeof e&&null!==e?0===Object.keys(e).length||Object.values(e).every(t):!e}function n(e){for(let a in e)t(e[a])?delete e[a]:"object"==typeof e[a]&&null!==e[a]&&n(e[a])}return e._experience&&n(e._experience),e}}}}},"xdm object data|global":{modulePath:"adobe-alloy/dist/lib/dataElements/xdmObject/index.js",settings:{data:{web:{webReferrer:{URL:"%referrer override%"},webPageDetails:{name:"%page|name (pagename)%",siteSection:"%channel%"}},commerce:{order:{payments:[{transactionID:"%infinity id (transactionID)%"}]}},_nationwide:{cookieConsent:{customisation:"%cdp|cookie consent|customisation%",userExperience:"%cdp|cookie consent|user experience%",targetingAndMarketing:"%cdp|cookie consent|targeting and marketing%"}}},sandbox:{name:"prod"}}},"loan calc|metadata (evar42)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const r=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[r]?.calculator&&"calculator result loaded"===nbs_ddl.action[r]?.type&&"loans repayments calculator"===nbs_ddl.action[r]?.calculator?.name){if(void 0!==nbs_ddl.action[r]?.calculator?.property&&nbs_ddl.action[r]?.calculator?.property)for(var t,n,a=0;a<nbs_ddl.action[r].calculator?.property.length;a++)"borrowamount"==nbs_ddl.action[r].calculator?.property[a]?.name&&void 0!==nbs_ddl.action[r].calculator?.property[a]?.value&&(t=nbs_ddl.action[r].calculator.property[a].value),"hasproductyesno"==nbs_ddl.action[r].calculator?.property[a]?.name&&void 0!==nbs_ddl.action[r].calculator?.property[a]?.value&&(n=nbs_ddl.action[r].calculator.property[a].value);var o;if(void 0!==nbs_ddl.action[r]?.calculator?.result&&nbs_ddl.action[r]?.calculator?.result)for(a=0;a<nbs_ddl.action[r].calculator.result.length;a++)"apr"==nbs_ddl.action[r].calculator.result[a]?.name&&void 0!==nbs_ddl.action[r].calculator?.result[a]?.value&&(o=nbs_ddl.action[r].calculator.result[a].value);let e="";if(t&&(e+="lamt:"+t+"|"),o&&(e+="lapr:"+o+"|"),n&&(e+="leprd:"+n+"|"),""!=e)return e+="end:1",e}}catch(e){_satellite.getVar("global|store error codes").write("loan calc|metadata (evar42)-1")}}}},"video|video progress reached (event234)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"video progress reached"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|video progress reached (event234)-1")}}}},"overdraft calculator|overdraft days (event268)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"overdraft calculator"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a]?.calculator?.property&&nbs_ddl.action[a]?.calculator.property)for(var t,n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"overdraftdays"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("overdraft calculator|overdraft days (event268)-1")}}}},"cookie consent|category|customisation":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{var e=_satellite.cookie.get("OptanonConsent"),t=_satellite.cookie.get("OptanonAlertBoxClosed"),n="notset";void 0!==e&&void 0!==t&&(e.match(/C0003:1/)&&(n=!0),e.match(/C0003:0/)&&(n=!1))}catch(e){_satellite.getVar("global|store error codes").write("cookie consent|category|customisation-1")}finally{return n}}}},"mortgage rates tool|property value (event270)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage rates tool"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"propertyvalue"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage rates tool|property value (event270)-1")}}}},"calculator or tool|marketing prompt click fallback (event16)":{defaultValue:"",forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;let n=nbs_ddl.action[t]?.component;if("true"===n?.impression_flag&&"kantar"!==n?.impression_metadata&&"tool"!==n?.impression_metadata)return 1}catch(e){_satellite.getVar("global|store error codes").write("calculator or tool|marketing prompt click fallback (event16)-1")}}}},"loan calc|loan amount (event350)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[a]?.calculator&&"loans repayments calculator"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a]?.calculator?.property&&nbs_ddl.action[a]?.calculator?.property)for(var t,n=0;n<nbs_ddl.action[a].calculator.property.length;n++)"borrowamount"==nbs_ddl.action[a].calculator.property[n].name&&void 0!==nbs_ddl.action[a].calculator.property[n].value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("loan calc|loan amount (event350)-1")}}}},"page template (prop44)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/javascriptVariable.js",settings:{path:"nbs_ddl.page.template"}},"mortgage borrowing calculator|payment range min value (event359)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.result&&nbs_ddl.action[a].calculator.result)for(var n=0;n<nbs_ddl.action[a].calculator.result?.length;n++)"mortgage payment range min payment"==nbs_ddl.action[a].calculator.result[n]?.name&&void 0!==nbs_ddl.action[a].calculator.result[n]?.value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|payment range min value (event359)-1")}}}},"data object merge (page)":{modulePath:"core/src/lib/dataElements/mergedObjects.js",settings:{objects:["%product string|page (product)%","%target parameters%"]}},"datastream switch (staging)":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return!0===_satellite.getVar("global|consent cookie read").userExperience()&&!0===_satellite.getVar("global|consent cookie read").targetMarketing()&&!0===_satellite.getVar("global|consent cookie read").customisation()?"a03c360b-56e5-4020-ae86-b6b428c6be3e":"38f356ee-cf67-478c-93ab-d2e8ef316a4a"}}},"previous page name (prop19)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{return _satellite.cookie.get("gpv_p19")}catch(e){_satellite.getVar("global|store error codes").write("previous page name (prop19)-1")}}}},"mortgage borrowing calculator|helping hand max amount (event357)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a]?.calculator?.name){if(void 0!==nbs_ddl.action[a]?.calculator?.result&&nbs_ddl.action[a]?.calculator?.result)for(var t,n=0;n<nbs_ddl.action[a].calculator.result.length;n++)"helping hand max amount"==nbs_ddl.action[a].calculator.result[n].name&&void 0!==nbs_ddl.action[0].calculator.result[n].value&&(t=nbs_ddl.action[a].calculator.result[n].value.toString());return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|helping hand max amount (event355)-1")}}}},"xdm|cleansed|action":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{let e=_satellite.getVar("merge|xdm object|action");if(e)return e=_satellite.getVar("global|function|cleanse").cleanseObject(e),e}catch(e){_satellite.getVar("global|store error codes").write("xdm|cleansed|action-1")}}}},".co.uk short urls (evar145)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{const e=nbs_ddl.page.redirects[nbs_ddl.page.redirects.length-1],t=/^.+?\.co\.uk\/[^\/]+(\/)?$/;if(e&&e.url){const n=e.url.match(t);if(n)return n[0]}}catch(e){_satellite.getVar("global|store error codes").write(".co.uk short urls (evar145)")}}}},"xdm|cleansed|page":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{let e=_satellite.getVar("merge|xdm object|page");if(e)return e=_satellite.getVar("global|function|cleanse").cleanseObject(e),e}catch(e){_satellite.getVar("global|store error codes").write("xdm|cleansed|page-1")}}}},"contact us tool|metadata (evar117)":{forceLowerCase:!0,modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const o=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[o]?.calculator&&"tool result loaded"===nbs_ddl.action[o]?.type&&"contact us accordion"===nbs_ddl.action[o]?.calculator?.name){var t="";if(void 0!==nbs_ddl.action[o]?.calculator?.property&&nbs_ddl.action[o]?.calculator?.property)for(var n=0;n<nbs_ddl.action[o].calculator.property.length;n++)t+="|"+nbs_ddl.action[o].calculator.property[n].name+":"+nbs_ddl.action[o].calculator.property[n].value;var a="";if(t&&(a+=t+"|"),""!=a)return a+="end:1"}}catch(e){_satellite.getVar("global|store error codes").write("contact us tool|metadata (evar117)-1")}}}},"search|click through event (event100)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){try{if(nbs_ddl.page.search?.term&&"search click through"===nbs_ddl.page?.search?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("search|click through event (event100)-1")}}}},"video|user seek (event232)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"user seek"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|user seek (event232)-1")}}}},"mortgage borrowing calculator|requested term (event318)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const a=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[a]?.type&&"mortgage borrowing calculator"===nbs_ddl.action[a]?.calculator?.name){var t;if(void 0!==nbs_ddl.action[a].calculator.property&&nbs_ddl.action[a].calculator.property)for(var n=0;n<nbs_ddl.action[a].calculator.property?.length;n++)"mortgagelength"==nbs_ddl.action[a].calculator.property[n]?.name&&void 0!==nbs_ddl.action[a].calculator.property[n]?.value&&(t=nbs_ddl.action[a].calculator.property[n].value);return t}}catch(e){_satellite.getVar("global|store error codes").write("mortgage borrowing calculator|requested term (event318)-1")}}}},"video|player error (event237)":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){try{const t=nbs_ddl.action.length-e.detail.arrayLength;if(void 0!==nbs_ddl.action[t]?.video?.event&&"player.error"===nbs_ddl.action[t]?.video?.event)return 1}catch(e){_satellite.getVar("global|store error codes").write("video|player error (event237)-1")}}}}},extensions:{"medallia-for-adobe-launch":{displayName:"Medallia for Adobe Launch",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EPedf7f06f01d74f479eb7f54a1336cb99/",settings:{dataIsolation:!1},modules:{"medallia-for-adobe-launch/lib/actions/load-medallia-digital.js":{name:"load-medallia-digital",displayName:"Load Medallia Digital",script:function(e){"use strict";e.exports=function(e){var t=document.createElement("script");t.src=e.medallia_digital_asset||"",t.type="text/javascript",t.async=!0,document.body.appendChild(t)}}}}},"adobe-alloy":{displayName:"Adobe Experience Platform Web SDK",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP9b2d0d56e6f54e59b8eeea740ab515a3/",settings:{instances:[{name:"alloy",edgeDomain:"smetrics.nationwide.co.uk",edgeConfigId:"%datastream switch (live)%",clickCollection:{filterClickDetails:function(e){if("exit"===e.linkType&&e.linkUrl.includes("nationwide.co.uk"))return!1;if("download"===e.linkType||"exit"===e.linkType){const t=new URL(e.linkUrl);t.search="";const n=t.toString();e.linkUrl=n}},internalLinkEnabled:!1},onBeforeEventSend:function(e){e.xdm??={},e.xdm.web??={},e.xdm.web.webInteraction??={};let t=e.xdm.web.webInteraction,n=t?.type;if("download"===n||"exit"===n)return nbs_ddl??={},nbs_ddl.action??=[],nbs_ddl.action.unshift({type:n,component:{name:n.charAt(0)+"|"+t?.URL,identifier:t?.name}}),_satellite.track("wa_action",{actionType:"manual"+n,actionName:t.name,actionUrl:t.URL,arrayLength:nbs_ddl.action.length}),!1;"manualdownload"!==n&&"manualexit"!==n||(t.type=n.slice(6)),e.data??={},e.data.__adobe??={},e.data.__adobe.analytics??={},e.data.__adobe.analytics.prop41=e.xdm.implementationDetails.version+"+"+_satellite.buildInfo.buildDate,"propositionDisplay"===e.xdm.eventType&&(e.xdm.eventType="decisioning.propositionDisplay",e.xdm.web.webInteraction={name:e.xdm._experience.decisioning.propositions[0].scope,type:"other",linkClicks:{value:1}}),!0===_satellite.getVar("global|consent cookie read").userExperience()&&function(){function e(){a||(a=!0,window.CS_CONF&&(CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Adobe Analytics - v"+n)))}function t(e){if(e)o=e;else{o=Math.random()+"_"+Date.now();var t=function(){for(var e=0,t=document.domain,n=t.split("."),a="_cs_tld"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(a+"="+a);)t=n.slice(-1-++e).join("."),document.cookie=a+"="+a+";domain="+t+";SameSite=None;Secure";return document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}(),n=new Date,a=n.getTime();a+=18e5,n.setTime(a),document.cookie=r+"="+o+"; expires="+n.toUTCString()+";path=/;domain="+t+";SameSite=None;Secure"}sessionStorage.setItem("csMatchingKey",o),_uxa.push(["trackDynamicVariable",{key:"csMatchingKey",value:o}])}var n="1.0.0",a=!1;window._uxa=window._uxa||[],_uxa.push(["afterPageView",e]);var o=null,r="_cs_mk_aa",i="; "+document.cookie;if(i){var s=i.split("; "+r+"=");1==s.length?t():t(s[1].split(";")[0])}}()},stagingEdgeConfigId:"%datastream switch (staging)%",developmentEdgeConfigId:"%datastream switch (staging)%",thirdPartyCookiesEnabled:!1}]},modules:{"adobe-alloy/dist/lib/dataElements/xdmObject/index.js":{name:"xdm-object",displayName:"XDM object",script:function(e){"use strict";e.exports=e=>e.data}},"adobe-alloy/dist/lib/dataElements/variable/index.js":{name:"variable",displayName:"Variable",script:function(e,t,n){"use strict";const{variableStore:a}=n("../../index");e.exports=e=>a[e.dataElementId]||{}}},"adobe-alloy/dist/lib/events/sendEventComplete/index.js":{name:"send-event-complete",displayName:"Send event complete",script:function(e,t,n){"use strict";const{sendEventCallbackStorage:a}=n("../../index"),o=n("./createSendEventComplete");e.exports=o({sendEventCallbackStorage:a})}},"adobe-alloy/dist/lib/actions/updateVariable/index.js":{name:"update-variable",displayName:"Update variable",script:function(e,t,n){"use strict";const{deepAssign:a}=n("../../alloy"),{variableStore:o}=n("../../index"),r=n("./createUpdateVariable");e.exports=r({variableStore:o,deepAssign:a})}},"adobe-alloy/dist/lib/actions/sendEvent/index.js":{name:"send-event",displayName:"Send event",script:function(e,t,n,a){"use strict";var o;const r=n("./createSendEvent"),i=n("../../instanceManager/index"),{sendEventCallbackStorage:s}=n("../../index"),c=n("../../utils/createGetConfigOverrides");e.exports=r({instanceManager:i,sendEventCallbackStorage:s,getConfigOverrides:c(null===(o=a.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/actions/redirectWithIdentity/index.js":{name:"redirect-with-identity",displayName:"Redirect with identity",script:function(e,t,n,a){"use strict";var o;const r=n("./createRedirectWithIdentity"),i=n("../../instanceManager/index"),s=n("../../utils/createGetConfigOverrides");e.exports=r({instanceManager:i,window:window,logger:a.logger,getConfigOverrides:s(null===(o=a.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/instanceManager/index.js":{script:function(e,t,n,a){"use strict";var o;const{createCustomInstance:r,createEventMergeId:i,components:s}=n("../alloy"),c=n("./createInstanceManager"),l=n("./injectWrapOnBeforeEventSend"),d=n("../utils/createGetConfigOverrides"),u=l({version:"2.29.0"});e.exports=c({turbine:a,window:window,createCustomInstance:r,components:s,createEventMergeId:i,orgId:_satellite.company.orgId,wrapOnBeforeEventSend:u,getConfigOverrides:d(null===(o=a.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/index.js":{script:function(e,t,n){"use strict";const a=n("./createEventMergeIdCache"),o=n("./createSendEventCallbackStorage"),r=n("./createMediaCollectionSessionStorage"),i=n("./createVariableStore");t.eventMergeIdCache=a(),t.sendEventCallbackStorage=o(),t.mediaCollectionSessionStorage=r(),t.variableStore=i()}},"adobe-alloy/dist/lib/createEventMergeIdCache.js":{script:function(e){"use strict";e.exports=()=>{const e={};return{set(t,n){e[t]=n},getByCacheId:t=>e[t],clearByEventMergeId(t){Object.keys(e).forEach((n=>{e[n]===t&&delete e[n]}))}}}}},"adobe-alloy/dist/lib/createSendEventCallbackStorage.js":{script:function(e){"use strict";e.exports=()=>{const e=[];return{add(t){e.push(t)},triggerEvent(t){e.forEach((e=>{e(t)}))}}}}},"adobe-alloy/dist/lib/createMediaCollectionSessionStorage.js":{script:function(e){"use strict";e.exports=()=>{const e={};return{add({playerId:t,sessionDetails:n}){if(e[t])throw new Error(`Player Id ${t} already exists`);e[t]=n},remove({playerId:t}){e[t]=void 0},get:({playerId:t})=>e[t]}}}},"adobe-alloy/dist/lib/createVariableStore.js":{script:function(e){"use strict";e.exports=()=>({})}},"adobe-alloy/dist/lib/events/sendEventComplete/createSendEventComplete.js":{script:function(e){"use strict";e.exports=({sendEventCallbackStorage:e})=>(t,n)=>{e.add(n)}}},"adobe-alloy/dist/lib/alloy.js":{script:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}function r(e,t){function n(n,a,r){if("undefined"!=typeof document){"number"==typeof(r=o({},t,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in r)r[s]&&(i+="; "+s,!0!==r[s]&&(i+="="+r[s].split(";")[0]));return document.cookie=n+"="+e.write(a,n)+i}}function a(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],a={},o=0;o<n.length;o++){var r=n[o].split("="),i=r.slice(1).join("=");try{var s=decodeURIComponent(r[0]);if(a[s]=e.read(i,s),t===s)break}catch(e){}}return t?a[t]:a}}return Object.create({set:n,get:a,remove:function(e,t){n(e,"",o({},t,{expires:-1}))},withAttributes:function(e){return r(this.converter,o({},this.attributes,e))},withConverter:function(e){return r(o({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}function i(e,t=0){return(ln[e[t+0]]+ln[e[t+1]]+ln[e[t+2]]+ln[e[t+3]]+"-"+ln[e[t+4]]+ln[e[t+5]]+"-"+ln[e[t+6]]+ln[e[t+7]]+"-"+ln[e[t+8]]+ln[e[t+9]]+"-"+ln[e[t+10]]+ln[e[t+11]]+ln[e[t+12]]+ln[e[t+13]]+ln[e[t+14]]+ln[e[t+15]]).toLowerCase()}function s(){if(!dn){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");dn=crypto.getRandomValues.bind(crypto)}return dn(un)}function c(e,t,n){if(pn.randomUUID&&!t&&!e)return pn.randomUUID();const a=(e=e||{}).random??e.rng?.()??s();if(a.length<16)throw new Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=a[e];return t}return i(a)}function l(e){return"object"==typeof e||void 0===e}function d(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const a=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&a===String(n[e]).toLowerCase())return!0;return!1}}}function u(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const a=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&a===String(n[e]).toLowerCase())return!1;return!0}}}function p(){return{matches:(e,t)=>void 0!==e[t]&&null!==e[t]}}function m(){return{matches:(e,t)=>void 0===e[t]||null===e[t]}}function g(e){return"number"==typeof e}function f(){return{matches:(e,t,n=[])=>{const a=e[t];if(!g(a))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&a>n[e])return!0;return!1}}}function v(){return{matches:(e,t,n=[])=>{const a=e[t];if(!g(a))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&a>=n[e])return!0;return!1}}}function b(){return{matches:(e,t,n=[])=>{const a=e[t];if(!g(a))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&a<n[e])return!0;return!1}}}function h(){return{matches:(e,t,n=[])=>{const a=e[t];if(!g(a))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&a<=n[e])return!0;return!1}}}function y(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const a=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&-1!==a.indexOf(String(n[e]).toLowerCase()))return!0;return!1}}}function _(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const a=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&-1!==a.indexOf(String(n[e]).toLowerCase()))return!1;return!0}}}function w(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const a=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&a.startsWith(String(n[e]).toLowerCase()))return!0;return!1}}}function C(){return{matches:(e,t,n=[])=>{if(l(e[t]))return!1;const a=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!l(n[e])&&a.endsWith(n[e].toLowerCase()))return!0;return!1}}}function E(e){return Ip[e]}function k(e){return void 0===e}function x(e){return Object.keys(e)}function P(e,t,n){switch(t){case xp.GREATER_THAN:return e>n;case xp.GREATER_THAN_OR_EQUAL_TO:return e>=n;case xp.LESS_THAN:return e<n;case xp.LESS_THAN_OR_EQUAL_TO:return e<=n;case xp.EQUALS:return e===n;case xp.NOT_EQUALS:return e!==n;default:return!1}}function S(e,t){for(let n=0;n<t.length;n+=1)if(!k(e[t[n]]))return e[t[n]]}function I(e,t){const n=x(e);for(let a=0;a<n.length;a+=1){const o=n[a],{event:r={}}=t;if(r[n[a]]!==e[o])return!1}return!0}function j(e,t,n,a){return e.reduce(((e,o)=>{const r=S(o,jp);if(!r)return e;const i=t.events[r];if(!i)return e;const s=S(o,Tp);if(!s)return e;const c=i[s];if(!c)return e;if(!I(o,c))return e;const{count:l=1}=c;return k(n)||k(a)||c.timestamp>=n&&c.timestamp<=a?e+l:e}),0)}function T(e,t,n,a){let o=n;return e.every((e=>{const n=S(e,jp);if(!n)return!1;const r=t.events[n];if(!r)return!1;const i=S(e,Tp);if(!i)return!1;const s=r[i];if(!I(e,s))return!1;if(null===s||k(s)||0===s.count)return!1;const c=(k(o)||s.timestamp>=o)&&(k(a)||s.timestamp<=a);return o=s.timestamp,c}))?1:0}function O(e,t){let n=!0;for(let a=0;a<t.length;a+=1)n=n&&t[a].evaluate(e);return n}function D(e,t){let n=!1;for(let a=0;a<t.length;a+=1)if(n=n||t[a].evaluate(e),n)return!0;return!1}function N(e,t,n){return{version:e,rules:t,metadata:n}}function R(e,t,n){return{key:n,execute:n=>e.evaluate(n)?t:[],toString:()=>`Rule{condition=${e}, consequences=${t}}`}}function L(e,t){return{evaluate:e=>t.evaluate(e),toString:()=>`Condition{type=${e}, definition=${t}}`}}function A(e,t,n){return{id:e,type:t,detail:n}}function V(e,t){return{evaluate:n=>Pp.AND===e?O(n,t):Pp.OR===e&&D(n,t)}}function M(e,t,n){return{evaluate:a=>{const o=E(t);return!!o&&o.matches(a,e,n)}}}function q(e,t,n,a,o,r){return{evaluate:i=>{let s;return s=Sp.ORDERED===r?T(e,i,a,o):j(e,i,a,o),P(s,t,n)}}}function $(e,t){return Object.assign(e,t)}function U(e){const{key:t,matcher:n,values:a}=e;return M(t,n,a)}function F(e){const{logic:t,conditions:n}=e;return V(t,n.map(H))}function B(e){const{events:t,from:n,to:a,matcher:o,value:r,searchType:i}=e;return q(t,o,r,n,a,i)}function H(e){const{type:t,definition:n}=e;if(kp.MATCHER===t)return L(t,U(n));if(kp.GROUP===t)return L(t,F(n));if(kp.HISTORICAL===t)return L(t,B(n));throw new Error("Can not parse condition")}function z(e){const{id:t,type:n,detail:a}=e;return A(t,n,a)}function W(e){const{condition:t,consequences:n,key:a}=e;return R(H(t),n.map(z),a)}function J(e){if(e)return{provider:e.provider,providerData:$({},e.providerData)}}function G(e){const{version:t,rules:n,metadata:a}=e;return N(t,n.map(W),J(a))}function Q(e){return{provider:Dp,execute:t=>e.map((e=>e.execute(t))).filter((e=>e.length>0))}}function X(e){const{providerData:t}=e;if(!t)throw new Error("Provider data is missing in metadata");const{identityTemplate:n,buckets:a}=t;if(!n)throw new Error("Identity template is missing in provider data");if(!a)throw new Error("Buckets is missing in provider data")}function K(e){const{xdm:t}=e;if(!t)throw new Error("XDM object is missing in the context");const{identityMap:n}=t;if(!n)throw new Error("Identity map is missing in the XDM object");const a=n[Np];if(!a)throw new Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(a)||0===a.length)throw new Error("ECID identities array is empty or not an array");const o=a[0].id;if(!o)throw new Error("ECID identity is missing in the identities array");return o}function Y(e,t,n){const{providerData:a}=n,{identityTemplate:o}=a;return o.replace(Rp,t).replace(Lp,e)}function Z(e){return!k(e)}function ee(e,t=(e=>e[0])){const n={};return function(...a){const o=t(a);return Z(n[o])||(n[o]=e(...a)),n[o]}}function te(e,t){const n=65535&t;return((t-n)*e|0)+(n*e|0)|0}function ne(e,t=0){let n;const a=e.length,o=3432918353,r=461845907;let i=t;const s=-2&a;for(let t=0;t<s;t+=2)n=e.charCodeAt(t)|e.charCodeAt(t+1)<<16,n=te(n,o),n=(131071&n)<<15|n>>>17,n=te(n,r),i^=n,i=(524287&i)<<13|i>>>19,i=5*i+3864292196|0;return a%2==1&&(n=e.charCodeAt(s),n=te(n,o),n=(131071&n)<<15|n>>>17,n=te(n,r),i^=n),i^=a<<1,i^=i>>>16,i=te(i,2246822507),i^=i>>>13,i=te(i,3266489909),i^=i>>>16,i}function ae(e,t){const n=Ap(e),a=Math.abs(n)%t/t*Vp;return Math.round(a*Vp)/Vp}function oe(e,t,n){return{allocation:Mp(e,t),...n}}function re(e){const t={};for(let n=0;n<e.length;n+=1){const a=e[n];a.key&&(t[a.key]||(t[a.key]=[]),t[a.key].push(a))}return t}function ie(e,t){
return t.map((t=>t.execute(e))).filter((e=>e.length>0))}function se(e,t){X(t);const n=e.filter((e=>!e.key)),a=re(e),{buckets:o}=t.providerData;return{provider:Op,execute:e=>{const r=K(e),i=ie(e,n),s=x(a),c=[];for(let n=0;n<s.length;n+=1){const i=s[n],l=a[i],d=ie(oe(Y(r,i,t),o,e),l);c.push(...d)}return[...i,...c]}}}function ce(e,t){if(!t)return Q(e);const{provider:n}=t;return n===Op?se(e,t):Q(e)}function le(e){const{rules:t,metadata:n}=G(e);return ce(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepAssign=t.createEventMergeId=t.createCustomInstance=t.components=void 0;var de=a(n("@adobe/reactor-query-string")),ue=e=>null==e,pe=e=>!ue(e)&&!Array.isArray(e)&&"object"==typeof e,me=(...e)=>e.length<2?Object.assign(...e):e.reduce(((e,t)=>(pe(t)&&Object.keys(t).forEach((n=>{Array.isArray(t[n])?Array.isArray(e[n])?e[n].push(...t[n]):e[n]=[...t[n]]:e[n]=t[n]})),e))),ge=r({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),fe={get:ge.get.bind(ge),set:ge.set.bind(ge),remove:ge.remove.bind(ge),withConverter:ge.withConverter.bind(ge)};const ve=(e,t)=>{Object.keys(t).forEach((n=>{pe(e[n])&&pe(t[n])?ve(e[n],t[n]):e[n]=t[n]}))};var be=(e,...t)=>{if(ue(e))throw new TypeError('deepAssign "target" cannot be null or undefined');const n=Object(e);return t.forEach((e=>ve(n,Object(e)))),n};t.deepAssign=be;var he=(e,t)=>n=>{const a=t.split(".").reduce(((e,t)=>(e[t]=e[t]||{},e[t])),e);be(a,n)},ye=()=>{const e=[];return{add(t){e.push(t)},call:(...t)=>Promise.all(e.map((e=>e(...t))))}},_e=({logger:e,cookieJar:t})=>({...t,set(n,a,o){e.info("Setting cookie",{name:n,value:a,...o}),t.set(n,a,o)}}),we=()=>{let e=0,t=Promise.resolve();return{addTask(n){e+=1;const a=()=>n().finally((()=>{e-=1}));return t=t.then(a,a),t},get length(){return e}}};const Ce=(()=>{const e=[];for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e.push(n)}return function(t,n){t=unescape(encodeURIComponent(t)),n||(n=0),n=~n;for(let a=0;a<t.length;a++){const o=255&(n^t.charCodeAt(a));n=n>>>8^e[o]}return(n=~n)>>>0}})();var Ee=()=>{const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e};const ke=(e,t)=>e===t,xe=(e,t,n)=>{for(let a=0;a<e.length;a+=1)if(n(e[a],t))return a;return-1};var Pe=(e,t=ke)=>e.filter(((n,a)=>xe(e,n,t)===a)),Se=(e,t)=>e.appendChild(t);const Ie=(e,t)=>{Object.keys(t).forEach((n=>{if("style"===n&&pe(t[n])){const a=t[n];Object.keys(a).forEach((t=>{e.style[t]=a[t]}))}else e[n]=t[n]}))};var je=(e,t={},n={},a=[],o=document)=>{const r=o.createElement(e);return Object.keys(t).forEach((e=>{r.setAttribute(e,t[e])})),Ie(r,n),a.forEach((e=>Se(r,e))),r};const Te="BODY",Oe="IFRAME",De="IMG",Ne="DIV",Re="STYLE",Le="SCRIPT",Ae="HEAD";var Ve=({src:e,currentDocument:t=document})=>new Promise(((n,a)=>{je(De,{src:e},{onload:n,onerror:a,onabort:a},[],t)})),Me=e=>"function"==typeof e,qe=e=>Array.isArray(e)&&e.length>0,$e=e=>Array.isArray(e)?e:null==e?[]:[].slice.call(e);const Ue=/^\s*>/;var Fe=(e,t)=>Ue.test(t)?$e(e.querySelectorAll(`:scope ${t}`)):$e(e.querySelectorAll(t)),Be=":shadow";const He=e=>e.split(Be),ze=(e,t)=>{const n=t;return n.startsWith(">")?`${e instanceof Element||e instanceof Document?":scope":":host"} ${n}`:n};var We=(e,t)=>{const n=He(t);if(n.length<2)return Fe(e,t);let a=e;for(let e=0;e<n.length;e+=1){const t=n[e].trim();if(""===t&&a.shadowRoot){a=a.shadowRoot;continue}const o=ze(a,t),r=Fe(a,o);if(0===r.length||!r[0]||!r[0].shadowRoot)return r;a=r[0].shadowRoot}},Je=e=>-1!==e.indexOf(Be),Ge=(e,t=document)=>Je(e)?We(t,e):Fe(t,e);const Qe="MutationObserver",Xe="requestAnimationFrame",Ke={childList:!0,subtree:!0},Ye="visibilityState",Ze="visible",et=100,tt=5e3,nt=e=>new Error(`Could not find: ${e}`),at=e=>new Promise(e),ot=e=>Me(e[Qe]),rt=(e,t,n,a,o)=>at(((r,i)=>{let s;const c=new e[Qe]((()=>{const e=o(n);qe(e)&&(c.disconnect(),s&&clearTimeout(s),r(e))}));s=setTimeout((()=>{c.disconnect(),i(nt(n))}),a),c.observe(t,Ke)})),it=e=>e[Ye]===Ze,st=(e,t,n,a)=>at(((o,r)=>{const i=()=>{const n=a(t);qe(n)?o(n):e[Xe](i)};i(),setTimeout((()=>{r(nt(t))}),n)})),ct=(e,t,n)=>at(((a,o)=>{const r=()=>{const t=n(e);qe(t)?a(t):setTimeout(r,et)};r(),setTimeout((()=>{o(nt(e))}),t)}));var lt=(e,t=Ge,n=tt,a=window,o=document)=>{const r=t(e);return qe(r)?Promise.resolve(r):ot(a)?rt(a,o,e,n,t):it(o)?st(a,e,n,t):ct(e,n,t)},dt=(e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e),ut=e=>{const t=e.parentNode;return t?t.removeChild(e):null};const pt={name:"Adobe Alloy"},mt={style:{display:"none",width:0,height:0}};var gt=({appendNode:e=Se,awaitSelector:t=lt,createNode:n=je,fireImage:a=Ve}={})=>{const o=a;let r;const i=()=>t(Te).then((([t])=>r||(r=n(Oe,pt,mt),e(t,r)))),s=({src:e})=>i().then((t=>{const n=t.contentWindow.document;return a({src:e,currentDocument:n})}));return e=>{const{hideReferrer:t,url:n}=e;return t?s({src:n}):o({src:n})}},ft=e=>pe(e)&&0===Object.keys(e).length;const vt=(e,t)=>ue(e)||!pe(e)?e:Object.keys(e).reduce(((n,a)=>{const o=e[a];if(pe(o)){const e=vt(o,t);return ft(e)?n:{...n,[a]:e}}return t(o)?{...n,[a]:o}:n}),{});var bt="com.adobe.alloy.",ht=(e,t)=>e.slice(-t);const yt=`${bt}getTld`;var _t=(e,t)=>{let n="";const a=e.location.hostname.toLowerCase().split(".");let o=1;for(;o<a.length&&!t.get(yt);)o+=1,n=ht(a,o).join("."),t.set(yt,yt,{domain:n});return t.remove(yt,{domain:n}),n},wt="kndctr",Ct=e=>e.replace("@","_"),Et=(e,t)=>`${wt}_${Ct(e)}_${t}`,kt=(e,t)=>{const n={};return e.forEach((e=>{const a=t(e);n[a]||(n[a]=[]),n[a].push(e)})),n};const xt="Chrome",Pt="Edge",St="EdgeChromium",It="Firefox",jt="IE",Tt="Safari",Ot="Unknown";var Dt=e=>{let t,n=!1;return()=>(n||(n=!0,t=e()),t)};const Nt=[xt,Pt,St,jt,Ot];var Rt=({getBrowser:e})=>Dt((()=>Nt.includes(e())));const Lt="identity",At="consent",Vt="cluster";var Mt=({orgId:e})=>{const t=Et(e,Lt);return()=>Boolean(fe.get(t))};const qt=(e,t)=>{const n=Object.keys(e);for(let a=0;a<n.length;a+=1){const o=n[a];if(e[o].test(t))return o}return Ot};var $t=({userAgent:e})=>Dt((()=>qt({[Pt]:/Edge\/([0-9\._]+)/,[St]:/Edg\/([0-9\.]+)/,[xt]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,[It]:/Firefox\/([0-9\.]+)(?:\s|$)/,[jt]:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,[Tt]:/Version\/([0-9\._]+).*Safari/},e)));const Ut=(e,t,n)=>({getItem(a){try{return e[t].getItem(n+a)}catch{return null}},setItem(a,o){try{return e[t].setItem(n+a,o),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach((a=>{a.startsWith(n)&&e[t].removeItem(a)})),!0}catch{return!1}}});var Ft=e=>t=>{const n=bt+t;return{session:Ut(e,"sessionStorage",n),persistent:Ut(e,"localStorage",n)}},Bt=(e,t)=>e.filter((e=>t.includes(e))),Ht=e=>"boolean"==typeof e,zt=e=>"number"==typeof e&&!Number.isNaN(e),Wt=e=>{const t=parseInt(e,10);return zt(t)&&e===t},Jt=(e,t)=>0===t.indexOf(`${wt}_${Ct(e)}_`),Gt=e=>"string"==typeof e,Qt=e=>Gt(e)&&e.length>0,Xt=()=>{};const Kt=e=>{const t={},n=e.split(".");switch(n.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=n[1];break;case 3:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=n[2];break;case 4:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=`${n[2]}.${n[3]}`}return t},Yt=e=>{try{const t=new URL(e);let n=t.pathname;return e.endsWith("/")||"/"!==n||(n=""),{host:t.hostname,path:n,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{}}},Zt=(e,t=Kt)=>{Gt(e)||(e="");const n=Yt(e)||{},{host:a="",path:o="",query:r="",anchor:i=""}=n;return{path:o,query:r,fragment:i,...t(a)}};var en=e=>{if(ue(e)||"object"!=typeof e)return null;const t=vt(e,(e=>!(ue(e)||!Ht(e)&&!zt(e)&&!Qt(e)&&!qe(e))));return ft(t)?null:t},tn=e=>e instanceof Error?e:new Error(e),nn=({error:e,message:t})=>{try{e.message=t}catch{}},an=({error:e,message:t})=>{const n=tn(e),a=`${t}\nCaused by: ${n.message}`;return nn({error:n,message:a}),n},on=e=>Gt(e)&&"true"===e.toLowerCase(),rn=(e,t)=>{if(zt(e)||Gt(e)){const t=Math.round(Number(e));if(!Number.isNaN(t))return t}return t};const sn=(e,t,n)=>`${e}`.padStart(t,n);var cn=e=>{const t=e.getFullYear(),n=sn(e.getMonth()+1,2,"0"),a=sn(e.getDate(),2,"0"),o=sn(e.getHours(),2,"0"),r=sn(e.getMinutes(),2,"0"),i=sn(e.getSeconds(),2,"0"),s=sn(e.getMilliseconds(),3,"0"),c=rn(e.getTimezoneOffset(),0);return`${t}-${n}-${a}T${o}:${r}:${i}.${s}${c>0?"-":"+"}${sn(Math.floor(Math.abs(c)/60),2,"0")}:${sn(Math.abs(c)%60,2,"0")}`};const ln=[];for(let e=0;e<256;++e)ln.push((e+256).toString(16).slice(1));let dn;const un=new Uint8Array(16);var pn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};const mn=e=>function(t,n){return null==t?t:e.call(this,t,n)},gn=(e,t)=>function(n,a){return t.call(this,e.call(this,n,a),a)},fn=(e,t)=>function(n,a){const o=[],r=[e,t].reduce(((e,t)=>{try{return t.call(this,e,a)}catch(t){return o.push(t),e}}),n);if(o.length)throw new Error(o.join("\n"));return r},vn=(e,t,n)=>Object.assign(gn(e,t),e,n),bn=(e,t,n)=>Object.assign(gn(e,mn(t)),e,n),hn=(e,t,n)=>Object.assign(fn(mn(t),e),e,n),yn=(e,t,n,a)=>{if(!e)throw new Error(`'${n}': Expected ${a}, but got ${JSON.stringify(t)}.`)};var _n=(e,t)=>(yn(Ht(e),e,t,"true or false"),e),wn=(e,t)=>(yn(Me(e),e,t,"a function"),e),Cn=(e,t)=>function(n,a){let o;const r=e.find((e=>{try{return o=e.call(this,n,a),!0}catch{return!1}}));return yn(r,n,a,t),o},En=e=>function(t,n){yn(Array.isArray(t),t,n,"an array");const a=[],o=t.map(((o,r)=>{try{return e.call(this,o,`${n}[${r}]`,t)}catch(e){return void a.push(e.message)}}));if(a.length)throw new Error(a.join("\n"));return o},kn=e=>t=>null==t?e:t,xn=(e="This field has been deprecated")=>function(t,n){let a=e;return void 0!==t&&(n&&(a=`'${n}': ${a}`),this&&this.logger&&this.logger.warn(a)),t},Pn=e=>(t,n)=>(yn(t===e,t,n,`${e}`),t),Sn=e=>function(t,n){yn(pe(t),t,n,"an object");const a=[],o={};if(Object.keys(t).forEach((r=>{const i=t[r],s=n?`${n}.${r}`:r;try{const t=e.call(this,i,s);void 0!==t&&(o[r]=t)}catch(e){a.push(e.message)}})),a.length)throw new Error(a.join("\n"));return o},In=(e,t)=>(n,a)=>(yn(n>=t,n,a,`${e} greater than or equal to ${t}`),n),jn=(e,t)=>(n,a)=>(yn(n<=t,n,a,`${e} less than or equal to ${t}`),n),Tn=e=>(t,n)=>{const a=[];if(Object.keys(t).forEach((t=>{if(!e[t]){const e=n?`${n}.${t}`:t;a.push(`'${e}': Unknown field.`)}})),a.length)throw new Error(a.join("\n"));return t},On=e=>(t,n)=>(pe(t)?yn(!ft(t),t,n,e):yn(t.length>0,t,n,e),t),Dn=e=>function(t,n){yn(pe(t),t,n,"an object");const a=[],o={};if(Object.keys(e).forEach((r=>{const i=t[r],s=e[r],c=n?`${n}.${r}`:r;try{const e=s.call(this,i,c);void 0!==e&&(o[r]=e)}catch(e){a.push(e.message)}})),Object.keys(t).forEach((e=>{Object.prototype.hasOwnProperty.call(o,e)||(o[e]=t[e])})),a.length)throw new Error(a.join("\n"));return o},Nn=(e,t,n)=>function(a,o){yn(pe(a),a,o,"an object");const{[e]:r,[n]:i,...s}=a,c=t(r,o);if(void 0!==c){let t=`The field '${e}' is deprecated. Use '${n}' instead.`;if(o&&(t=`'${o}': ${t}`),void 0!==i&&i!==c)throw new Error(t);this&&this.logger&&this.logger.warn(t)}return{[n]:i||c,...s}},Rn=()=>{const e=[];return(t,n)=>(yn(-1===e.indexOf(t),t,n,"a unique value across instances"),e.push(t),t)},Ln=e=>{const t=Object.create(null);for(let n=0;n<e.length;n+=1){const a=e[n];if(a in t)return!1;t[a]=!0}return!0},An=()=>(e,t)=>(yn(Ln(e),e,t,"array values to be unique"),e);const Vn=/^[a-z0-9.-]{1,}$/i;var Mn=(e,t)=>(yn(Vn.test(e),e,t,"a valid domain"),e),qn=(e,t)=>(yn(Wt(e),e,t,"an integer"),e),$n=(e,t)=>(yn(zt(e),e,t,"a number"),e),Un=e=>{try{return null!==RegExp(e)}catch{return!1}},Fn=(e,t)=>(yn(Un(e),e,t,"a regular expression"),e),Bn=(e,t)=>{if(null==e)throw new Error(`'${t}' is a required option`);return e},Hn=(e,t)=>(yn(Gt(e),e,t,"a string"),e),zn=e=>(t,n)=>(yn(e.test(t),t,n,`does not match the ${e.toString()}`),t);const Wn=e=>e;Wn.default=function(e){return vn(this,kn(e))},Wn.required=function(){return vn(this,Bn)},Wn.deprecated=function(e){return vn(this,xn(e))};const Jn=function(){return bn(this,Mn)},Gn=function(e){return bn(this,In("an integer",e))},Qn=function(e){return bn(this,In("a number",e))},Xn=function(e){return bn(this,jn("a number",e))},Kn=function(){return bn(this,qn,{minimum:Gn})},Yn=function(){return bn(this,On("a non-empty string"))},Zn=function(){return bn(this,On("a non-empty array"))},ea=function(){return bn(this,On("a non-empty object"))},ta=function(){return bn(this,Fn)},na=function(e){return bn(this,zn(e))},aa=function(){return bn(this,Rn())},oa=function(){return bn(this,An())},ra=function(e,t){return vn(this,Cn(e,t))},ia=function(){return this},sa=function(e){return bn(this,En(e),{nonEmpty:Zn,uniqueItems:oa})},ca=function(){return bn(this,_n)},la=function(){return bn(this,wn)},da=function(e){return bn(this,Pn(e))},ua=function(){return bn(this,$n,{minimum:Qn,maximum:Xn,integer:Kn,unique:aa})},pa=function(e){return bn(this,Sn(e),{nonEmpty:ea})},ma=e=>({noUnknownFields:function(){return bn(this,Tn(e))},nonEmpty:ea,concat:function(t){const n={...e,...t.schema};return bn(this,t,ma(n))},renamed:function(e,t,n){return hn(this,Nn(e,t,n))},schema:e}),ga=function(e){return bn(this,Dn(e),ma(e))},fa=function(){return bn(this,Hn,{regexp:ta,domain:Jn,nonEmpty:Yn,unique:aa,matches:na})},va=ra.bind(Wn),ba=ia.bind(Wn),ha=sa.bind(Wn),ya=ca.bind(Wn),_a=la.bind(Wn),wa=da.bind(Wn),Ca=ua.bind(Wn),Ea=pa.bind(Wn),ka=ga.bind(Wn),xa=fa.bind(Wn),Pa=function(...e){return va(e.map(wa),`one of these values: ${JSON.stringify(e)}`)};var Sa=Ea(ha(ka({authenticatedState:Pa("ambiguous","authenticated","loggedOut"),id:xa(),namespace:ka({code:xa()}).noUnknownFields(),primary:ya(),xid:xa()}).noUnknownFields()).required()),Ia=ka({}),ja="alloy_debug",Ta=({console:e,locationSearch:t,createLogger:n,instanceName:a,createNamespacedStorage:o,getMonitors:r})=>{const i=de.default.parse(t),s=o(`instance.${a}.`),c=s.session.getItem("debug");let l="true"===c,d=null===c;const u=()=>l,p=(e,{fromConfig:t})=>{t&&!d||(l=e),t||(s.session.setItem("debug",e.toString()),d=!1)};return void 0!==i[ja]&&p(on(i[ja]),{fromConfig:!1}),{setDebugEnabled:p,logger:n({getDebugEnabled:u,context:{instanceName:a},getMonitors:r,console:e}),createComponentLogger:t=>n({getDebugEnabled:u,context:{instanceName:a,componentName:t},getMonitors:r,console:e})}};const Oa=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],Da=(e,t)=>(...n)=>Promise.all(e.getLifecycleCallbacks(t).map((e=>new Promise((t=>{t(e(...n))}))))),Na=e=>(...t)=>Promise.resolve().then((()=>e(...t)));var Ra=e=>Oa.reduce(((t,n)=>(t[n]=Na(Da(e,n)),t)),{});const La=(e,t)=>(...n)=>{let a;try{a=e(...n)}catch(e){throw an({error:e,message:t})}return a instanceof Promise&&(a=a.catch((e=>{throw an({error:e,message:t})}))),a};var Aa=()=>{const e={},t={},n={},a=(e,n={})=>{const a=Bt(Object.keys(t),Object.keys(n));if(a.length)throw new Error(`[ComponentRegistry] Could not register ${e} because it has existing command(s): ${a.join(",")}`);Object.keys(n).forEach((a=>{const o=n[a];o.commandName=a,o.run=La(o.run,`[${e}] An error occurred while executing the ${a} command.`),t[a]=o}))},o=(e,t={})=>{Object.keys(t).forEach((a=>{n[a]=n[a]||[],n[a].push(La(t[a],`[${e}] An error occurred while executing the ${a} lifecycle hook.`))}))};return{register(t,n){const{commands:r,lifecycle:i}=n;a(t,r),o(t,i),e[t]=n},getCommand:e=>t[e],getCommandNames:()=>Object.keys(t),getLifecycleCallbacks:e=>n[e]||[],getComponentNames:()=>Object.keys(e)}},Va=({logger:e,sendFetchRequest:t,sendBeaconRequest:n,isRequestRetryable:a,getRequestRetryDelay:o})=>({requestId:r,url:i,payload:s,useSendBeacon:c})=>{const l=JSON.stringify(s),d=JSON.parse(l);e.logOnBeforeNetworkRequest({url:i,requestId:r,payload:d});const u=(s=0)=>(c?n:t)(i,l).then((t=>{if(a({response:t,retriesAttempted:s})){const e=o({response:t,retriesAttempted:s});return new Promise((t=>{setTimeout((()=>{t(u(s+1))}),e)}))}let n;try{n=JSON.parse(t.body)}catch{}return e.logOnNetworkResponse({requestId:r,url:i,payload:d,...t,parsedBody:n,retriesAttempted:s}),{statusCode:t.statusCode,body:t.body,parsedBody:n,getHeader:t.getHeader}}));return u().catch((t=>{throw e.logOnNetworkError({requestId:r,url:i,payload:d,error:t}),an({error:t,message:"Network request failed."})}))},Ma=({logger:e})=>t=>{if(t){const n=t.split(";");if(n.length>=2&&n[1].length>0)try{const e=parseInt(n[1],10);if(!Number.isNaN(e))return{regionId:e}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}};const qa="in",$a="out",Ua="pending",Fa="general",Ba="declinedConsent",Ha="default",za="initial",Wa="new",Ja=e=>{const t=new Error(e);return t.code=Ba,t.message=e,t};var Ga=({logger:e})=>{const t=[],n=()=>{for(;t.length;)t.shift().resolve()},a=()=>{for(;t.length;)t.shift().reject(Ja("The user declined consent."))},o=()=>Promise.resolve(),r=()=>Promise.resolve(),i=()=>Promise.resolve(),s=()=>Promise.reject(Ja("No consent preferences have been set.")),c=()=>Promise.reject(Ja("The user declined consent.")),l=e=>{if(e)return Promise.reject(new Error("Consent is pending."));const n=Ee();return t.push(n),n.promise};return{in(t){t===Ha?this.awaitConsent=r:(t===za?e.info("Loaded user consent preferences. The user previously consented."):t===Wa&&this.awaitConsent!==i&&e.info("User consented."),n(),this.awaitConsent=i)},out(t){t===Ha?(e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=s):(t===za?e.warn("Loaded user consent preferences. The user previously declined consent."):t===Wa&&this.awaitConsent!==c&&e.warn("User declined consent."),a(),this.awaitConsent=c)},pending(t){t===Ha&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=l},awaitConsent:o,withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case r:return{state:"in",wasSet:!1};case i:return{state:"in",wasSet:!0};case s:return{state:"out",wasSet:!1};case c:return{state:"out",wasSet:!0};case l:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}},Qa=({generalConsentState:e,logger:t})=>{const n=(n,a)=>{switch(n[Fa]){case qa:e.in(a);break;case $a:e.out(a);break;case Ua:e.pending(a);break;default:t.warn(`Unknown consent value: ${n[Fa]}`)}};return{initializeConsent(e,t){t[Fa]?n(t,za):n(e,Ha)},setConsent(e){n(e,Wa)},suspend(){e.pending()},awaitConsent:()=>e.awaitConsent(),withConsent:()=>e.withConsent(),current:()=>e.current()}};const Xa=e=>e&&e._experience&&e._experience.decisioning&&qe(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[];var Ka=()=>{const e={};let t,n,a=!1,o=!1,r=!0;const i=e=>{if(o)throw new Error(`${e} cannot be called after event is finalized.`)},s={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){const a=JSON.parse(JSON.stringify(e));return t&&be(a,{xdm:t}),n&&be(a,{data:n}),a},setUserXdm(e){i("setUserXdm"),t=e},setUserData(e){i("setUserData"),n=e},mergeXdm(t){i("mergeXdm"),t&&be(e,{xdm:t})},mergeData(t){i("mergeData"),t&&be(e,{data:t})},mergeMeta(t){i("mergeMeta"),t&&be(e,{meta:t})},mergeQuery(t){i("mergeQuery"),t&&be(e,{query:t})},documentMayUnload(){a=!0},finalize(a){if(o)return;const i=Pe([...Xa(t),...Xa(e.xdm)],((e,t)=>e===t||e.id&&t.id&&e.id===t.id&&e.scope&&t.scope&&e.scope===t.scope));if(t&&this.mergeXdm(t),i.length>0&&(e.xdm._experience.decisioning.propositions=i),n&&s.mergeData(n),o=!0,a){r=!1;const t={xdm:e.xdm||{},data:e.data||{}},n=a(t);r=!1!==n,e.xdm=t.xdm||{},e.data=t.data||{},ft(e.xdm)&&delete e.xdm,ft(e.data)&&delete e.data}},getDocumentMayUnload:()=>a,isEmpty:()=>ft(e)&&(!t||ft(t))&&(!n||ft(n)),shouldSend:()=>r,getViewName(){if(t&&t.web&&t.web.webPageDetails)return t.web.webPageDetails.viewName},toJSON(){if(!o)throw new Error("toJSON called before finalize");return e}};return s};const Ya="Retry-After",Za="x-adobe-edge";var eo=({extractEdgeInfo:e})=>({content:t={},getHeader:n})=>{const{handle:a=[],errors:o=[],warnings:r=[]}=t;return{getPayloadsByType:e=>a.filter((t=>t.type===e)).flatMap((e=>e.payload)),getErrors:()=>o,getWarnings:()=>r,getEdge:()=>e(n(Za)),toJSON:()=>t}};const to="configure",no="setDebug";var ao=({logger:e,configureCommand:t,setDebugCommand:n,handleError:a,validateCommandOptions:o})=>{let r;const i=(a,i)=>{let s;if(a===to){if(r)throw new Error("The library has already been configured and may only be configured once.");s=()=>(r=t(i),r.then((()=>{})))}else{if(!r)throw new Error("The library must be configured first. Please do so by executing the configure command.");s=a===no?()=>{const e=ka({enabled:ya().required()}).noUnknownFields(),t=o({command:{commandName:no,optionsValidator:e},options:i});n(t)}:()=>r.then((e=>{const t=e.getCommand(a);if(!t||!Me(t.run)){const t=[to,no].concat(e.getCommandNames()).join(", ");throw new Error(`The ${a} command does not exist. List of available commands: ${t}.`)}const n=o({command:t,options:i});return t.run(n)}),(()=>(e.warn(`An error during configuration is preventing the ${a} command from executing.`),new Promise((()=>{})))))}return s};return(t,n={})=>new Promise((a=>{const o=i(t,n);e.logOnBeforeCommand({commandName:t,options:n}),a(o())})).catch((e=>a(e,`${t} command`))).catch((a=>{throw e.logOnCommandRejected({commandName:t,options:n,error:a}),a})).then((a=>{const o=pe(a)?a:{};return e.logOnCommandResolved({commandName:t,options:n,result:o}),o}))};const oo="https://adobe.ly/3sHgQHb";var ro=({command:e,options:t})=>{const{commandName:n,documentationUri:a=oo,optionsValidator:o}=e;let r=t;if(o)try{r=o(t)}catch(e){throw new Error(`Invalid ${n} command options:\n\t - ${e} For command documentation see: ${a}`)}return r};const io="https://adobe.ly/3sHh553",so=({combinedConfigValidator:e,options:t,logger:n})=>{try{return e.noUnknownFields().required().call({logger:n},t)}catch(e){throw new Error(`Resolve these configuration problems:\n\t - ${e.message.split("\n").join("\n\t - ")}\nFor configuration documentation see: ${io}`)}},co=(e,t,n)=>n.reduce(((n,{buildOnInstanceConfiguredExtraParams:a})=>(a&&(n={...n,...a({config:e,logger:t})}),n)),{}),lo=e=>{const t=[],n={get enabled(){return e.enabled},flush(){t.forEach((({method:t,args:n})=>e[t](...n)))}};return Object.keys(e).filter((t=>"function"==typeof e[t])).forEach((e=>{n[e]=(...n)=>{t.push({method:e,args:n})}})),n};var uo=({options:e,componentCreators:t,coreConfigValidators:n,createConfig:a,logger:o,setDebugEnabled:r})=>{const i=lo(o),s=t.map((({configValidators:e})=>e)).filter((e=>e)).reduce(((e,t)=>e.concat(t)),n),c=a(so({combinedConfigValidator:s,options:e,logger:i}));r(c.debugEnabled,{fromConfig:!0}),i.flush();const l=co(c,o,t);return o.logOnInstanceConfigured({...l,config:c}),c},po=({componentCreators:e,lifecycle:t,componentRegistry:n,getImmediatelyAvailableTools:a})=>(e.forEach((e=>{const{namespace:t}=e,o=a(t);let r;try{r=e(o)}catch(e){throw an({error:e,message:`[${t}] An error occurred during component creation.`})}n.register(t,r)})),t.onComponentsRegistered({lifecycle:t}).then((()=>n)));const mo=e=>({...e}),go="edge.adobedc.net",fo="adobedc.demdex.net";var vo="ee",bo=()=>ka({debugEnabled:ya().default(!1),datastreamId:xa().unique().required(),edgeDomain:xa().domain().default(go),edgeBasePath:xa().nonEmpty().default(vo),orgId:xa().unique().required(),onBeforeEventSend:_a().default(Xt),edgeConfigOverrides:Ia}).renamed("edgeConfigId",xa().unique(),"datastreamId"),ho=({errorPrefix:e,logger:t})=>(n,a)=>{const o=tn(n);if(o.code===Ba)return t.warn(`The ${a} could not fully complete. ${o.message}`),{};throw nn({error:o,message:`${e} ${o.message}`}),o},yo=({fetch:e})=>(t,n)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:n}).then((e=>e.text().then((t=>({statusCode:e.status,getHeader:t=>e.headers.get(t),body:t}))))),_o=({sendBeacon:e,sendFetchRequest:t,logger:n})=>(a,o)=>{const r=new Blob([o],{type:"text/plain; charset=UTF-8"});return e(a,r)?Promise.resolve({statusCode:204,getHeader:()=>null,body:""}):(n.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(a,o))},wo=({getDebugEnabled:e,console:t,getMonitors:n,context:a})=>{let o=`[${a.instanceName}]`;a.componentName&&(o+=` [${a.componentName}]`);const r=(e,t)=>{const o=n();if(o.length>0){const n={...a,...t};o.forEach((t=>{t[e]&&t[e](n)}))}},i=(n,...a)=>{r("onBeforeLog",{level:n,arguments:a}),e()&&t[n](o,...a)};return{get enabled(){return n().length>0||e()},logOnInstanceCreated(e){r("onInstanceCreated",e),i("info","Instance initialized.")},logOnInstanceConfigured(e){r("onInstanceConfigured",e),i("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand(e){r("onBeforeCommand",e),i("info",`Executing ${e.commandName} command. Options:`,e.options)},logOnCommandResolved(e){r("onCommandResolved",e),i("info",`${e.commandName} command resolved. Result:`,e.result)},logOnCommandRejected(e){r("onCommandRejected",e),i("error",`${e.commandName} command was rejected. Error:`,e.error)},logOnBeforeNetworkRequest(e){r("onBeforeNetworkRequest",e),i("info",`Request ${e.requestId}: Sending request.`,e.payload)},logOnNetworkResponse(e){r("onNetworkResponse",e);const t=e.parsedBody||e.body?"response body:":"no response body.";i("info",`Request ${e.requestId}: Received response with status code ${e.statusCode} and ${t}`,e.parsedBody||e.body)},logOnNetworkError(e){r("onNetworkError",e),i("error",`Request ${e.requestId}: Network request failed.`,e.error)},logOnContentHiding(e){r("onContentHiding",{status:e.status}),i(e.logLevel,e.message)},logOnContentRendering(e){r("onContentRendering",{status:e.status,payload:e.detail}),i(e.logLevel,e.message)},info:i.bind(null,"info"),warn:i.bind(null,"warn"),error:i.bind(null,"error")}},Co="__view__",Eo=e=>(t,n)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(n)},ko=e=>{const{payload:t,getAction:n,getUseSendBeacon:a,datastreamIdOverride:o,edgeSubPath:r}=e,i=c();let s=!1,l=!1;return{getId:()=>i,getPayload:()=>t,getAction:()=>n({isIdentityEstablished:l}),getDatastreamIdOverride:()=>o,getUseSendBeacon:()=>a({isIdentityEstablished:l}),getEdgeSubPath:()=>r||"",getUseIdThirdPartyDomain:()=>s,setUseIdThirdPartyDomain(){s=!0},setIsIdentityEstablished(){l=!0}}},xo=({payload:e,datastreamIdOverride:t})=>{const n=({isIdentityEstablished:t})=>e.getDocumentMayUnload()&&t;return ko({payload:e,getAction:({isIdentityEstablished:e})=>n({isIdentityEstablished:e})?"collect":"interact",getUseSendBeacon:n,datastreamIdOverride:t})},Po=e=>{const{content:t,addIdentity:n,hasIdentity:a}=e,o=he(t,"meta.configOverrides");return{mergeMeta:he(t,"meta"),mergeState:he(t,"meta.state"),mergeQuery:he(t,"query"),mergeConfigOverride:e=>o(en(e)),addIdentity:n,hasIdentity:a,toJSON:()=>t}},So=e=>t=>void 0!==(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t]),Io=()=>{const e={},t=Po({content:e,addIdentity:Eo(e),hasIdentity:So(e)});return t.addEvent=t=>{e.events=e.events||[],e.events.push(t)},t.getDocumentMayUnload=()=>(e.events||[]).some((e=>e.getDocumentMayUnload())),t},jo=({localConfigOverrides:e,globalConfigOverrides:t,payload:n})=>{const a={payload:n},{datastreamId:o,...r}=e||{};return o&&(a.datastreamIdOverride=o),t&&!ft(t)&&n.mergeConfigOverride(t),r&&!ft(r)&&n.mergeConfigOverride(r),a};const To="adb_validation_sessionid",Oo="validation.",Do="clientId",No=e=>{let t=e.persistent.getItem(Do);return t||(t=c(),e.persistent.setItem(Do,t)),t};var Ro=({window:e,createNamespacedStorage:t})=>{const n=t(Oo);return()=>{const t=de.default.parse(e.location.search)[To];if(!t)return"";const a=`${t}|${No(n)}`;return`&${de.default.stringify({adobeAepValidationToken:a})}`}};const Lo="Event was canceled because the onBeforeEventSend callback returned false.";var Ao=({config:e,logger:t,lifecycle:n,consent:a,createEvent:o,createDataCollectionRequestPayload:r,createDataCollectionRequest:i,sendEdgeNetworkRequest:s,applyResponse:c})=>{const{onBeforeEventSend:l,edgeConfigOverrides:d}=e;return{createEvent:o,sendEvent(e,o={}){const{edgeConfigOverrides:c,...u}=o,p=jo({payload:r(),localConfigOverrides:c,globalConfigOverrides:d}),m=i(p),g=ye(),f=ye();return n.onBeforeEvent({...u,event:e,onResponse:g.add,onRequestFailure:f.add}).then((()=>(p.payload.addEvent(e),a.awaitConsent()))).then((()=>{try{e.finalize(l)}catch(e){const t=()=>{throw e};return f.add(n.onRequestFailure),f.call({error:e}).then(t,t)}if(!e.shouldSend()){f.add(n.onRequestFailure),t.info(Lo);const e=new Error(Lo);return f.call({error:e}).then((()=>{}))}return s({request:m,runOnResponseCallbacks:g.call,runOnRequestFailureCallbacks:f.call})}))},applyResponse(e,t={}){const{renderDecisions:a=!1,decisionContext:o={},responseHeaders:s={},responseBody:l={handle:[]},personalization:d}=t,u=r(),p=i({payload:u}),m=ye();return n.onBeforeEvent({event:e,renderDecisions:a,decisionContext:o,decisionScopes:[Co],personalization:d,onResponse:m.add,onRequestFailure:Xt}).then((()=>(u.addEvent(e),c({request:p,responseHeaders:s,responseBody:l,runOnResponseCallbacks:m.call}))))}}};const Vo="state:store";var Mo=({cookieJar:e,shouldTransferCookie:t,apexDomain:n,dateProvider:a})=>({cookiesToPayload(a,o){const r=""!==n&&o.endsWith(n),i={domain:n,cookiesEnabled:!0};if(!r){const n=e.get(),a=Object.keys(n).filter(t).map((e=>({key:e,value:n[e]})));a.length&&(i.entries=a)}a.mergeState(i)},responseToCookies(t){t.getPayloadsByType(Vo).forEach((t=>{const o={domain:n},r=t.attrs&&t.attrs.SameSite&&t.attrs.SameSite.toLowerCase();void 0!==t.maxAge&&(o.expires=new Date(a().getTime()+1e3*t.maxAge)),void 0!==r&&(o.sameSite=r),"none"===r&&(o.secure=!0),e.set(t.key,t.value,o)}))}});const qo="mboxEdgeCluster",$o="at_qa_mode",Uo="mbox";var Fo=({orgId:e,targetMigrationEnabled:t})=>n=>Jt(e,n)||n===$o||t&&n===Uo,Bo="v1";const Ho="TypeError",zo="NetworkError",Wo=e=>e.name===Ho||e.name===zo||0===e.status;var Jo=e=>{const t=e.shift()||[],n=e.shift()||[];return me({},...t,...n,...e)},Go=e=>t=>{const n=()=>{throw t};return e.call({error:t}).then(n,n)};const Qo=(e,t)=>t.getUseIdThirdPartyDomain()&&Wo(e);var Xo=({config:e,lifecycle:t,cookieTransfer:n,sendNetworkRequest:a,createResponse:o,processWarningsAndErrors:r,getLocationHint:i,getAssuranceValidationTokenParams:s})=>{const{edgeDomain:c,edgeBasePath:l,datastreamId:d}=e;let u=!1;const p=(e,t)=>{const n=i(),a=n?`${l}/${n}${t.getEdgeSubPath()}`:`${l}${t.getEdgeSubPath()}`,o=t.getDatastreamIdOverride()||d;return o!==d&&t.getPayload().mergeMeta({sdkConfig:{datastream:{original:d}}}),`https://${e}/${a}/${Bo}/${t.getAction()}?configId=${o}&requestId=${t.getId()}${s()}`};return({request:e,runOnResponseCallbacks:i=Xt,runOnRequestFailureCallbacks:s=Xt})=>{const l=ye();l.add(t.onResponse),l.add(i);const d=ye();return d.add(t.onRequestFailure),d.add(s),t.onBeforeRequest({request:e,onResponse:l.add,onRequestFailure:d.add}).then((()=>{const t=u||!e.getUseIdThirdPartyDomain()?c:fo,o=p(t,e),r=e.getPayload();return n.cookiesToPayload(r,t),a({requestId:e.getId(),url:o,payload:r,useSendBeacon:e.getUseSendBeacon()})})).then((e=>(r(e),e))).catch((t=>{if(Qo(t,e)){u=!0,e.setUseIdThirdPartyDomain(!1);const t=p(c,e),o=e.getPayload();return n.cookiesToPayload(o,c),a({requestId:e.getId(),url:t,payload:o,useSendBeacon:e.getUseSendBeacon()})}return Go(d)(t)})).then((({parsedBody:e,getHeader:t})=>{const a=o({content:e,getHeader:t});return n.responseToCookies(a),l.call({response:a}).then(Jo)}))}};const Ko=204,Yo="The server responded with a";var Zo=({logger:e})=>t=>{const{statusCode:n,body:a,parsedBody:o}=t;if(n<200||n>=300||!o&&n!==Ko||o&&!Array.isArray(o.handle)){const e=o?JSON.stringify(o,null,2):a;throw new Error(`${Yo} status code ${n} and ${e?`response body:\n${e}`:"no response body."}`)}if(o){const{warnings:t=[],errors:n=[]}=o;t.forEach((t=>{e.warn(`${Yo} warning:`,t)})),n.forEach((t=>{e.error(`${Yo} non-fatal error:`,t)}))}},er=({orgId:e,cookieJar:t})=>{const n=Et(e,Vt),a=()=>t.get(n),o=()=>{const e=t.get(qo);if(e)return`t${e}`};return()=>a()||o()};const tr=3,nr=[429,503,502,504];var ar=({response:e,retriesAttempted:t})=>t<tr&&nr.includes(e.statusCode);const or=1e3,rr=1e3,ir=.3,sr=e=>{const t=or+e*rr,n=t*ir,a=t-n,o=t+n;return Math.round(a+Math.random()*(o-a))},cr=e=>{const t=e.getHeader(Ya);let n;if(t){const e=parseInt(t,10);n=Wt(e)?1e3*e:Math.max(0,new Date(t).getTime()-(new Date).getTime())}return n};var lr=({response:e,retriesAttempted:t})=>{let n=cr(e);return void 0===n&&(n=sr(t)),n};const dr=200;var ur=({cookieTransfer:e,lifecycle:t,createResponse:n,processWarningsAndErrors:a})=>({request:o,responseHeaders:r,responseBody:i,runOnResponseCallbacks:s=Xt,runOnRequestFailureCallbacks:c=Xt})=>{const l=ye();l.add(t.onResponse),l.add(s);const d=ye();d.add(t.onRequestFailure),d.add(c)
;const u=e=>r[e];return t.onBeforeRequest({request:o,onResponse:l.add,onRequestFailure:d.add}).then((()=>a({statusCode:dr,getHeader:u,body:JSON.stringify(i),parsedBody:i}))).catch(Go(d)).then((()=>{const t=n({content:i,getHeader:u});return e.responseToCookies(t),l.call({response:t}).then(Jo)}))},pr=e=>t=>{const n={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};be(t,{web:n})};const mr=e=>{const{screen:{orientation:t}}=e;if(null==t||null==t.type)return null;const n=t.type.split("-");return 0===n.length||"portrait"!==n[0]&&"landscape"!==n[0]?null:n[0]},gr=e=>{if(Me(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null};var fr=e=>t=>{const{screen:{width:n,height:a}}=e,o={},r=rn(a);r>=0&&(o.screenHeight=r);const i=rn(n);i>=0&&(o.screenWidth=i);const s=mr(e)||gr(e);s&&(o.screenOrientation=s),Object.keys(o).length>0&&be(t,{device:o})},vr=e=>t=>{const{document:{documentElement:{clientWidth:n,clientHeight:a}={}}}=e,o={type:"browser"},r=rn(n);r>=0&&(o.browserDetails={viewportWidth:r});const i=rn(a);i>=0&&(o.browserDetails=o.browserDetails||{},o.browserDetails.viewportHeight=i),be(t,{environment:o})},br=e=>t=>{const n=e(),a={},o=rn(n.getTimezoneOffset());void 0!==o&&(a.localTimezoneOffset=o),(void 0===o||Math.abs(o)<6e3)&&(a.localTime=cn(n)),be(t,{placeContext:a})},hr=e=>t=>{const n=e().toISOString();be(t,{timestamp:n})},yr="https://ns.adobe.com/experience/alloy",_r="2.26.0",wr=e=>{be(e,{implementationDetails:{name:yr,version:_r,environment:"browser"}})},Cr=(e,t,n,a)=>{const o=e.context.flatMap(((e,a)=>n[e]?[n[e]]:(t.warn(`Invalid context[${a}]: '${e}' is not available.`),[]))).concat(a);return{namespace:"Context",lifecycle:{onBeforeEvent({event:e}){const n={};return Promise.all(o.map((e=>Promise.resolve(e(n,t))))).then((()=>e.mergeXdm(n)))}}}},Er=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]];const kr=e=>void 0!==e.userAgentData;var xr=e=>kr(e)?(t,n)=>{try{return e.userAgentData.getHighEntropyValues(Er.map((e=>e[0]))).then((e=>{const n={};Er.forEach((([t,a])=>{Object.prototype.hasOwnProperty.call(e,t)&&typeof e[t]===a&&(n[t]=e[t])})),be(t,{environment:{browserDetails:{userAgentClientHints:n}}})}))}catch(e){return n.warn(`Unable to collect user-agent client hints. ${e.message}`),Xt}}:Xt;const Pr=pr(window),Sr=fr(window),Ir=vr(window),jr=br((()=>new Date)),Tr=hr((()=>new Date)),Or={web:Pr,device:Sr,environment:Ir,placeContext:jr},Dr={highEntropyUserAgentHints:xr(navigator)},Nr={...Or,...Dr},Rr=[Tr,wr],Lr=({config:e,logger:t})=>Cr(e,t,Nr,Rr);Lr.namespace="Context",Lr.configValidators=ka({context:ha(xa()).default(Object.keys(Or))});var Ar=({options:e})=>ka({type:xa(),xdm:ka({eventType:xa(),identityMap:Sa}),data:ka({}),documentUnloading:ya(),renderDecisions:ya(),decisionScopes:ha(xa()).uniqueItems(),personalization:ka({decisionScopes:ha(xa()).uniqueItems(),surfaces:ha(xa()).uniqueItems(),sendDisplayEvent:ya().default(!0),includeRenderedPropositions:ya().default(!1),defaultPersonalizationEnabled:ya(),decisionContext:ka({})}).default({sendDisplayEvent:!0}),datasetId:xa(),mergeId:xa(),edgeConfigOverrides:Ia,initializePersonalization:ya()}).required().noUnknownFields()(e),Vr=({options:e})=>ka({renderDecisions:ya(),responseHeaders:Ea(xa().required()),responseBody:ka({handle:ha(ka({type:xa().required(),payload:ba().required()})).required()}).required(),personalization:ka({sendDisplayEvent:ya().default(!0),decisionContext:ka({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e);const Mr=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:e=>Ar({options:e}),run:n=>{const{xdm:a,data:o,documentUnloading:r,type:i,mergeId:s,datasetId:c,edgeConfigOverrides:l,...d}=n,u=e.createEvent();return r&&u.documentMayUnload(),u.setUserXdm(a),u.setUserData(o),i&&u.mergeXdm({eventType:i}),s&&u.mergeXdm({eventMergeId:s}),l&&(d.edgeConfigOverrides=l),c&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),d.edgeConfigOverrides=l||{},be(d.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:c}}}})),e.sendEvent(u,d)}},applyResponse:{documentationUri:"",optionsValidator:e=>Vr({options:e}),run:t=>{const{renderDecisions:n=!1,decisionContext:a={},responseHeaders:o={},responseBody:r={handle:[]},personalization:i}=t,s=e.createEvent();return e.applyResponse(s,{renderDecisions:n,decisionContext:a,responseHeaders:o,responseBody:r,personalization:i})}}}});Mr.namespace="DataCollector";const qr=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`;var $r=({fireReferrerHideableImage:e,logger:t})=>n=>{const a=n.filter((e=>"url"===e.type));return a.length?Promise.all(a.map((n=>e(n.spec).then((()=>{t.info(qr(n,!0))})).catch((()=>{t.error(qr(n,!1))}))))).then(Xt):Promise.resolve()};const Ur=ka({thirdPartyCookiesEnabled:ya().default(!0),idMigrationEnabled:ya().default(!0)});var Fr=ka({url:xa().required().nonEmpty(),edgeConfigOverrides:Ia}).required().noUnknownFields(),Br="ECID",Hr=({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:n,setLegacyEcid:a,handleResponseForIdSyncs:o,getNamespacesFromResponse:r,getIdentity:i,consent:s,appendIdentityToUrl:c,logger:l,getIdentityOptionsValidator:d,decodeKndctrCookie:u})=>{let p,m={};return{lifecycle:{onBeforeRequest:({request:a,onResponse:o,onRequestFailure:r})=>(e(a.getPayload()),t(a.getPayload()),n({request:a,onResponse:o,onRequestFailure:r})),onResponse({response:e}){const t=r(e);return p&&p[Br]||!t||!t[Br]||a(t[Br]),t&&Object.keys(t).length>0&&(p={...p,...t}),m={...m,...e.getEdge()},o(e)}},commands:{getIdentity:{optionsValidator:d,run:e=>{const{namespaces:t}=e;return s.awaitConsent().then((()=>{if(p)return;const n=u();return n&&t.includes(Br)&&(p||(p={}),p[Br]=n,1===t.length)?void 0:i(e)})).then((()=>({identity:t.reduce(((e,t)=>(e[t]=p[t]||null,e)),{}),edge:m})))}},appendIdentityToUrl:{optionsValidator:Fr,run:e=>s.withConsent().then((()=>{if(p)return;const t=u();return t?(p||(p={}),void(p[Br]=t)):i(e)})).then((()=>({url:c(p[Br],e.url)}))).catch((t=>(l.warn(`Unable to append identity to url. ${t.message}`),e)))}}}},zr=({config:e,getEcidFromVisitor:t,apexDomain:n,isPageSsl:a,cookieJar:o})=>{const{idMigrationEnabled:r,orgId:i}=e,s=`AMCV_${i}`,c=()=>{let e=null;const t="s_ecid",n=o.get(t)||o.get(s);if(n){const t=/(^|\|)MCMID\|(\d+)($|\|)/,a=n.match(t);a&&(e=a[2])}return e};return{getEcid(){if(r){const e=c();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid(e){if(r&&c()!==e){const t=a?{sameSite:"none",secure:!0}:{};o.set(s,`MCMID|${e}`,{domain:n,expires:390,...t})}}}},Wr=({logger:e})=>new Promise(((t,n)=>{if(pe(window.adobe)&&pe(window.adobe.optIn)){const a=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),a.fetchPermissions((()=>{a.isApproved([a.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):n(new Error("Legacy opt-in was declined."))}),!0)}else t()})),Jr=e=>{const t=e.Visitor;return Me(t)&&Me(t.getInstance)&&t},Gr=({logger:e,orgId:t,awaitVisitorOptIn:n})=>()=>{const a=Jr(window);return a?n({logger:e}).then((()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise((n=>{a.getInstance(t,{}).getMarketingCloudVisitorID((t=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),n(t)}),!0)}))))).catch((t=>{t?e.info(`${t.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")})):Promise.resolve()},Qr=({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange")),Xr=({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:n,awaitIdentityCookie:a,logger:o})=>{let r;const i=e=>(t(e),n(e.getPayload()));return({request:t,onResponse:n,onRequestFailure:s})=>{if(e())return t.setIsIdentityEstablished(),Promise.resolve();if(r){o.info("Delaying request while retrieving ECID from server.");const e=r;return r=e.catch((()=>a({onResponse:n,onRequestFailure:s}))),e.then((()=>{o.info("Resuming previously delayed request."),t.setIsIdentityEstablished()})).catch((()=>i(t)))}return r=a({onResponse:n,onRequestFailure:s}),r.catch((()=>{})),i(t)}},Kr="CORE",Yr=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{const n={identity:{fetch:[Br]}};return e&&t()&&n.identity.fetch.push(Kr),e=>{e.mergeQuery(n)}},Zr=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>n=>{e&&t()&&n.setUseIdThirdPartyDomain()},ei=({getLegacyEcid:e,addEcidToPayload:t})=>n=>n.hasIdentity(Br)?Promise.resolve():e().then((e=>{e&&t(n,e)})),ti="adobe_mc",ni=e=>{try{return decodeURIComponent(e)}catch{return""}};const ai=300;var oi=({locationSearch:e,dateProvider:t,orgId:n,logger:a})=>o=>{if(o.hasIdentity(Br))return;let r=de.default.parse(e)[ti];if(void 0===r)return;Array.isArray(r)&&(a.warn("Found multiple adobe_mc query string paramters, only using the last one."),r=r[r.length-1]);const i=r.split("|").reduce(((e,t)=>{const[n,a]=t.split("=");return e[n]=ni(a),e[n]=e[n].replace(/[^a-zA-Z0-9@.]/g,""),e}),{}),s=parseInt(i.TS,10),c=i.MCMID,l=ni(i.MCORGID);t().getTime()/1e3<=s+ai&&l===n&&c?(a.info(`Found valid ECID identity ${c} from the adobe_mc query string parameter.`),o.addIdentity(Br,{id:c})):a.info("Detected invalid or expired adobe_mc query string parameter.")},ri=(e,t)=>{e.addIdentity(Br,{id:t})},ii=({doesIdentityCookieExist:e,orgId:t,logger:n})=>({onResponse:a,onRequestFailure:o})=>new Promise(((r,i)=>{a((()=>{e()?r():(n.warn(`Identity cookie not found. This could be caused by any of the following issues:\n\t* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.\n\t* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.\n\t* The request was canceled by the browser and not fully processed.`),i(new Error("Identity cookie not found.")))})),o((()=>{e()?r():i(new Error("Identity cookie not found."))}))})),si=e=>e.getPayloadsByType("identity:result").reduce(((e,t)=>(t.namespace&&t.namespace.code&&(e[t.namespace.code]=t.id),e)),{}),ci=({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:n,globalConfigOverrides:a})=>({namespaces:o,edgeConfigOverrides:r}={})=>{const i=jo({payload:t(o),globalConfigOverrides:a,localConfigOverrides:r}),s=n(i);return e({request:s})},li=({payload:e,datastreamIdOverride:t})=>ko({payload:e,datastreamIdOverride:t,getAction:()=>"identity/acquire",getUseSendBeacon:()=>!1}),di=e=>{const t={query:{identity:{fetch:e}}};return Po({content:t,addIdentity:Eo(t),hasIdentity:So(t)})};const ui=/^([^?#]*)(\??[^#]*)(#?.*)$/,pi=e=>""===e?"?":"?"===e?"":"&";var mi=({dateProvider:e,orgId:t})=>(n,a)=>{const o=Math.round(e().getTime()/1e3),r=encodeURIComponent(`TS=${o}|MCMID=${n}|MCORGID=${encodeURIComponent(t)}`),[,i,s,c]=a.match(ui);return`${i}${s}${pi(s)}adobe_mc=${r}${c}`};const gi=ka({namespaces:ha(Pa(Br,Kr)).nonEmpty().uniqueItems().default([Br]),edgeConfigOverrides:Ia}).noUnknownFields().default({namespaces:[Br]});var fi=({thirdPartyCookiesEnabled:e})=>t=>{const n=gi(t);if(!e&&n.namespaces.includes(Kr))throw new Error(`namespaces: The ${Kr} namespace cannot be requested when third-party cookies are disabled.`);return n};const vi=1,bi=(e,t)=>{let n,a=0,o=0;do{if(t<0||t+o>=e.length)throw new Error("Invalid varint: buffer ended unexpectedly");if(n=e[t+o],a|=(127&n)<<7*o,o+=1,o>10)throw new Error("Invalid varint: too long")}while(128&n);return{value:a,length:o}},hi=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),yi=e=>{let t=0,n=null;for(;t<e.length&&!n;){const{value:a,length:o}=bi(e,t);t+=o;const r=7&a;if(a>>3===vi){if(r===hi.LEN){const a=bi(e,t);return t+=a.length,n=(new TextDecoder).decode(e.slice(t,t+a.value)),t+=a.value,n}}else switch(r){case hi.VARINT:t+=bi(e,t).length;break;case hi.I64:t+=8;break;case hi.LEN:{const n=bi(e,t);t+=n.length+n.value;break}case hi.SGROUP:case hi.EGROUP:break;case hi.I32:t+=4;break;default:throw new Error(`Malformed kndctr cookie. Unknown wire type: ${r}`)}}throw new Error("No ECID found in cookie.")},_i=e=>{const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)))};var wi=({orgId:e,cookieJar:t,logger:n})=>{const a=Et(e,"identity");return()=>{const e=t.get(a);if(!e)return null;try{const t=decodeURIComponent(e).replace(/_/g,"/").replace(/-/g,"+"),n=_i(t);return yi(n)}catch(e){return n.warn(`Unable to decode ECID from ${a} cookie`,e),null}}};const Ci=({config:e,logger:t,consent:n,fireReferrerHideableImage:a,sendEdgeNetworkRequest:o,apexDomain:r,getBrowser:i})=>{const{orgId:s,thirdPartyCookiesEnabled:c,edgeConfigOverrides:l}=e,d=Gr({logger:t,orgId:s,awaitVisitorOptIn:Wr}),u=_e({logger:t,cookieJar:fe}),p=zr({config:e,getEcidFromVisitor:d,apexDomain:r,cookieJar:u,isPageSsl:"https:"===window.location.protocol}),m=Mt({orgId:s}),g=ci({sendEdgeNetworkRequest:o,createIdentityRequestPayload:di,createIdentityRequest:li,globalConfigOverrides:l}),f=Rt({getBrowser:i}),v=Zr({thirdPartyCookiesEnabled:c,areThirdPartyCookiesSupportedByDefault:f}),b=ei({getLegacyEcid:p.getEcid,addEcidToPayload:ri}),h=oi({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:s,logger:t}),y=ii({doesIdentityCookieExist:m,orgId:s,logger:t}),_=Xr({doesIdentityCookieExist:m,setDomainForInitialIdentityPayload:v,addLegacyEcidToPayload:b,awaitIdentityCookie:y,logger:t}),w=$r({fireReferrerHideableImage:a,logger:t}),C=Qr({processIdSyncs:w}),E=mi({dateProvider:()=>new Date,orgId:s}),k=fi({thirdPartyCookiesEnabled:c}),x=Yr({thirdPartyCookiesEnabled:c,areThirdPartyCookiesSupportedByDefault:f}),P=wi({orgId:s,cookieJar:u,logger:t});return Hr({addEcidQueryToPayload:x,addQueryStringIdentityToPayload:h,ensureSingleIdentity:_,setLegacyEcid:p.setEcid,handleResponseForIdSyncs:C,getNamespacesFromResponse:si,getIdentity:g,consent:n,appendIdentityToUrl:E,logger:t,getIdentityOptionsValidator:k,decodeKndctrCookie:P})};Ci.namespace="Identity",Ci.configValidators=Ur;const Ei=({config:e,componentRegistry:t})=>{const n=[...t.getCommandNames(),to,no].sort(),a={...e};Object.keys(e).forEach((t=>{const n=e[t];"function"==typeof n&&(a[t]=n.toString())}));const o=t.getComponentNames();return{version:_r,configs:a,commands:n,components:o}},ki=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:Ei({config:e,componentRegistry:t})})}}});ki.namespace="LibraryInfo";var xi=Object.freeze({__proto__:null,context:Lr,dataCollector:Mr,identity:Ci,libraryInfo:ki});const Pi=Ft(window),{fetch:Si,navigator:Ii}=window,ji=bo(),Ti=_t(window,fe),Oi=yo({fetch:Si}),Di=gt(),Ni=Ro({window:window,createNamespacedStorage:Pi}),Ri=$t({userAgent:window.navigator.userAgent}),Li=({instanceName:e,logController:{setDebugEnabled:t,logger:n,createComponentLogger:a},components:o})=>{const r=Aa(),i=Ra(r),s=o.concat(Object.values(xi)),c=e=>{t(e.enabled,{fromConfig:!1})},l=_e({logger:n,cookieJar:fe}),d=o=>{const c=uo({options:o,componentCreators:s,coreConfigValidators:ji,createConfig:mo,logger:n,setDebugEnabled:t}),{orgId:d,targetMigrationEnabled:u}=c,p=Fo({orgId:d,targetMigrationEnabled:u}),m=Mo({cookieJar:l,shouldTransferCookie:p,apexDomain:Ti,dateProvider:()=>new Date}),g=Me(Ii.sendBeacon)?_o({sendBeacon:Ii.sendBeacon.bind(Ii),sendFetchRequest:Oi,logger:n}):Oi,f=Va({logger:n,sendFetchRequest:Oi,sendBeaconRequest:g,isRequestRetryable:ar,getRequestRetryDelay:lr}),v=Zo({logger:n}),b=Ma({logger:n}),h=eo({extractEdgeInfo:b}),y=er({orgId:d,cookieJar:fe}),_=Xo({config:c,lifecycle:i,cookieTransfer:m,sendNetworkRequest:f,createResponse:h,processWarningsAndErrors:v,getLocationHint:y,getAssuranceValidationTokenParams:Ni}),w=ur({lifecycle:i,cookieTransfer:m,createResponse:h,processWarningsAndErrors:v}),C=Ga({logger:n}),E=Qa({generalConsentState:C,logger:n}),k=Ao({config:c,logger:n,lifecycle:i,consent:E,createEvent:Ka,createDataCollectionRequestPayload:Io,createDataCollectionRequest:xo,sendEdgeNetworkRequest:_,applyResponse:w});return po({componentCreators:s,lifecycle:i,componentRegistry:r,getImmediatelyAvailableTools(t){const n=a(t);return{config:c,componentRegistry:r,consent:E,eventManager:k,fireReferrerHideableImage:Di,logger:n,lifecycle:i,sendEdgeNetworkRequest:_,handleError:ho({errorPrefix:`[${e}] [${t}]`,logger:n}),createNamespacedStorage:Pi,apexDomain:Ti,getBrowser:Ri}}})},u=ho({errorPrefix:`[${e}]`,logger:n});return ao({logger:n,configureCommand:d,setDebugCommand:c,handleError:u,validateCommandOptions:ro})},Ai=({eventManager:e,lifecycle:t,handleError:n})=>a=>{if(a.s_fe)return Promise.resolve();const o=a.target,r=e.createEvent();return r.documentMayUnload(),t.onClick({event:r,clickedElement:o}).then((()=>r.isEmpty()?Promise.resolve():e.sendEvent(r))).then(Xt).catch((e=>{n(e,"click collection")}))};var Vi=({eventManager:e,lifecycle:t,handleError:n})=>{const a=Ai({eventManager:e,lifecycle:t,handleError:n});document.addEventListener("click",a,!0)};const Mi="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",qi=xa().regexp().default(Mi),$i=ka({clickCollectionEnabled:ya().default(!0),clickCollection:ka({internalLinkEnabled:ya().default(!0),externalLinkEnabled:ya().default(!0),downloadLinkEnabled:ya().default(!0),sessionStorageEnabled:ya().default(!1),eventGroupingEnabled:ya().default(!1),filterClickProperties:_a()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:qi,onBeforeLinkClickSend:_a().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),Ui="cppXYctnr";var Fi=(e=document)=>null!==e.getElementById(Ui),Bi=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname},Hi=(e,t)=>Bi(e)!==Bi(t);const zi=(e,t)=>t&&("download"===t&&!e.downloadLinkEnabled||"exit"===t&&!e.externalLinkEnabled||"other"===t&&!e.internalLinkEnabled);var Wi=({config:e,logger:t,getClickedElementProperties:n,clickActivityStorage:a})=>{const{clickCollectionEnabled:o,clickCollection:r}=e;return o?({event:o,clickedElement:i})=>{const s=n({clickActivityStorage:a,clickedElement:i,config:e,logger:t}),c=s.linkType;Fi()||(s.isValidLink()&&zi(r,c)?t.info(`Cancelling link click event due to clickCollection.${c}LinkEnabled = false.`):!s.isInternalLink()||!r.eventGroupingEnabled||e.onBeforeLinkClickSend&&!r.filterClickDetails||Hi(window.location.hostname,s.linkUrl)?s.isValidLink()?(o.mergeXdm(s.xdm),o.mergeData(s.data),a.save({pageName:s.pageName,pageIDType:s.pageIDType})):s.isValidActivityMapData()&&a.save(s.properties):a.save(s.properties))}:()=>{}};const Ji=e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}),Gi=e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}),Qi=(e,t)=>{const{xdm:n,data:a,clickedElement:o}=e;if(t.clickedElement=o,n&&n.web&&n.web.webInteraction){const{name:e,region:a,type:o,URL:r}=n.web.webInteraction;t.linkName=e,t.linkRegion=a,t.linkType=o,t.linkUrl=r}if(a&&a.__adobe&&a.__adobe.analytics){const{contextData:e}=a.__adobe.analytics;if(e&&e.a&&e.a.activitymap){const{page:n,link:a,region:o,pageIDType:r}=e.a.activitymap;t.pageName=n||t.pageName,t.linkName=a||t.linkName,t.linkRegion=o||t.linkRegion,void 0!==r&&(t.pageIDType=r)}}};var Xi=({properties:e,logger:t}={})=>{let n=e||{};return{get pageName(){return n.pageName},set pageName(e){n.pageName=e},get linkName(){return n.linkName},set linkName(e){n.linkName=e},get linkRegion(){return n.linkRegion},set linkRegion(e){n.linkRegion=e},get linkType(){return n.linkType},set linkType(e){n.linkType=e},get linkUrl(){return n.linkUrl},set linkUrl(e){n.linkUrl=e},get pageIDType(){return n.pageIDType},set pageIDType(e){n.pageIDType=e},get clickedElement(){return n.clickedElement},set clickedElement(e){n.clickedElement=e},get properties(){return{pageName:n.pageName,linkName:n.linkName,linkRegion:n.linkRegion,linkType:n.linkType,linkUrl:n.linkUrl,pageIDType:n.pageIDType}},isValidLink:()=>!!(n.linkUrl&&n.linkType&&n.linkName&&n.linkRegion),isInternalLink(){return this.isValidLink()&&"other"===n.linkType},isValidActivityMapData:()=>!!n.pageName&&!!n.linkName&&!!n.linkRegion&&void 0!==n.pageIDType,get xdm(){return n.filteredXdm?n.filteredXdm:Ji(this)},get data(){return n.filteredData?n.filteredData:Gi(this)},applyPropertyFilter(e){e&&!1===e(n)&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),n={})},applyOptionsFilter(e){const a=this.options;if(a&&a.clickedElement&&(a.xdm||a.data)){if(e&&!1===e(a))return t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),void(this.options=void 0);this.options=a,n.filteredXdm=a.xdm,n.filteredData=a.data}},get options(){const e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),e.xdm||e.data)return e},set options(e){n={},e&&Qi(e,n)}}},Ki=({clickActivityStorage:e})=>t=>{if(Fi())return;const n=e.load(),a=Xi({properties:n});if(a.isValidLink()||a.isValidActivityMapData()){if(a.isValidLink()){const e=a.xdm;delete e.eventType,t.mergeXdm(e)}a.isValidActivityMapData()&&t.mergeData(a.data),e.save({pageName:a.pageName,pageIDType:a.pageIDType})}},Yi=({window:e,getLinkName:t,getLinkRegion:n,getAbsoluteUrlFromAnchorElement:a,findClickableElement:o,determineLinkType:r})=>({clickedElement:i,config:s,logger:c,clickActivityStorage:l})=>{const{onBeforeLinkClickSend:d,clickCollection:u}=s,{filterClickDetails:p}=u,m=Xi({logger:c});if(i){const c=o(i);if(c){m.clickedElement=i,m.linkUrl=a(e,c),m.linkType=r(e,s,m.linkUrl,c),m.linkRegion=n(c),m.linkName=t(c),m.pageIDType=0,m.pageName=e.location.href;const o=l.load();o&&o.pageName&&(m.pageName=o.pageName,m.pageIDType=1),p?m.applyPropertyFilter(p):d&&m.applyOptionsFilter(d)}}return m};const Zi="clickData";var es=({storage:e})=>({save:t=>{const n=JSON.stringify(t);e.setItem(Zi,n)},load:()=>{let t=null;const n=e.getItem(Zi);return n&&(t=JSON.parse(n)),t},remove:()=>{e.removeItem(Zi)}}),ts=({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})},ns=(e,t)=>{const{clickCollectionEnabled:n,onBeforeLinkClickSend:a,downloadLinkQualifier:o}=e;!1===n&&(a&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),o&&o!==Mi&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))},as=e=>e&&e.replace(/\s+/g," ").trim();const os=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i;var rs=e=>!(e&&e.nodeName&&e.nodeName.match(os));const is=e=>{let t=[],n=!1;return rs(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach((e=>{const a=is(e);t=t.concat(a.supportedNodes),n=n||a.includesUnsupportedNodes}))):n=!0,{supportedNodes:t,includesUnsupportedNodes:n}},ss=(e,t,n)=>{let a;return n&&n!==e.nodeName.toUpperCase()||(a=e.getAttribute(t)),a},cs=e=>{const t={texts:[]};return e.supportedNodes.forEach((e=>{e.getAttribute&&(t.alt||(t.alt=as(e.getAttribute("alt"))),t.title||(t.title=as(e.getAttribute("title"))),t.inputValue||(t.inputValue=as(ss(e,"value","INPUT"))),t.imgSrc||(t.imgSrc=as(ss(e,"src","IMG")))),e.nodeValue&&t.texts.push(e.nodeValue)})),t},ls=/^(HEADER|MAIN|FOOTER|NAV)$/i,ds=e=>{let t;return"region"===e.role&&Qt(e["aria-label"])&&(t=e["aria-label"]),t},us=e=>{let t;return e&&e.nodeName&&e.nodeName.match(ls)&&(t=e.nodeName),t};var ps=e=>!!e&&/^[a-z0-9]+:\/\//i.test(e),ms=e=>!(!e.href||"A"!==e.tagName&&"AREA"!==e.tagName||e.onclick&&e.protocol&&!(e.protocol.toLowerCase().indexOf("javascript")<0)),gs=e=>!!e&&!!e.onclick,fs=e=>{if("INPUT"===e.tagName){const t=e.getAttribute("type");if("submit"===t)return!0;if("image"===t&&e.src)return!0}return!1},vs=e=>"BUTTON"===e.tagName&&"submit"===e.type,bs=e=>{const t=e.indexOf("?"),n=e.indexOf("#");return t>=0&&(t<n||n<0)?e.substring(0,t):n>=0?e.substring(0,n):e},hs=(e,t,n)=>{let a=!1;if(t)if(n&&n.download)a=!0;else if(e){const n=new RegExp(e),o=bs(t).toLowerCase();a=n.test(o)}return a},ys=(e,t)=>{let n=!1;if(t&&e.location.hostname){const a=e.location.hostname.toLowerCase();n=bs(t).toLowerCase().indexOf(a)<0}return n},_s=e=>{const t=e.getContent();return void 0!==t.xdm&&void 0!==t.xdm.web&&void 0!==t.xdm.web.webPageDetails&&void 0!==t.xdm.web.webPageDetails.name},ws=()=>{const e={};return{getItem:t=>e[t],setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}};const Cs=Yi({window:window,getLinkName:e=>{let t=as(e.innerText||e.textContent);const n=is(e);if(!t||n.includesUnsupportedNodes){const e=cs(n);t=as(e.texts.join("")),t||(t=e.alt||e.title||e.inputValue||e.imgSrc)}return t||""},getLinkRegion:e=>{let t,n=e.parentNode;for(;n;){if(t=as(n.id||ds(n)||us(n)),t)return t;n=n.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:(e,t)=>{const n=e.location;let a=t.href||"";"string"!=typeof a&&(a="");let{protocol:o,host:r}=t;if(a&&!ps(a)){o||(o=n.protocol?n.protocol:""),o=o?`${o}//`:"",r||(r=n.host?n.host:"");let e="";if("/"!==a.substring(0,1)){let t=n.pathname.lastIndexOf("/");t=t<0?0:t,e=n.pathname.substring(0,t)}a=`${o}${r}${e}/${a}`}return a},findClickableElement:e=>{let t=e;for(;t;){if(ms(t)||gs(t)||fs(t)||vs(t))return t;t=t.parentNode}return null},determineLinkType:(e,t,n,a)=>{let o="other";return Qt(n)&&(hs(t.downloadLinkQualifier,n,a)?o="download":ys(e,n)&&(o="exit")),o}});let Es;const ks=e=>{if(!Es){const t=Ft(window)(e.orgId||""),n=ws(),a=e.clickCollection.sessionStorageEnabled?t.session:n;Es=es({storage:a})}},xs=({config:e,eventManager:t,handleError:n,logger:a})=>{ns(e,a);const o=e.clickCollection;Es||ks(e);const r=Wi({config:e,logger:a,clickActivityStorage:Es,getClickedElementProperties:Cs}),i=Ki({clickActivityStorage:Es}),s=ts({clickActivityStorage:Es});return{lifecycle:{onComponentsRegistered(e){const{lifecycle:a}=e;Vi({eventManager:t,lifecycle:a,handleError:n})},onClick({event:e,clickedElement:t}){r({event:e,clickedElement:t})},onBeforeEvent({event:e}){_s(e)&&(o.eventGroupingEnabled&&i(e),s(e,a,Es))}}}};xs.namespace="ActivityCollector",xs.configValidators=$i,xs.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(Es||ks(e),{getLinkDetails:n=>Cs({clickActivityStorage:Es,clickedElement:n,config:e,logger:t}).properties});const Ps=e=>`URL destination succeeded: ${e.spec.url}`;var Ss=({fireReferrerHideableImage:e,logger:t,cookieJar:n,isPageSsl:a})=>{const o=a?{sameSite:"none",secure:!0}:{},r=e=>{e.filter((e=>"cookie"===e.type)).forEach((e=>{const{name:t,value:a,domain:r,ttlDays:i}=e.spec;n.set(t,a||"",{domain:r||"",expires:i||10,...o})}))},i=n=>{const a=n.filter((e=>"url"===e.type));return Promise.all(a.map((n=>e(n.spec).then((()=>{t.info(Ps(n))})).catch((()=>{}))))).then(Xt)};return e=>(r(e),i(e))},Is=({processDestinations:e})=>{const t=({response:t})=>{const n=t.getPayloadsByType("activation:push");return e(n)},n=({response:e})=>({destinations:e.getPayloadsByType("activation:pull")});return({response:e})=>t({response:e}).then((()=>n({response:e})))};const js=({logger:e,fireReferrerHideableImage:t})=>{const n=fe.withConverter({write:e=>encodeURIComponent(e)}),a=_e({logger:e,cookieJar:n}),o=Ss({fireReferrerHideableImage:t,logger:e,cookieJar:a,isPageSsl:"https:"===window.location.protocol});return{lifecycle:{onResponse:Is({processDestinations:o})},commands:{}}};js.namespace="Audiences";var Ts=({storedConsent:e,taskQueue:t,defaultConsent:n,consent:a,sendSetConsentRequest:o,validateSetConsentOptions:r,consentHashStore:i,doesIdentityCookieExist:s})=>{const c={[Fa]:n};let l=e.read();const d=s(),u=void 0!==l[Fa];d&&u||i.clear(),d||(e.clear(),l={}),a.initializeConsent(c,l);const p=()=>{if(0===t.length){const t=e.read();void 0!==t[Fa]&&a.setConsent(t)}};return{commands:{setConsent:{optionsValidator:r,run:({consent:e,identityMap:n,edgeConfigOverrides:r})=>{a.suspend();const s=i.lookup(e);return t.addTask((()=>s.isNew()?o({consentOptions:e,identityMap:n,edgeConfigOverrides:r}):Promise.resolve())).then((()=>s.save())).finally(p)}}},lifecycle:{onResponse:p,onRequestFailure:p}}};const Os=e=>Array.isArray(e)?e.map((e=>Os(e))):"object"==typeof e&&null!==e?Object.keys(e).sort().reduce(((t,n)=>(t[n]=Os(e[n]),t)),{}):e;var Ds=e=>Ce(JSON.stringify(Os(e)));const Ns=({standard:e,version:t})=>`${e}.${t}`;var Rs=({storage:e})=>({clear(){e.clear()},lookup(t){const n={},a=e=>{const t=Ns(e),{standard:a,version:o,...r}=e;return n[t]||(n[t]=Ds(r).toString()),n[t]};return{isNew:()=>t.some((t=>{const n=Ns(t),o=e.getItem(n);return null===o||o!==a(t)})),save(){t.forEach((t=>{const n=Ns(t);e.setItem(n,a(t))}))}}}}),Ls=()=>{const e={},t=Po({content:e,addIdentity:(t,n)=>{e.identityMap=e.identityMap||{},e.identityMap[t]=e.identityMap[t]||[],e.identityMap[t].push(n)},hasIdentity:t=>void 0!==(e.identityMap&&e.identityMap[t])});return t.setConsent=t=>{e.consent=t},t},As=({payload:e,datastreamIdOverride:t})=>ko({payload:e,datastreamIdOverride:t,getAction:()=>"privacy/set-consent",getUseSendBeacon:()=>!1}),Vs=({parseConsentCookie:e,orgId:t,cookieJar:n})=>{const a=Et(t,At);return{read(){const t=n.get(a);return t?e(t):{}},clear(){n.remove(a)}}},Ms=({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:n,edgeConfigOverrides:a})=>({consentOptions:o,identityMap:r,edgeConfigOverrides:i})=>{const s=jo({payload:e(),globalConfigOverrides:a,localConfigOverrides:i});s.payload.setConsent(o),pe(r)&&Object.keys(r).forEach((e=>{r[e].forEach((t=>{s.payload.addIdentity(e,t)}))}));const c=t(s);return n({request:c}).then((()=>{}))},qs=e=>e.split(";").reduce(((e,t)=>{const[n,a]=t.split("=");return e[n]=a,e}),{}),$s=ka({consent:ha(ba()).required().nonEmpty(),identityMap:Sa,edgeConfigOverrides:Ia}).noUnknownFields().required(),Us=ka({defaultConsent:Pa(qa,$a,Ua).default(qa)});const Fs=({config:e,consent:t,sendEdgeNetworkRequest:n,createNamespacedStorage:a})=>{const{orgId:o,defaultConsent:r}=e,i=Vs({parseConsentCookie:qs,orgId:o,cookieJar:fe}),s=we(),c=Ms({createConsentRequestPayload:Ls,createConsentRequest:As,sendEdgeNetworkRequest:n,edgeConfigOverrides:e.edgeConfigOverrides}),l=a(`${Ct(o)}.consentHashes.`),d=Rs({storage:l.persistent}),u=Mt({orgId:o});return Ts({storedConsent:i,taskQueue:s,defaultConsent:r,consent:t,sendSetConsentRequest:c,validateSetConsentOptions:$s,consentHashStore:d,doesIdentityCookieExist:u})};Fs.namespace="Consent",Fs.configValidators=Us;var Bs=()=>({eventMergeId:c()});t.createEventMergeId=Bs;var Hs=({createEventMergeId:e})=>({commands:{createEventMergeId:{run:e}}});const zs=()=>Hs({createEventMergeId:Bs});zs.namespace="EventMerge";var Ws={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},Js=({mediaRequestPayload:e,action:t})=>ko({payload:e,edgeSubPath:"/va",getAction:()=>t,getUseSendBeacon:()=>!1}),Gs=({config:e,eventManager:t,consent:n,sendEdgeNetworkRequest:a,setTimestamp:o})=>({createMediaEvent({options:n}){const a=t.createEvent(),{xdm:r}=n;if(o(r),a.setUserXdm(r),r.eventType===Ws.AD_START){const{advertisingDetails:t}=n.xdm.mediaCollection;a.mergeXdm({mediaCollection:{advertisingDetails:{playerName:t.playerName||e.streamingMedia.playerName}}})}return a},createMediaSession(n){const{playerName:a,channel:o,appVersion:r}=e.streamingMedia,i=t.createEvent(),{sessionDetails:s}=n.xdm.mediaCollection;return i.setUserXdm(n.xdm),i.mergeXdm({eventType:Ws.SESSION_START,mediaCollection:{sessionDetails:{playerName:s.playerName||a,channel:s.channel||o,appVersion:s.appVersion||r}}}),i},augmentMediaEvent({event:e,playerId:t,getPlayerDetails:n,sessionID:a}){if(!t||!n)return e;const{playhead:o,qoeDataDetails:r}=n({playerId:t});return e.mergeXdm({mediaCollection:{playhead:rn(o),qoeDataDetails:r,sessionID:a}}),e},trackMediaSession({event:e,mediaOptions:n,edgeConfigOverrides:a}){const o={mediaOptions:n,
edgeConfigOverrides:a};return t.sendEvent(e,o)},trackMediaEvent({event:e,action:t}){const o=Io(),r=Js({mediaRequestPayload:o,action:t});return o.addEvent(e),e.finalize(),n.awaitConsent().then((()=>a({request:r}).then((()=>({})))))}}),Qs={MAIN:"main",COMPLETED:"completed"},Xs=()=>{let e;return{getSession:t=>e[t]||{},storeSession:({playerId:t,sessionDetails:n})=>{void 0===e&&(e={}),e[t]=n},stopPing:({playerId:t})=>{const n=e[t];n&&(clearTimeout(n.pingId),n.pingId=null,n.playbackState=Qs.COMPLETED)},savePing:({playerId:t,pingId:n,playbackState:a})=>{e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=n,e[t].playbackState=a)}}};const Ks=(e,t)=>e===Ws.AD_START||e===Ws.Ad_BREAK_START||e===Ws.AD_SKIP||e===Ws.AD_COMPLETE?"ad":e===Ws.AD_BREAK_COMPLETE||e===Ws.CHAPTER_COMPLETE||e===Ws.CHAPTER_START||e===Ws.CHAPTER_SKIP||e===Ws.SESSION_START?"main":e===Ws.SESSION_END||e===Ws.SESSION_COMPLETE?"completed":t;var Ys=({mediaEventManager:e,mediaSessionCacheManager:t,config:n})=>{const a=o=>{const r=e.createMediaEvent({options:o}),{playerId:i,xdm:s}=o,{eventType:c}=s,l=c.split(".")[1],{getPlayerDetails:d,sessionPromise:u,playbackState:p}=t.getSession(i);return u.then((o=>o.sessionId?(e.augmentMediaEvent({event:r,eventType:c,playerId:i,getPlayerDetails:d,sessionID:o.sessionId}),e.trackMediaEvent({event:r,action:l}).then((()=>{if(i)if(c===Ws.SESSION_COMPLETE||c===Ws.SESSION_END)t.stopPing({playerId:i});else{const e=Ks(c,p);if("completed"===e)return;const o="ad"===e?n.streamingMedia.adPingInterval:n.streamingMedia.mainPingInterval,r=setTimeout((()=>{const e={playerId:i,xdm:{eventType:Ws.PING}};a(e)}),1e3*o);t.savePing({playerId:i,pingId:r,playbackState:e})}}))):Promise.reject(new Error(`Failed to trigger media event: ${c}. Session ID is not available for playerId: ${i}.`))))};return e=>a(e)},Zs=({config:e,mediaEventManager:t,mediaSessionCacheManager:n,legacy:a=!1})=>o=>{if(!e.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));const{playerId:r,getPlayerDetails:i,edgeConfigOverrides:s}=o,c=t.createMediaSession(o);t.augmentMediaEvent({event:c,playerId:r,getPlayerDetails:i});const l=t.trackMediaSession({event:c,mediaOptions:{playerId:r,getPlayerDetails:i,legacy:a},edgeConfigOverrides:s});return n.storeSession({playerId:r,sessionDetails:{sessionPromise:l,getPlayerDetails:i,playbackState:Qs.MAIN}}),l},ec=e=>!Gt(e)||!e.trim(),tc=({mediaSessionCacheManager:e,config:t,trackMediaEvent:n})=>({response:a,playerId:o,getPlayerDetails:r})=>{const i=a.getPayloadsByType("media-analytics:new-session");if(qe(i)){const{sessionId:a}=i[0];if(ec(a))return{};if(!o||!r)return{sessionId:a};const s=setTimeout((()=>{n({playerId:o,xdm:{eventType:Ws.PING}})}),1e3*t.streamingMedia.mainPingInterval);return e.savePing({playerId:o,pingId:s,playbackState:Qs.MAIN}),{sessionId:a}}return{}};const nc={Video:"video",Audio:"audio"},ac={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},oc={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},rc={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},ic={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},sc={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},cc={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},lc={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},dc={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"};var uc=({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:n,logger:a,createMediaHelper:o,createGetInstance:r,config:i})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Xt}){if(!e)return;const{legacy:a,playerId:o,getPlayerDetails:r}=e;a&&t((({response:e})=>n({playerId:o,getPlayerDetails:r,response:e})))}},commands:{getMediaAnalyticsTracker:{run:()=>{if(!i.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));a.info("Streaming media is configured in legacy mode.");const n=o({logger:a});return Promise.resolve({getInstance:()=>r({logger:a,trackMediaEvent:e,trackMediaSession:t,uuid:c}),Event:rc,MediaType:nc,PlayerState:oc,StreamType:ac,MediaObjectKey:sc,VideoMetadataKeys:cc,AudioMetadataKeys:lc,AdMetadataKeys:dc,...n})}}}}),pc=({logger:e})=>{const t=(t,n,a)=>{const o={friendlyName:t,offset:n,index:a},r=ka({friendlyName:xa().nonEmpty(),offset:Ca(),index:Ca()});try{const e=r(o);return{advertisingPodDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index}}}catch(t){return e.warn("An error occurred while creating the Ad Break Object.",t),{}}},n=(t,n,a,o)=>{const r={friendlyName:t,name:n,podPosition:a,length:o},i=ka({friendlyName:xa().nonEmpty(),name:xa().nonEmpty(),podPosition:Ca(),length:Ca()});try{const e=i(r);return{advertisingDetails:{friendlyName:e.friendlyName,name:e.name,podPosition:e.podPosition,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Advertising Object.",t),{}}},a=(t,n,a,o)=>{const r={friendlyName:t,offset:n,length:a,index:o},i=ka({friendlyName:xa().nonEmpty(),offset:Ca(),length:Ca(),index:Ca()});try{const e=i(r);return{chapterDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Chapter Object.",t),{}}},o=t=>{const n=/^[a-zA-Z0-9_]{1,64}$/,a=xa().matches(n,"This is not a valid state name.");try{return{name:a(t)}}catch(t){return e.warn("An error occurred while creating the State Object.",t),{}}},r=(t,n,a,o)=>{const r={bitrate:t,droppedFrames:n,fps:a,startupTime:o},i=ka({bitrate:Ca(),droppedFrames:Ca(),fps:Ca(),startupTime:Ca()});try{const e=i(r);return{bitrate:e.bitrate,droppedFrames:e.droppedFrames,framesPerSecond:e.fps,timeToStart:e.startupTime}}catch(t){return e.warn("An error occurred while creating the QOE Object.",t),{}}};return{createMediaObject:(t,n,a,o,r)=>{const i={friendlyName:t,name:n,length:a,streamType:r,contentType:o},s=ka({friendlyName:xa().nonEmpty(),name:xa().nonEmpty(),length:Ca().required(),streamType:xa().nonEmpty(),contentType:xa().nonEmpty()});try{const e=s(i);return{sessionDetails:{name:e.name,friendlyName:e.friendlyName,length:e.length,streamType:e.streamType,contentType:e.contentType}}}catch(t){return e.warn("An error occurred while creating the Media Object.",t),{}}},createAdBreakObject:t,createAdObject:n,createChapterObject:a,createStateObject:o,createQoEObject:r}};const mc={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},gc={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"};var fc=({logger:e,trackMediaSession:t,trackMediaEvent:n,uuid:a})=>{let o=null;const r=()=>{o={qoe:null,lastPlayhead:0,playerId:a()}},i=({eventType:e})=>e===rc.BufferComplete||e===rc.SeekComplete?ic.Play:e===rc.StateStart||e===rc.StateEnd?ic.StateUpdate:e===rc.SeekStart?ic.Pause:e,s=({eventType:e,mediaDetails:t={},contextData:n=[]})=>{const a=i({eventType:e});if(e===rc.StateStart)return{eventType:`media.${a}`,mediaCollection:{statesStart:[t]}};if(e===rc.StateEnd)return{eventType:`media.${a}`,mediaCollection:{statesEnd:[t]}};const o={eventType:`media.${a}`,mediaCollection:{...t}},r=[];return Object.keys(n).forEach((e=>{mc[e]?o.mediaCollection.sessionDetails[mc[e]]=n[e]:gc[e]?o.mediaCollection.advertisingDetails[gc[e]]=n[e]:r.push({name:e,value:n[e]})})),qe(r)&&(o.mediaCollection.customMetadata=r),o};return{trackSessionStart:(n,a={})=>{if(ue(n)||ft(n))return e.warn("Invalid media object"),{};null===o&&(e.warn("The Media Session was completed. Restarting a new session."),r());const i=s({eventType:ic.SessionStart,mediaDetails:n,contextData:a});return t({playerId:o.playerId,getPlayerDetails:()=>({playhead:o.lastPlayhead,qoeDataDetails:o.qoe}),xdm:i})},trackPlay:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ic.Play});return n({playerId:o.playerId,xdm:t})},trackPause:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ic.Pause});return n({playerId:o.playerId,xdm:t})},trackSessionEnd:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ic.SessionEnd});return n({playerId:o.playerId,xdm:t})},trackComplete:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ic.SessionComplete});return n({playerId:o.playerId,xdm:t})},trackError:t=>{if(e.warn(`trackError(${t})`),null===o)return e.warn("The Media Session was completed."),{};const a={name:t,source:"player"},r=s({eventType:ic.Error,mediaDetails:{errorDetails:a}});return n({playerId:o.playerId,xdm:r})},trackEvent:(t,a,r)=>{if(ft(a))return e.warn("Invalid media object."),{};if(null===o)return e.warn("The Media Session was completed."),{};if(!Object.values(rc).includes(t))return e.warn("Invalid event type"),{};const i=s({eventType:t,mediaDetails:a,contextData:r});return n({playerId:o.playerId,xdm:i})},updatePlayhead:t=>{null!==o?zt(t)&&(o.lastPlayhead=parseInt(t,10)):e.warn("The Media Session was completed.")},updateQoEObject:t=>{null!==o?t&&(o.qoe=t):e.warn("The Media Session was completed.")},destroy:()=>{e.warn("Destroy called, destroying the tracker."),o=null}}};const vc=({eventManager:e,sendEdgeNetworkRequest:t,config:n,logger:a,consent:o})=>{const r=Xs(),i=Gs({sendEdgeNetworkRequest:t,config:n,consent:o,eventManager:e,setTimestamp:hr((()=>new Date))}),s=Ys({mediaSessionCacheManager:r,mediaEventManager:i,config:n}),c=Zs({config:n,mediaEventManager:i,mediaSessionCacheManager:r,legacy:!0}),l=tc({mediaSessionCacheManager:r,config:n,trackMediaEvent:s});return uc({mediaResponseHandler:l,trackMediaSession:c,trackMediaEvent:s,createMediaHelper:pc,createGetInstance:fc,logger:a,config:n})};vc.namespace="Legacy Media Analytics";const bc="web",hc="webapp",yc="://",_c="#",wc=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,Cc=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,Ec=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,kc=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,xc=(e="/")=>{let t=e.length;for(;t>0&&-1!=="/".indexOf(e.charAt(t-1));)t-=1;return e.substring(0,t)||"/"},Pc=e=>Qt(e)?e.toLowerCase():"",Sc=e=>Qt(e)?e.toLowerCase():"",Ic=e=>Qt(e)?xc(e):"/",jc=e=>{const t=e.match(wc);return t?{surfaceType:Pc(t[1]),authority:Sc(t[2]),path:Ic(t[3]),fragment:t[4]}:null},Tc=e=>`${e.surfaceType}${yc}${e.authority}${e.path||""}${e.fragment||""}`,Oc=e=>{const t=e(),n=t.host.toLowerCase(),a=t.pathname;return bc+yc+n+xc(a)},Dc=(e,t)=>e.startsWith(_c)?Oc(t)+e:e,Nc=(e,t,n)=>{const a=e=>(n.warn(e),null);if(!Qt(e))return a(`Invalid surface: ${e}`);const o=Dc(e,t),r=jc(o);return null===r?a(`Invalid surface: ${e}`):[bc,hc].includes(r.surfaceType)?r.authority&&Cc.test(r.authority)?r.path&&!Ec.test(r.path)?a(`Invalid path ${r.path} in surface: ${e}`):r.fragment&&!kc.test(r.fragment)?a(`Invalid fragment ${r.fragment} in surface: ${e}`):r:a(`Invalid authority ${r.authority} in surface: ${e}`):a(`Unsupported surface type ${r.surfaceType} in surface: ${e}`)},Rc=e=>!!e&&0===e.indexOf(bc+yc)&&-1===e.indexOf(_c),Lc=(e=[],t,n)=>e.map((e=>Nc(e,t,n))).filter((e=>!ue(e))).map(Tc),Ac="https://ns.adobe.com/personalization/default-content-item",Vc="https://ns.adobe.com/personalization/dom-action",Mc="https://ns.adobe.com/personalization/html-content-item",qc="https://ns.adobe.com/personalization/json-content-item",$c="https://ns.adobe.com/personalization/ruleset-item",Uc="https://ns.adobe.com/personalization/redirect-item",Fc="https://ns.adobe.com/personalization/message/in-app",Bc="https://ns.adobe.com/personalization/message/content-card",Hc=e=>{e.includes(Co)||e.push(Co)},zc=(e,t)=>{const n=Oc(t);e.includes(n)||e.push(n)},Wc=e=>e.filter(((t,n)=>e.indexOf(t)===n));var Jc=({getPageLocation:e,renderDecisions:t,decisionScopes:n,personalization:a,event:o,isCacheInitialized:r,logger:i})=>{const s=o.getViewName();return{isRenderDecisions:()=>t,isSendDisplayEvent:()=>!!a.sendDisplayEvent,shouldIncludeRenderedPropositions:()=>!!a.includeRenderedPropositions,getViewName:()=>s,hasScopes:()=>n.length>0||qe(a.decisionScopes),hasSurfaces:()=>qe(a.surfaces),hasViewName:()=>Qt(s),createQueryDetails(){const t=[...n];qe(a.decisionScopes)&&t.push(...a.decisionScopes);const o=Lc(a.surfaces,e,i);this.shouldRequestDefaultPersonalization()&&(Hc(t),zc(o,e));const r=[Ac,Mc,qc,Uc,$c,Fc,Bc];return t.includes(Co)&&r.push(Vc),{schemas:r,decisionScopes:Wc(t),surfaces:Wc(o)}},isCacheInitialized:()=>r,shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return a.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==a.defaultPersonalizationEnabled}}};const Gc="Rendering is disabled for authoring mode.",Qc="decisioning.propositionDisplay",Xc="decisioning.propositionInteract",Kc="decisioning.propositionTrigger",Yc="decisioning.propositionDismiss",Zc="decisioning.propositionSuppressDisplay",el=1,tl={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",SUPPRESS:"suppressDisplay"},nl={[Qc]:tl.DISPLAY,[Xc]:tl.INTERACT,[Kc]:tl.TRIGGER,[Yc]:tl.DISMISS,[Zc]:tl.SUPPRESS},al={[tl.DISPLAY]:Qc,[tl.INTERACT]:Xc,[tl.TRIGGER]:Kc,[tl.DISMISS]:Yc,[tl.SUPPRESS]:Zc},ol=e=>nl[e],rl=e=>al[e],il={propositions:[]};var sl=({logger:e,options:t})=>{const n=ka({propositions:ha(ka({id:xa().required(),scope:xa().required(),scopeDetails:ka({decisionProvider:xa().required()}).required(),items:ha(ka({id:xa().required(),schema:xa().required(),data:ka(ba())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:ka(ba()),viewName:xa()}).required();try{return n(t)}catch(t){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",t),il}},cl=({getPageLocation:e,logger:t,fetchDataHandler:n,viewChangeHandler:a,onClickHandler:o,isAuthoringModeEnabled:r,mergeQuery:i,viewCache:s,showContainers:c,applyPropositions:l,setTargetMigration:d,mergeDecisionsMeta:u,renderedPropositions:p,onDecisionHandler:m,handleConsentFlicker:g})=>({lifecycle:{onComponentsRegistered(){g()},onDecision:m,onBeforeRequest:({request:e})=>(d(e),Promise.resolve()),onBeforeEvent({event:o,renderDecisions:l,decisionScopes:d=[],personalization:m={},onResponse:g=Xt,onRequestFailure:f=Xt}){if(g((()=>({propositions:[]}))),f((()=>c())),r())return t.warn(Gc),i(o,{enabled:!1}),Promise.resolve();const v=Jc({getPageLocation:e,renderDecisions:l,decisionScopes:d,personalization:m,event:o,isCacheInitialized:s.isInitialized(),logger:t}),b=[];if(v.shouldIncludeRenderedPropositions()&&b.push(p.clear()),v.shouldFetchData()){const e=s.createCacheUpdate(v.getViewName());f((()=>e.cancel())),n({cacheUpdate:e,personalizationDetails:v,event:o,onResponse:g})}else v.shouldUseCachedData()&&b.push(a({personalizationDetails:v,event:o,onResponse:g,onRequestFailure:f}));return Promise.all(b).then((e=>{const t=e.flatMap((e=>e));qe(t)&&u(o,t,[tl.DISPLAY])}))},onClick({event:e,clickedElement:t}){o({event:e,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:e=>sl({logger:t,options:e}),run:l}}}),ll=(e="undefined")=>je(Ne,{},{innerHTML:e});const dl=":eq(",ul=/:eq\((\d+)\)/g,pl=e=>-1===e.indexOf(dl),ml=e=>e.split(ul).filter(Qt),gl=/(#|\.)(-?\w+)/g,fl=(e,t,n)=>`${t}${CSS.escape(n)}`,vl=e=>e.replace(gl,fl),bl=e=>{const t=[],n=vl(e.trim()),a=ml(n),{length:o}=a;let r=0;for(;r<o;){const e=a[r],n=a[r+1];n?t.push({sel:e,eq:Number(n)}):t.push({sel:e}),r+=2}return t},hl=e=>{const t=document;if(pl(e))return Ge(e,t);const n=bl(e),{length:a}=n;let o=[],r=t,i=0;for(;i<a;){const{sel:e,eq:t}=n[i],s=Ge(e,r),{length:c}=s;if(0===c)break;if(null!=t&&t>c-1)break;i<a-1&&(null==t?[r]=s:r=s[t]),i===a-1&&(o=null==t?s:[s[t]]),i+=1}return o};var yl=(e,t=document)=>t.getElementById(e),_l=(e,t,n)=>{e.setAttribute(t,n)},wl=(e,t)=>e.getAttribute(t),Cl=(e,t)=>{e.removeAttribute(t)},El=(e,t,n,a)=>{let o;o=a?`${t}:${n} !${a};`:`${t}:${n};`,e.style.cssText+=`;${o}`},kl=e=>e.parentNode,xl=e=>e.nextElementSibling,Pl=(e,t)=>{if(!e)return;const n=kl(e);n&&n.insertBefore(t,xl(e))},Sl=(e,t)=>{if(!e)return;const n=kl(e);n&&n.insertBefore(t,e)},Il=e=>{const{children:t}=e;return t?$e(t):[]},jl=e=>{const{childNodes:t}=e;return t?$e(t):[]},Tl=e=>e.firstElementChild;let Ol;var Dl=(e=document)=>{if(void 0===Ol){const t=e.querySelector("[nonce]");Ol=t&&(t.nonce||t.getAttribute("nonce"))}return Ol};const Nl="src",Rl=e=>e.tagName===De,Ll=e=>je(De,{src:e}),Al=e=>{Ge(De,e).forEach((e=>{const t=wl(e,Nl);t&&Ll(t)}))},Vl=(e,t)=>e.tagName===t,Ml=e=>Vl(e,Re)&&!wl(e,Nl);var ql=e=>{const t=Ge(Re,e),{length:n}=t,a=Dl();if(a)for(let e=0;e<n;e+=1){const n=t[e];Ml(n)&&(n.nonce=a)}};const $l=(e,t)=>new Promise(((n,a)=>{t.onload=()=>{n(t)},t.onerror=()=>{a(new Error(`Failed to load script: ${e}`))}})),Ul=e=>{const t=document.createElement("script");t.src=e,t.async=!0;const n=$l(e,t);return document.head.appendChild(t),n},Fl=(e,t)=>!!e&&e.tagName===t,Bl=e=>Fl(e,Le)&&!wl(e,Nl),Hl=e=>Fl(e,Le)&&wl(e,Nl),zl=e=>{const t=Ge(Le,e),n=[],{length:a}=t,o=Dl(),r={...o&&{nonce:o}};for(let e=0;e<a;e+=1){const a=t[e];if(!Bl(a))continue;const{textContent:o}=a;o&&n.push(je(Le,r,{textContent:o}))}return n},Wl=e=>{const t=Ge(Le,e),n=[],{length:a}=t;for(let e=0;e<a;e+=1){const a=t[e];if(!Hl(a))continue;const o=wl(a,Nl);o&&n.push(o)}return n},Jl=(e,t)=>{t.forEach((t=>{e.appendChild(t),e.removeChild(t)}))},Gl=e=>Promise.all(e.map(Ul));var Ql=(e,t,n)=>{const a=ll(t);ql(a);const o=jl(a),r=zl(a),i=Wl(a);return Al(a),o.forEach((t=>{Se(e,t)})),n(e),Jl(e,r),Gl(i)};const Xl=e=>{jl(e).forEach(ut)};var Kl=(e,t,n)=>(Xl(e),Ql(e,t,n)),Yl=(e,t,n)=>{const a=ll(t);ql(a);const o=jl(a),r=zl(a),i=Wl(a),{length:s}=o;let c=s-1;for(Al(a);c>=0;){const t=o[c];n(t);const a=Tl(e);a?Sl(a,t):Se(e,t),c-=1}return Jl(e,r),Gl(i)};const Zl="alloy-prehiding",ed="{ visibility: hidden }",td={},nd=e=>{if(td[e])return;const t=Dl(),n={...t&&{nonce:t}},a=je(Re,n,{textContent:`${e} ${ed}`});Se(document.head,a),td[e]=a},ad=e=>{const t=td[e];t&&(ut(t),delete td[e])},od=e=>t=>{if(!t)return;if(yl(Zl))return;const n=Dl(),a={id:Zl,...n&&{nonce:n}},o=je(Re,a,{textContent:t});e.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),Se(document.head,o)},rd=e=>()=>{const t=yl(Zl);t&&(e.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),ut(t))};var id=(e,t,n)=>{n(e),e.textContent=t},sd=(e,t,n)=>{const a=ll(t);ql(a);const o=jl(a),r=zl(a),i=Wl(a);return Al(a),o.forEach((t=>{n(t),Sl(e,t)})),Jl(e,r),Gl(i)},cd=(e,t,n)=>sd(e,t,n).then((()=>{ut(e)})),ld=(e,t,n)=>{const a=ll(t);ql(a);const o=jl(a),r=zl(a),i=Wl(a);Al(a);let s=e;return o.forEach((e=>{n(e),Pl(s,e),s=e})),Jl(e,r),Gl(i)},dd=(e,t,n)=>{const{priority:a,...o}=t;Object.keys(o).forEach((t=>{El(e,t,o[t],a)})),n(e)},ud=(e,t,n)=>{Object.keys(t).forEach((n=>{_l(e,n,t[n])})),n(e)},pd=(e,t,n)=>{Rl(e)&&(Ll(t),n(e),Cl(e,Nl),_l(e,Nl,t))},md=(e,{from:t,to:n},a)=>{const o=Il(e),r=o[t],i=o[n];r&&i&&(t<n?Pl(i,r):Sl(i,r),a(i),a(r))};const gd=(e,t,n,a)=>{const o=e.map((e=>a(e,t,n)));return Promise.all(o)},fd=e=>(t,n)=>{const{selector:a,prehidingSelector:o,content:r}=t;return nd(o),lt(a,hl).then((t=>gd(t,r,n,e))).then((()=>{ad(o)}),(e=>{throw ad(o),e}))},vd=e=>`${e}`.endsWith("px")?e:`${e}px`;var bd=(e,t,n)=>{const{priority:a,...o}=t;Object.keys(o).forEach((t=>{let n=o[t];"left"!==t&&"top"!==t||(n=vd(n)),El(e,t,n,a)})),n(e)},hd=(e,t,n)=>{n(e)},yd=(e,t,n)=>{const{priority:a,...o}=t;Object.keys(o).forEach((t=>{let n=o[t];"width"!==t&&"height"!==t||(n=vd(n)),El(e,t,n,a)})),n(e)};const _d="setHtml",wd="customCode",Cd="setText",Ed="setAttribute",kd="setImageSource",xd="setStyle",Pd="move",Sd="resize",Id="rearrange",jd="remove",Td="insertAfter",Od="insertBefore",Dd="replaceHtml",Nd="prependHtml",Rd="appendHtml",Ld="click",Ad="collectInteractions";var Vd=()=>({[_d]:fd(Kl),[wd]:fd(Yl),[Cd]:fd(id),[Ed]:fd(ud),[kd]:fd(pd),[xd]:fd(dd),[Pd]:fd(bd),[Sd]:fd(yd),[Id]:fd(md),[jd]:fd(ut),[Td]:fd(ld),[Od]:fd(sd),[Dd]:fd(cd),[Nd]:fd(Yl),[Rd]:fd(Ql),[Ad]:fd(hd)}),Md=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:n=[],propositionAction:a,documentMayUnload:o=!1,eventType:r=Qc,propositionEventTypes:i=[ol(r)],viewName:s})=>{const c=e.createEvent(),l={eventType:r};return s&&(l.web={webPageDetails:{viewName:s}}),qe(n)&&t(c,n,i,a),c.mergeXdm(l),o&&c.documentMayUnload(),e.sendEvent(c)};const qd="personalization:decisions";var $d=({logger:e,prehidingStyle:t,showContainers:n,hideContainers:a,mergeQuery:o,processPropositions:r,createProposition:i,notificationHandler:s,consent:c})=>({cacheUpdate:l,personalizationDetails:d,event:u,onResponse:p})=>{const{state:m,wasSet:g}=c.current();"out"===m&&g||(d.isRenderDecisions()?a(t):n()),o(u,d.createQueryDetails());const f=s(d.isRenderDecisions(),d.isSendDisplayEvent(),d.getViewName());p((({response:t})=>{const a=t.getPayloadsByType(qd);qe(a)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:d.createQueryDetails()}});const o=a.map((e=>i(e))),{page:s=[],view:c=[],proposition:u=[]}=kt(o,(e=>e.getScopeType())),p=l.update(c);let m,g,v;return d.isRenderDecisions()?(({render:m,returnedPropositions:g,returnedDecisions:v}=r([...s,...p],u)),qe(s)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:Co,propositions:s.map((e=>e.toJSON()))}}),qe(p)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${d.getViewName()}.`,logLevel:"info",detail:{scope:d.getViewName(),propositions:p.map((e=>e.toJSON()))}}),m().then(f),n()):({returnedPropositions:g,returnedDecisions:v}=r([],[...s,...p,...u])),{propositions:g,decisions:v}}))},Ud=(e,t)=>{if(pl(e))return dt(e,t);const n=hl(e);let a=!1;for(let e=0;e<n.length;e+=1)if(n[e]===t){a=!0;break}return a};const Fd="view",Bd="page",Hd="proposition",zd=e=>e.map((e=>{const{trackingLabel:t,scopeType:n,...a}=e;return a})),Wd=e=>e.filter(((t,n)=>{const a=JSON.stringify(t);return n===e.findIndex((e=>JSON.stringify(e)===a))})),Jd=(e,t,n)=>{const{documentElement:a}=document;let o=e,r=0;for(;o&&o!==a;){if(Ud(t,o)){const e=n(t),a={metas:e},o=e.find((e=>e.trackingLabel));o&&(a.label=o.trackingLabel,a.weight=r);const i=e.find((e=>e.scopeType===Fd));return i&&(a.viewName=i.scope,a.weight=r),a}o=o.parentNode,r+=1}return{metas:null}};var Gd=(e,t,n)=>{const a=[];let o,r="",i=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;for(let c=0;c<t.length;c+=1){const{metas:l,label:d,weight:u,viewName:p}=Jd(e,t[c],n);l&&(d&&u<=i&&(r=d,i=u),p&&u<=s&&(o=p,s=u),a.push(...zd(l)))}return{decisionsMeta:Wd(a),propositionActionLabel:r,propositionActionToken:void 0,viewName:o}},Qd=(e=document)=>-1!==e.location.href.indexOf("adobe_authoring_enabled");const Xd=(e,t,n,a)=>{if(0===t.length)return;const o={};n.forEach((e=>{o[e]=el}));const r={_experience:{decisioning:{propositions:t,propositionEventType:o}}};a&&(r._experience.decisioning.propositionAction=a),e.mergeXdm(r)},Kd=(e,t)=>{e.mergeQuery({personalization:{...t}})},Yd=(e,t)=>{if(!t&&!e)return;const n={};return e&&(n.label=e),t&&(n.tokens=[t]),n};var Zd=({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:n,getInteractionMetas:a,getClickMetas:o,getClickSelectors:r,autoCollectPropositionInteractions:i})=>({event:s,clickedElement:c})=>{const l=[];let d,u,p;if([t(c,a,i),n(c,r(),o)].forEach((({decisionsMeta:e,propositionActionLabel:t,propositionActionToken:n,viewName:a})=>{Array.prototype.push.apply(l,e),!d&&t&&(d=t),!u&&n&&(u=n),!p&&a&&(p=a)})),qe(l)){const t={eventType:Xc};p&&(t.web={webPageDetails:{viewName:p}}),s.mergeXdm(t),e(s,l,[tl.INTERACT],Yd(d,u))}},eu=({createProposition:e})=>{let t=!1,n=Promise.resolve({});const a=(t,n)=>{const a=t[n.toLowerCase()];return a&&a.length>0?a:[e({scope:n,scopeDetails:{characteristics:{scopeType:Fd}},items:[{schema:Ac}]},!1)]};return{createCacheUpdate:e=>{const o=Ee();return t=!0,n=n.then((e=>o.promise.then((t=>({...e,...t}))).catch((()=>e)))),{update(t){const n=t.filter((e=>e.getScope())),r=kt(n,(e=>e.getScope().toLowerCase()));return o.resolve(r),e?a(r,e):[]},cancel(){o.reject()}}},getView:e=>n.then((t=>a(t,e))),isInitialized:()=>t}},tu=({processPropositions:e,viewCache:t,logger:n})=>({personalizationDetails:a,onResponse:o})=>{let r,i;const s=a.getViewName();return o((()=>({propositions:r,decisions:i}))),t.getView(s).then((t=>{let o;return a.isRenderDecisions()?(({render:o,returnedPropositions:r,returnedDecisions:i}=e(t)),n.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${s}.`,logLevel:"info",detail:{scope:s,propositions:t.map((e=>e.toJSON()))}}),o()):(({returnedPropositions:r,returnedDecisions:i}=e([],t)),[])}))};const nu=e=>Object.keys(e).map((t=>({id:t,...e[t]})));var au=()=>{const e={};return{storeClickMeta:({selector:t,meta:{id:n,scope:a,scopeDetails:o,trackingLabel:r,scopeType:i}})=>{e[t]||(e[t]={}),e[t][n]={scope:a,scopeDetails:o,trackingLabel:r,scopeType:i}},getClickSelectors:()=>Object.keys(e),getClickMetas:t=>e[t]?nu(e[t]):{}}},ou=()=>{const e={},t={};return{storeInteractionMeta:(n,a,o,r,i)=>{i=parseInt(i,10),e[i]||(e[i]={},t[i]={}),t[i][n]||(t[i][n]=new Set),t[i][n].add(a),e[i][n]={...r,scopeType:o}},getInteractionMetas:n=>Array.isArray(n)&&0!==n.length?Object.values(n.map((e=>parseInt(e,10))).reduce(((n,a)=>(Object.keys(e[a]||{}).forEach((o=>{n[o]||(n[o]={proposition:e[a][o],items:new Set}),n[o].items=new Set([...n[o].items,...t[a][o]])})),n)),{})).map((({proposition:e,items:t})=>({...e,items:Array.from(t).map((e=>({id:e})))}))):[]}};const ru=(e,t)=>e===qc&&t===Ad,iu={[Vc]:()=>!0,[Mc]:()=>!0,[qc]:ru,[Fc]:()=>!0,[Ac]:()=>!0},su=(e,t)=>"function"==typeof iu[e]&&iu[e](e,t);var cu=({processPropositions:e,createProposition:t,renderedPropositions:n,viewCache:a})=>{const o=({items:e,metadataForScope:t={}})=>{const{actionType:n,selector:a}=t;return e.filter((e=>su(e.schema,n))).map((e=>{const{schema:o}=e;return o===Mc||ru(o,n)?ft(t)?void 0:{...e,schema:ru(o,n)?Vc:o,data:{...e.data,selector:a,type:n}}:{...e}})).filter((e=>e))},r=e=>!(e.scope===Co&&e.renderAttempted),i=({propositions:e,metadata:t})=>e.filter(r).map((e=>{if(qe(e.items)){const{id:n,scope:a,scopeDetails:r}=e;return{id:n,scope:a,scopeDetails:r,items:o({items:e.items,metadataForScope:t[e.scope]})}}return e})).filter((e=>qe(e.items)));return({propositions:o=[],metadata:r={},viewName:s})=>{const c=Ee();n.concat(c.promise);const l=i({propositions:o,metadata:r}).map((e=>t(e)));return Promise.resolve().then((()=>s?a.getView(s):[])).then((t=>{const{render:n,returnedPropositions:a}=e([...l,...t]);return n().then(c.resolve),{propositions:a}}))}},lu=({window:e})=>()=>e.location,du=({targetMigrationEnabled:e})=>e?e=>{e.getPayload().mergeMeta({target:{migration:!0}})}:Xt;const uu="BODY > *:eq(0)";var pu=e=>{const{selector:t,type:n}=e;return n!==wd||t!==uu?e:{...e,selector:"BODY"}};const mu="SCRIPT,LINK,STYLE",gu=e=>{const t=ll(e);return Ge(mu,t).map((e=>e.outerHTML)).join("")};var fu=e=>{const t={...e},{content:n,selector:a}=t;if(ec(n))return t;if(null==a)return t;const o=hl(a);return Fl(o[0],Ae)?(t.type=Rd,t.content=gu(n),t):t},vu=e=>t=>t?e.reduce(((e,t)=>({...e,...t(e)})),t):t,bu=({preprocess:e,isPageWideSurface:t})=>{const n=(t,n)=>{const{id:a,schema:o,data:r,characteristics:{trackingLabel:i}={}}=t,s=r?r.type:void 0,c=e(r);return{getId:()=>a,getSchema:()=>o,getSchemaType:()=>s,getData:()=>c,getProposition:()=>n,getTrackingLabel:()=>i,getOriginalItem:()=>t,toString:()=>JSON.stringify(t),toJSON:()=>t}};return(e,a=!0,o=!1)=>{const{id:r,scope:i,scopeDetails:s,items:c=[]}=e,{characteristics:{scopeType:l}={}}=s||{};return{getScope:()=>i,getScopeType:()=>i===Co||t(i)?Bd:l===Fd?Fd:Hd,getItems(){return c.map((e=>n(e,this)))},getNotification:()=>({id:r,scope:i,scopeDetails:s}),getId:()=>r,toJSON:()=>e,shouldSuppressDisplay:()=>o,addToReturnValues(t,n,o,r){a&&(t.push({...e,items:o.map((e=>e.getOriginalItem())),renderAttempted:r}),r||n.push({...e,items:o.map((e=>e.getOriginalItem()))}))}}}},hu=()=>{let e=Promise.resolve([]);return{concat(t){e=e.then((e=>t.then((t=>e.concat(t))).catch((()=>e))))},clear(){const t=e;return e=Promise.resolve([]),t}}},yu=()=>({render:Xt,setRenderAttempted:!0,includeInNotification:!0});const _u="always",wu="never",Cu="decoratedElementsOnly",Eu=[_u,wu,Cu],ku="data-aep-interact-id",xu="data-aep-click-label",Pu="data-aep-click-token";let Su=0;const Iu=(e,t)=>t?parseInt(t,10):++Su,ju=(e,t)=>!!e&&!!e[t]&&[_u,Cu].includes(e[t]),Tu=(e,t,n,a,o,r,i,s)=>{const{scopeDetails:c={}}=i,{decisionProvider:l}=c;return ju(e,l)||t===Ld?e=>{if(!e.tagName)return;const t=Iu(n,wl(e,ku));s(n,a,r,i,t),_l(e,ku,t),o&&!wl(e,xu)&&_l(e,xu,o)}:Xt};var Ou=({modules:e,logger:t,storeInteractionMeta:n,storeClickMeta:a,autoCollectPropositionInteractions:o})=>r=>{const{type:i,selector:s}=r.getData()||{};if(!i)return t.warn("Invalid DOM action data: missing type.",r.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(i===Ld)return s?(a({selector:s,meta:{...r.getProposition().getNotification(),trackingLabel:r.getTrackingLabel(),scopeType:r.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",r.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[i])return t.warn("Invalid DOM action data: unknown type.",r.getData()),{setRenderAttempted:!1,includeInNotification:!1};const c=Tu(o,i,r.getProposition().getId(),r.getId(),r.getTrackingLabel(),r.getProposition().getScopeType(),r.getProposition().getNotification(),n);return{render:()=>e[i](r.getData(),c),setRenderAttempted:!0,includeInNotification:!0}},Du=({modules:e,logger:t,storeInteractionMeta:n,autoCollectPropositionInteractions:a})=>o=>{const{type:r,selector:i}=o.getData()||{};if(!i||!r)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[r])return t.warn("Invalid HTML content data",o.getData()),{setRenderAttempted:!1,includeInNotification:!1};const s=Tu(a,r,o.getProposition().getId(),o.getId(),o.getTrackingLabel(),o.getProposition().getScopeType(),o.getProposition().getNotification(),n);return{render:()=>e[r](o.getData(),s),setRenderAttempted:!0,includeInNotification:!0}};const Nu="BODY";var Ru=({logger:e,executeRedirect:t,collect:n})=>a=>{const{content:o}=a.getData()||{};return o?{render:()=>(nd(Nu),n({decisionsMeta:[a.getProposition().getNotification()],documentMayUnload:!0}).then((()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:a.getProposition().getNotification(),redirect:o},message:`Redirect action ${a.toString()} executed.`,logLevel:"info"}),t(o)))).catch((e=>{throw ad(Nu),e}))),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",a.getData()),{})},Lu=({schemaProcessors:e,logger:t})=>{const n=(e,n)=>()=>Promise.resolve().then(e).then((()=>(t.enabled&&t.info(`Action ${n.toString()} executed.`),n.toJSON()))).catch((e=>{
const{message:a,stack:o}=e,r=`Failed to execute action ${n.toString()}. ${a} ${o}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:n.getProposition().getNotification(),item:n.toJSON()},error:e,message:r,logLevel:"warn"})})),a=async(e,t)=>{const n=(await Promise.allSettled(e.map((e=>e())))).filter((e=>"fulfilled"===e.status)).map((e=>e.value));if(t&&qe(n))return{...t,items:n}},o=t=>{const n=e[t.getSchema()];return n?n(t):{}},r=({renderers:e,returnedPropositions:t,returnedDecisions:r,items:i,proposition:s})=>{let c,l,d,u,p=[...e],m=[...t],g=[...r],f=[],v=[],b=[],h=!1,y=!1,_=0;for(;i.length>_;){if(u=i[_],({render:c,setRenderAttempted:l,includeInNotification:d,onlyRenderThis:y}=o(u)),y){m=[],g=[],l?(f=[u],v=[]):(f=[],v=[u]),p=[],b=[c],h=d;break}c&&b.push(n(c,u)),d&&(h=!0),l?f.push(u):v.push(u),_+=1}if(b.length>0){const e=h?s.getNotification():void 0;p.push((()=>a(b,e)))}else h&&p.push((()=>Promise.resolve(s.getNotification())));return f.length>0&&s.addToReturnValues(m,g,f,!0),v.length>0&&s.addToReturnValues(m,g,v,!1),{renderers:p,returnedPropositions:m,returnedDecisions:g,onlyRenderThis:y}};return(e,n=[])=>{let a,o,i,s=[],c=[],l=[],d=0;for(;e.length>d&&(o=e[d],i=o.getItems(),({renderers:s,returnedPropositions:c,returnedDecisions:l,onlyRenderThis:a}=r({renderers:s,returnedPropositions:c,returnedDecisions:l,items:i,proposition:o})),!a);)d+=1;return a&&e.forEach(((e,t)=>{t!==d&&e.addToReturnValues(c,l,e.getItems(),!1)})),n.forEach((e=>{e.addToReturnValues(c,l,e.getItems(),!1)})),{returnedPropositions:c,returnedDecisions:l,render:()=>Promise.all(s.map((e=>e()))).then((e=>{const n=e.filter((e=>e)),a=n.map((e=>{const{id:t,scope:n,scopeDetails:a}=e;return{id:t,scope:n,scopeDetails:a}}));if(qe(n)){const e=kt(n,(e=>e.scope));t.logOnContentRendering({status:"rendering-succeeded",detail:{...e},message:`Scopes: ${JSON.stringify(e)} successfully executed.`,logLevel:"info"})}return a}))}}};const Au=()=>{let e=0;return t=>{const{items:n=[]}=t;return!!n.some((e=>e.schema===Fc))&&(e+=1,e>1)}};var Vu=({processPropositions:e,createProposition:t,notificationHandler:n})=>({renderDecisions:a,propositions:o,event:r,personalization:i={}})=>{if(!a)return Promise.resolve();const{sendDisplayEvent:s=!0}=i,c=r?r.getViewName():void 0,l=Au(),d=o.map((e=>t(e,!0,l(e)))),{render:u,returnedPropositions:p}=e(d),m=n(a,s,c),g=d.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return u().then((e=>{const t=e.filter((e=>!g[e.id].shouldSuppressDisplay())),n=e.filter((e=>g[e.id].shouldSuppressDisplay()));m(t,n)})),Promise.resolve({propositions:p})};const Mu="text/html",qu="application/json",$u="defaultContent",Uu=["content","contentType"],Fu=["mobileParameters","webParameters","html"],Bu=(e,t)=>{for(let n=0;n<Uu.length;n+=1){const a=Uu[n];if(!Object.prototype.hasOwnProperty.call(e,a))return t.warn(`Invalid in-app message data: missing property '${a}'.`,e),!1}const{content:n,contentType:a}=e;if(a===qu)for(let a=0;a<Fu.length;a+=1){const o=Fu[a];if(!Object.prototype.hasOwnProperty.call(n,o))return t.warn(`Invalid in-app message data.content: missing property '${o}'.`,e),!1}return!0};var Hu=({modules:e,logger:t})=>n=>{const a=n.getData(),o=n.getProposition(),r={...o.getNotification()},i=o.shouldSuppressDisplay();if(!a)return t.warn("Invalid in-app message data: undefined.",a),{};const{type:s=$u}=a;return e[s]?Bu(a,t)?r?{render:()=>i?null:e[s]({...a,meta:r}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",r),{}):{}:(t.warn("Invalid in-app message data: unknown type.",a),{})};const zu=e=>{const t=Ge(`#${e}`,document);t&&t.length>0&&ut(t[0])},Wu=e=>{const t={};if(!e||"a"!==e.tagName.toLowerCase())return t;const{href:n}=e;if(!n||!n.startsWith("adbinapp://"))return t;const a=n.split("?"),o=a[0].split("://")[1],r=e.innerText,i=e.getAttribute("data-uuid")||"";let s,c;if(qe(a)){const e=de.default.parse(a[1]);s=e.interaction||"",c=ni(e.link||"")}return{action:o,interaction:s,link:c,label:r,uuid:i}};var Ju=e=>(t,n=!1)=>(n?e.location.href=t:e.location.replace(t),new Promise((()=>{})));const Gu="alloy-messaging-container",Qu="alloy-overlay-container",Xu="alloy-content-iframe",Ku=()=>[Gu,Qu].forEach(zu),Yu=(e,t=Ju(window))=>n=>{n.preventDefault(),n.stopImmediatePropagation();const{target:a}=n,o="a"===a.tagName.toLowerCase()?a:a.closest("a");if(!o)return;const{action:r,interaction:i,link:s,label:c,uuid:l}=Wu(o);e(r,{label:c,id:i,uuid:l,link:s}),"dismiss"===r&&Ku(),Qt(s)&&s.length>0&&t(s,!0)},Zu=(e,t)=>{const n=(new DOMParser).parseFromString(e,Mu),a=n.querySelector("script");a&&a.setAttribute("nonce",Dl());const o=je("iframe",{src:URL.createObjectURL(new Blob([n.documentElement.outerHTML],{type:"text/html"})),id:Xu});return o.addEventListener("load",(()=>{const{addEventListener:e}=o.contentDocument||o.contentWindow.document;e("click",t)})),o},ep=(e,t,n,a)=>{[{id:Qu,element:a},{id:Gu,element:n},{id:Xu,element:e}].forEach((({id:e,element:n})=>{const{style:a={},params:o={}}=t[e];n.style={...n.style,...a};const{parentElement:r="body",insertionMethod:i="appendChild",enabled:s=!0}=o,c=document.querySelector(r);s&&c&&"function"==typeof c[i]&&c[i](n)}))},tp=e=>{const{verticalAlign:t,width:n,horizontalAlign:a,backdropColor:o,height:r,cornerRadius:i,horizontalInset:s,verticalInset:c,uiTakeover:l=!1}=e,d={width:n?`${n}%`:"100%",backgroundColor:o||"rgba(0, 0, 0, 0.5)",borderRadius:i?`${i}px`:"0px",border:"none",position:l?"fixed":"relative",overflow:"hidden"};return"left"===a?d.left=s?`${s}%`:"0":"right"===a?d.right=s?`${s}%`:"0":"center"===a&&(d.left="50%",d.transform="translateX(-50%)"),"top"===t?d.top=c?`${c}%`:"0":"bottom"===t?(d.position="fixed",d.bottom=c?`${c}%`:"0"):"center"===t&&(d.top="50%",d.transform=("center"===a?`${d.transform} `:"")+"translateY(-50%)",d.display="flex",d.alignItems="center",d.justifyContent="center"),d.height=r?`${r}vh`:"100%",d},np=e=>{const{backdropOpacity:t,backdropColor:n}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:n||"#FFFFFF"}},ap=["enabled","parentElement","insertionMethod"],op=e=>{if(!e)return!1;const t=Object.keys(e);if(!t.includes(Gu))return!1;if(!t.includes(Qu))return!1;const n=Object.values(e);for(let e=0;e<n.length;e+=1){if(!ka(n[e],"style"))return!1;if(!ka(n[e],"params"))return!1;for(let t=0;t<ap.length;t+=1)if(!ka(n[e].params,ap[t]))return!1}return!0},rp=e=>{if(!e)return;const{uiTakeover:t=!1}=e;return{[Xu]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[Gu]:{style:tp(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[Qu]:{style:np(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}}}},ip=(e={},t)=>{Ku();const{content:n,contentType:a,mobileParameters:o}=e;let{webParameters:r}=e;if(a!==Mu)return;const i=je("div",{id:Gu}),s=Zu(n,Yu(t)),c=je("div",{id:Qu});op(r)||(r=rp(o)),r&&ep(s,r,i,c)};var sp=(e,t)=>new Promise((n=>{const{meta:a}=e;ip(e,((e,n)=>{const o={};o[tl.INTERACT]=el,-1!==Object.values(tl).indexOf(e)&&(o[e]=el),t({decisionsMeta:[a],propositionAction:n,eventType:Xc,propositionEventTypes:Object.keys(o)})})),n({meta:a})})),cp=e=>({defaultContent:t=>sp(t,e)}),lp=(e,t)=>(n,a,o)=>{if(!n)return()=>{};if(!a){const e=Ee();return t.concat(e.promise),e.resolve}return(t=[],n=[])=>{qe(t)&&e({decisionsMeta:t,viewName:o}),qe(n)&&e({decisionsMeta:n,eventType:Zc,propositionAction:{reason:"Conflict"},viewName:o})}},dp=({showContainers:e,consent:t})=>()=>{const{state:n,wasSet:a}=t.current();n===$a&&a?e():t.awaitConsent().catch(e)};const up=e=>{const{documentElement:t}=document;let n=e;const a=new Set;let o,r;for(;n&&n!==t;){const e=wl(n,ku);e&&a.add(e),o=o||wl(n,xu),r=r||wl(n,Pu),n=n.parentNode}return{interactIds:[...a],clickLabel:o,clickToken:r}},pp=e=>{const t=e.find((e=>e.scopeType===Fd));return t?t.scope:void 0},mp=(e,t,n)=>a=>{const{scopeDetails:o={}}=a,{decisionProvider:r}=o;return e[r]===_u||e[r]===Cu&&(t||n)};var gp=(e,t,n)=>{const{interactIds:a,clickLabel:o="",clickToken:r}=up(e),i=mp(n,o,r);if(0===a.length)return{};const s=t(a).filter(i);return{decisionsMeta:zd(s),propositionActionLabel:o,propositionActionToken:r,viewName:pp(s)}};const fp="AJO",vp="TGT",bp=({config:e,logger:t,eventManager:n,consent:a})=>{const{targetMigrationEnabled:o,prehidingStyle:r,autoCollectPropositionInteractions:i}=e,s=Md({eventManager:n,mergeDecisionsMeta:Xd}),c=rd(t),l=od(t),{storeInteractionMeta:d,getInteractionMetas:u}=ou(),{storeClickMeta:p,getClickSelectors:m,getClickMetas:g}=au(),f=lu({window:window}),v=Vd(),b=vu([fu,pu]),h=bu({preprocess:b,isPageWideSurface:Rc}),y=eu({createProposition:h}),_=Ju(window),w={[Ac]:yu,[Vc]:Ou({modules:v,logger:t,storeInteractionMeta:d,storeClickMeta:p,autoCollectPropositionInteractions:i}),[Mc]:Du({modules:v,logger:t,storeInteractionMeta:d,autoCollectPropositionInteractions:i}),[Uc]:Ru({logger:t,executeRedirect:_,collect:s}),[Fc]:Hu({modules:cp(s),logger:t})},C=Lu({schemaProcessors:w,logger:t}),E=hu(),k=lp(s,E),x=$d({prehidingStyle:r,showContainers:c,hideContainers:l,mergeQuery:Kd,processPropositions:C,createProposition:h,notificationHandler:k,consent:a,logger:t}),P=Zd({mergeDecisionsMeta:Xd,collectInteractions:gp,collectClicks:Gd,getInteractionMetas:u,getClickMetas:g,getClickSelectors:m,autoCollectPropositionInteractions:i}),S=tu({processPropositions:C,viewCache:y,logger:t}),I=cu({processPropositions:C,createProposition:h,renderedPropositions:E,viewCache:y}),j=du({targetMigrationEnabled:o}),T=Vu({processPropositions:C,createProposition:h,notificationHandler:k}),O=dp({showContainers:c,consent:a});return cl({getPageLocation:f,logger:t,fetchDataHandler:x,viewChangeHandler:S,onClickHandler:P,isAuthoringModeEnabled:Qd,mergeQuery:Kd,viewCache:y,showContainers:c,applyPropositions:I,setTargetMigration:j,mergeDecisionsMeta:Xd,renderedPropositions:E,onDecisionHandler:T,handleConsentFlicker:O})};bp.namespace="Personalization";const hp=Eu.map((e=>wa(e)));bp.configValidators=ka({prehidingStyle:xa().nonEmpty(),targetMigrationEnabled:ya().default(!1),autoCollectPropositionInteractions:ka({[fp]:va(hp).default(_u),[vp]:va(hp).default(wu)}).default({[fp]:_u,[vp]:wu}).noUnknownFields()});const yp="personalization:decisions",_p=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,wp=(e,t={},n=[])=>(Object.keys(e).forEach((a=>{_p(e[a])||Array.isArray(e[a])?wp(e[a],t,[...n,a]):t[[...n,a].join(".")]=e[a]})),t);var Cp=e=>_p(e)?wp(e):e,Ep=({renderDecisions:e,decisionProvider:t,applyResponse:n,event:a,personalization:o,decisionContext:r})=>{const i={...Cp(a.getContent()),...r};return({response:r})=>{if(t.addPayloads(r.getPayloadsByType(yp)),!a.hasQuery())return{propositions:[]};const s=t.evaluate(i);return n({renderDecisions:e,propositions:s,event:a,personalization:o})}};const kp={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},xp={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},Pp={AND:"and",OR:"or"},Sp={ORDERED:"ordered"},Ip={[xp.EQUALS]:d(),[xp.NOT_EQUALS]:u(),[xp.EXISTS]:p(),[xp.NOT_EXISTS]:m(),[xp.GREATER_THAN]:f(),[xp.GREATER_THAN_OR_EQUAL_TO]:v(),[xp.LESS_THAN]:b(),[xp.LESS_THAN_OR_EQUAL_TO]:h(),[xp.CONTAINS]:y(),[xp.NOT_CONTAINS]:_(),[xp.STARTS_WITH]:w(),[xp.ENDS_WITH]:C()},jp=["iam.eventType","eventType","type"],Tp=["iam.id","id"],Op="TGT",Dp="DEFAULT",Np="ECID",Rp="<key>",Lp="<identity>",Ap=ee(ne,(e=>e.join("-"))),Vp=100,Mp=ee(ae),qp=(e,t)=>n=>{const a=e.getItem(t);if(!a)return n;try{return JSON.parse(a)}catch{return n}},$p=(e,t,n=(e=>e))=>a=>{e.setItem(t,JSON.stringify(n(a)))},Up=e=>{const t=new Date;return t.setDate(t.getDate()-e),t},Fp=e=>{const{scopeDetails:t={}}=e,{activity:n={}}=t,{id:a}=n;return a},Bp=()=>{const e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,n)=>{e[t]=n}}},Hp=e=>{e.clear()},zp=(e={})=>{const{_experience:t}=e;return!(!t||"object"!=typeof t)},Wp=e=>{const{scopeDetails:t={}}=e,{decisionProvider:n}=t;return n},Jp=(e=[])=>{const t=[];return Array.isArray(e)?(e.forEach((e=>{Array.isArray(e)?t.push(...Jp(e)):t.push(e)})),t):e};var Gp=(e,t,n)=>{const{html:a,mobileParameters:o}=n;return{schema:Fc,data:{mobileParameters:o,webParameters:{},content:a,contentType:Mu},id:e}},Qp=(e,t,n)=>{const{schema:a,data:o,id:r}=n;return{schema:a,data:o,id:r||e}};const Xp="cjmiam",Kp="schema",Yp={[Xp]:Gp,[Kp]:Qp};var Zp=()=>e=>{const{id:t,type:n,detail:a}=e;return"function"==typeof Yp[n]?Yp[n](t,n,a):a};const em=e=>{const{schema:t,data:n}=e;if(t===$c)return!0;if(t!==qc)return!1;try{const e="string"==typeof n.content?JSON.parse(n.content):n.content;return e&&Object.prototype.hasOwnProperty.call(e,"version")&&Object.prototype.hasOwnProperty.call(e,"rules")}catch{return!1}};var tm=(e,t,n)=>{const a=Zp(),o=Fp(e),r=[],i=e=>{const{data:t={},schema:n}=e,a=n===$c?t:t.content;a&&r.push(le("string"==typeof a?JSON.parse(a):a))},s=i=>{const s=t.getEvent(Qc,o),c=s?s.firstTimestamp:void 0,l=Jp(r.map((e=>e.execute(i)))).map(a).map((e=>{const{firstTimestamp:t}=n.recordQualified(o)||{};return{...e,data:{...e.data,qualifiedDate:t,displayedDate:c}}}));return{...e,items:l}};return Array.isArray(e.items)&&e.items.filter(em).forEach(i),{rank:e?.scopeDetails?.rank||1/0,evaluate:s,isEvaluable:r.length>0}},nm=({eventRegistry:e})=>({recordQualified:t=>{if(t)return e.addEvent({},tl.TRIGGER,t)}}),am=({eventRegistry:e})=>{const t={},n=nm({eventRegistry:e}),a=a=>{const o=Fp(a);if(!o)return;const r=tm(a,e,n);r.isEvaluable&&(t[o]=r)};return{addPayload:a,addPayloads:e=>{e.forEach(a)},evaluate:(e={})=>Object.values(t).sort((({rank:e},{rank:t})=>e-t)).map((t=>t.evaluate(e))).filter((e=>e.items.length>0))}},om=e=>({renderDecisions:t=!1,propositions:n=[],event:a,personalization:o})=>(e&&e.onDecision({renderDecisions:t,propositions:n,event:a,personalization:o}),{propositions:n});const rm="events",im=1e3,sm=30,cm=e=>`iam.${e}`,lm=(e=im,t=sm)=>n=>{const a={};return Object.keys(n).forEach((o=>{a[o]={},Object.values(n[o]).filter((e=>new Date(e.firstTimestamp)>=Up(t))).sort(((e,t)=>e.firstTimestamp-t.firstTimestamp)).slice(-1*e).forEach((e=>{a[o][e.event[cm("id")]]=e}))})),a};var dm=({storage:e})=>{let t,n,a,o=e;const r=e=>{o=e,t=qp(o,rm),n=$p(o,rm,lm(im,sm)),a=t({})};r(e);const i=(e,t,o,r)=>{if(!t||!o)return;a[t]||(a[t]={});const i=a[t][o],s=i?i.count:0,c=(new Date).getTime(),l=i?i.firstTimestamp||i.timestamp:c;return a[t][o]={event:{...e,[cm("id")]:o,[cm("eventType")]:t,[cm("action")]:r},firstTimestamp:l,timestamp:c,count:s+1},n(a),a[t][o]};return{addExperienceEdgeEvent:e=>{const{xdm:t={}}=e.getContent(),{_experience:n}=t;if(!zp(t))return;const{decisioning:a={}}=n,{propositionEventType:o={},propositionAction:r={},propositions:s=[]}=a,c=Object.keys(o);if(0===c.length)return;const l=e=>o[e]===el,{id:d}=r;c.filter(l).forEach((e=>{s.forEach((t=>{Wp(t)===fp&&i({},e,Fp(t),d)}))}))},addEvent:i,getEvent:(e,t)=>{if(a[e])return a[e][t]},toJSON:()=>a,setStorage:r}},um=({eventRegistry:e,window:t,getBrowser:n})=>{const a=(new Date).getTime(),o=()=>({title:t.title,url:t.url,...Zt(t.url)}),r=()=>({url:t.referrer,...Zt(t.referrer)}),i=()=>{const e=new Date,t=e.getTime();return{pageLoadTimestamp:a,currentTimestamp:t,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:t-a,"~timestampu":t/1e3,"~timestampz":e.toISOString()}},s=()=>({height:t.height,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}),c={browser:{name:n()},page:o(),referringPage:r()},l=()=>({...c,...i(),window:s(),"~sdkver":_r});return{getContext:(t={})=>{const n={...l(),...t};return{...Cp(n),events:e.toJSON()}}}};const pm=(e,...t)=>t,mm=()=>!0,gm=()=>{let e=pm,t=mm,n=0;const a={},o=e=>()=>{delete a[e]},r=(e,t)=>"function"!=typeof e?()=>{}:(n+=1,a[n]={callback:e,params:t},{id:n,unsubscribe:o(n)}),i=(...n)=>{Object.values(a).forEach((({callback:a,params:o})=>{const r=e(o,...n);t(o,...r)&&a(...r)}))},s=(n,...o)=>{if(!n||!a[n])return;const{callback:r,params:i}=a[n],s=e(i,...o);t(i,...s)&&r(...s)};return{add:r,emit:i,emitOne:s,hasSubscriptions:()=>Object.keys(a).length>0,setEmissionPreprocessor:t=>{"function"==typeof t&&(e=t)},setEmissionCondition:e=>{"function"==typeof e&&(t=e)}}},fm=({options:e})=>ka({surfaces:ha(xa()).uniqueItems(),schemas:ha(xa()).uniqueItems(),callback:_a().required()}).noUnknownFields()(e),vm=e=>{const{id:t,scope:n,scopeDetails:a}=e;return{id:t,scope:n,scopeDetails:a}};var bm=({collect:e})=>{let t=()=>{};const n=new Set,a=e=>[tl.INTERACT,tl.DISMISS].includes(e),o=(e,t,o)=>{const r=[e,t].join("-"),i=!o.has(r)&&(a(e)||!n.has(r));return o.add(r),n.add(r),i},r=(t,n=[])=>{if(!(n instanceof Array))return Promise.resolve();if(!Object.values(tl).includes(t))return Promise.resolve();const a=[],r=new Set;return n.forEach((e=>{const n=vm(e);o(t,n.id,r)&&a.push(n)})),a.length>0?e({decisionsMeta:a,eventType:rl(t),documentMayUnload:!0}):Promise.resolve()},i=gm(),s=(e,t)=>{const{surfacesFilter:n,schemasFilter:a}=e;return[{propositions:t.filter((e=>!n||n.includes(e.scope))).map((e=>{const{items:t=[]}=e;return{...e,items:t.filter((e=>!a||a.includes(e.schema)))}})).filter((e=>e.items.length>0))},r]};i.setEmissionPreprocessor(s);const c=({surfaces:e,schemas:n,callback:a})=>{const{id:o,unsubscribe:r}=i.add(a,{surfacesFilter:e instanceof Array?e:void 0,schemasFilter:n instanceof Array?n:void 0});return t(o),Promise.resolve({unsubscribe:r})};return{refresh:e=>{t=t=>{t?i.emitOne(t,e):i.emit(e)},t()},command:{optionsValidator:e=>fm({options:e}),run:c}}};const hm={TYPE:"~type",SOURCE:"~source"},ym={EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},_m={REQUEST:"com.adobe.eventSource.requestContent"},wm=({options:e})=>ka({renderDecisions:ya(),personalization:ka({decisionContext:ka({})})}).noUnknownFields()(e);var Cm=({contextProvider:e,decisionProvider:t})=>({optionsValidator:e=>wm({options:e}),run:({renderDecisions:n,decisionContext:a,applyResponse:o})=>o({renderDecisions:n,propositions:t.evaluate(e.getContext(a))})});const Em=({config:e,eventManager:t,createNamespacedStorage:n,consent:a,getBrowser:o})=>{const{orgId:r,personalizationStorageEnabled:i}=e,s=Md({eventManager:t,mergeDecisionsMeta:Xd}),c=n(`${Ct(r)}.decisioning.`);i||Hp(c.persistent);const l=dm({storage:Bp()}),d=am({eventRegistry:l}),u=um({eventRegistry:l,window:window,getBrowser:o}),p=Cm({contextProvider:u,decisionProvider:d}),m=bm({collect:s});let g;return{lifecycle:{onDecision({propositions:e}){m.refresh(e)},onComponentsRegistered(e){g=om(e.lifecycle),i&&a.awaitConsent().then((()=>{l.setStorage(c.persistent)})).catch((()=>{c&&Hp(c.persistent)}))},onBeforeEvent({event:e,renderDecisions:t,personalization:n={},onResponse:a=Xt}){const{decisionContext:o={}}=n;a(Ep({renderDecisions:t,decisionProvider:d,applyResponse:g,event:e,personalization:n,decisionContext:u.getContext({[hm.TYPE]:ym.EDGE,[hm.SOURCE]:_m.REQUEST,...o})}))},onBeforeRequest({request:e}){const t=e.getPayload().toJSON(),{events:n=[]}=t;0!==n.length&&n.forEach((e=>l.addExperienceEdgeEvent(e)))}},commands:{evaluateRulesets:{run:({renderDecisions:e,personalization:t={}})=>{const{decisionContext:n={}}=t;return p.run({renderDecisions:e,decisionContext:{[hm.TYPE]:ym.RULES_ENGINE,[hm.SOURCE]:_m.REQUEST,...n},applyResponse:g})},optionsValidator:p.optionsValidator},subscribeRulesetItems:m.command}}};Em.namespace="RulesEngine",Em.configValidators=ka({personalizationStorageEnabled:ya().default(!1)});var km=ka({streamingMedia:ka({channel:xa().nonEmpty().required(),playerName:xa().nonEmpty().required(),appVersion:xa(),mainPingInterval:Ca().minimum(10).maximum(50).default(10),adPingInterval:Ca().minimum(1).maximum(10).default(10)}).noUnknownFields()}),xm=({options:e})=>va([ka({playerId:xa().required(),getPlayerDetails:_a().required(),xdm:ka({mediaCollection:ka({sessionDetails:ka(ba()).required()})}),edgeConfigOverrides:ka({})}).required(),ka({xdm:ka({mediaCollection:ka({playhead:Ca().required(),sessionDetails:ka(ba()).required()})}),edgeConfigOverrides:ka({})}).required()],"Error validating the createMediaSession command options.")(e),Pm=({options:e})=>va([ka({playerId:xa().required(),xdm:ka({eventType:Pa(...Object.values(Ws)).required(),mediaCollection:ka(ba())}).required()}).required(),ka({xdm:ka({eventType:Pa(...Object.values(Ws)).required(),mediaCollection:ka({playhead:Ca().integer().required(),sessionID:xa().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e),Sm=({config:e,trackMediaEvent:t,trackMediaSession:n,mediaResponseHandler:a})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Xt}){if(!e)return;const{legacy:n,playerId:o,getPlayerDetails:r}=e;n||t((({response:e})=>a({playerId:o,getPlayerDetails:r,response:e})))}},commands:{createMediaSession:{optionsValidator:e=>xm({options:e}),run:n},sendMediaEvent:{optionsValidator:e=>Pm({options:e}),run:n=>e.streamingMedia?t(n):Promise.reject(new Error("Streaming media is not configured."))}}});const Im=({config:e,logger:t,eventManager:n,sendEdgeNetworkRequest:a,consent:o})=>{const r=Xs(),i=Gs({config:e,eventManager:n,consent:o,sendEdgeNetworkRequest:a,setTimestamp:hr((()=>new Date))}),s=Ys({mediaSessionCacheManager:r,mediaEventManager:i,config:e}),c=Zs({config:e,mediaEventManager:i,mediaSessionCacheManager:r}),l=tc({mediaSessionCacheManager:r,config:e,trackMediaEvent:s});return Sm({config:e,trackMediaEvent:s,mediaResponseHandler:l,trackMediaSession:c})};Im.namespace="Streaming media",Im.configValidators=km;const{console:jm}=window,Tm=Ft(window),Om=(e={})=>{const t=ka({name:xa().default("alloy"),monitors:ha(ka({})).default([]),components:ha(_a())}).noUnknownFields(),{name:n,monitors:a,components:o}=t(e),r=()=>(window.__alloyMonitors||[]).concat(a),i=Ta({console:jm,locationSearch:window.location.search,createLogger:wo,instanceName:n,createNamespacedStorage:Tm,getMonitors:r}),s=Li({instanceName:n,logController:i,components:o});return i.logger.logOnInstanceCreated({instance:s}),s};t.createCustomInstance=Om,t.components=[xs,js,Fs,zs,vc,bp,Em,Im]}},"adobe-alloy/dist/lib/actions/updateVariable/createUpdateVariable.js":{script:function(e,t,n){"use strict";const{deletePath:a}=n("../../utils/pathUtils");e.exports=({variableStore:e,deepAssign:t})=>({data:n,dataElementId:o,transforms:r,customCode:i},s)=>{var c;const l=Object.keys(r||{}).reduce(((e,t)=>{const{clear:n}=r[t];return n?a(e,t):e}),e[o]||{});e[o]=t({},l,n),i&&i(e[o],s);const d=(null===(c=e[o])||void 0===c?void 0:c.__adobe)||{};return d.audienceManager&&(d.audiencemanager=d.audienceManager,delete d.audienceManager),Promise.resolve()}}},"adobe-alloy/dist/lib/utils/pathUtils.js":{script:function(e,t){"use strict";const n=/^-?[0-9]+$/,a=e=>e.split(".").map((e=>n.test(e)?parseInt(e,10):e)).filter((e=>""!==e)),o=e=>{const t=e||{};return"object"!=typeof t?{}:t},r=e=>{const t=e||[];return Array.isArray(t)?t:[]},i=(e,t,n)=>{if("number"==typeof t){const a=e.slice();return a[t]=n,a}return{...e,[t]:n}},s=(e,t)=>{if("number"==typeof t)return[...e.slice(0,t),...e.slice(t+1)];const n={...e};return delete n[t],n},c=(e,t,n,a,s)=>{if(a===n.length)return s(e,t);let l,d=n[a];return"number"==typeof d?(l=r(e[t]),d=d<0?l.length+d:d,d=d<0?0:d):l=o(e[t]),i(e,t,c(l,d,n,a+1,s))},l=e=>(t,n,o)=>c({value:t},"value",a(n),0,((t,n)=>e(t,n,o))).value;t.setValue=l(i),t.deletePath=l(s)}},"adobe-alloy/dist/lib/actions/sendEvent/createSendEvent.js":{script:function(e,t,n){"use strict";const a=n("../../utils/clone");e.exports=({instanceManager:e,sendEventCallbackStorage:t,getConfigOverrides:n})=>o=>{const{instanceName:r,...i}=o;i.edgeConfigOverrides=n(i);const s=e.getInstance(r);if(!s)throw new Error(`Failed to send event for instance "${r}". No matching instance was configured with this name.`);return i.xdm&&(i.xdm=a(i.xdm)),i.data&&(i.data=a(i.data)),s("sendEvent",i).then((e=>{t.triggerEvent(e)}))}}},"adobe-alloy/dist/lib/utils/createGetConfigOverrides.js":{script:function(e){"use strict";const t=e=>t=>{var n,a,o,r;const{edgeConfigOverrides:i}=t;let s;if(i){if(i[e])s={...i[e]};else{if(i.development||i.staging||i.production)return;s=i}if(0!==Object.keys(s).length&&!1!==s.enabled){if(delete s.enabled,(null===(n=s.com_adobe_analytics)||void 0===n||null===(n=n.reportSuites)||void 0===n?void 0:n.length)>0&&(s.com_adobe_analytics.reportSuites=s.com_adobe_analytics.reportSuites.flatMap((e=>e.includes(",")?e.split(/,\s*/gi):e)).map((e=>e.trim())).filter(Boolean)),void 0!==(null===(a=s.com_adobe_identity)||void 0===a?void 0:a.idSyncContainerId)&&null!==(null===(o=s.com_adobe_identity)||void 0===o?void 0:o.idSyncContainerId)&&"string"==typeof(null===(r=s.com_adobe_identity)||void 0===r?void 0:r.idSyncContainerId)){const e=parseInt(s.com_adobe_identity.idSyncContainerId.trim(),10);if(Number.isNaN(e))throw new Error(`The ID sync container ID "${s.com_adobe_identity.idSyncContainerId}" is not a valid integer.`);s.com_adobe_identity.idSyncContainerId=e}return s}}};e.exports=t}},"adobe-alloy/dist/lib/utils/clone.js":{script:function(e){"use strict";e.exports=e=>JSON.parse(JSON.stringify(e))}},"adobe-alloy/dist/lib/instanceManager/createInstanceManager.js":{script:function(e){"use strict";e.exports=({turbine:e,window:t,createCustomInstance:n,components:a,createEventMergeId:o,orgId:r,wrapOnBeforeEventSend:i,getConfigOverrides:s})=>{const{instances:c}=e.getExtensionSettings(),l={},d={};return t.__alloyMonitors=t.__alloyMonitors||[],t.__alloyMonitors.push({onInstanceCreated:(...e)=>{d.onInstanceCreated||=[],d.onInstanceCreated.push(e)},onInstanceConfigured:(...e)=>{d.onInstanceConfigured||=[],d.onInstanceConfigured.push(e)},onBeforeCommand(...e){const{commandName:t}=e[0];"configure"===t&&(d.onBeforeCommand||=[],d.onBeforeCommand.push(e))}}),c.forEach((({name:o,edgeConfigId:c,stagingEdgeConfigId:d,developmentEdgeConfigId:u,onBeforeEventSend:p,...m})=>{const g=n({name:o,components:a});t[o]=g,t.__alloyNS||(t.__alloyNS=[]),t.__alloyNS.push(o),l[o]=g;const f=e.environment&&e.environment.stage,v="development"===f&&u||"staging"===f&&d||c;m.edgeConfigOverrides=s(m),g("configure",{...m,datastreamId:v,debugEnabled:e.debugEnabled,orgId:m.orgId||r,onBeforeEventSend:i(p)}),e.onDebugChanged((e=>{g("setDebug",{enabled:e})}))})),{getInstance:e=>l[e],createEventMergeId:()=>o(),addMonitor(e){t.__alloyMonitors.push(e),Object.keys(d).forEach((t=>{e[t]&&d[t].forEach((n=>{e[t](...n)}))}))}}}}},"adobe-alloy/dist/lib/instanceManager/injectWrapOnBeforeEventSend.js":{script:function(e){"use strict";e.exports=({version:e})=>t=>n=>{if(n.xdm.implementationDetails.name=`${n.xdm.implementationDetails.name}/reactor`,n.xdm.implementationDetails.version=`${n.xdm.implementationDetails.version}+${e}`,t)return t(n)}}},"adobe-alloy/dist/lib/actions/redirectWithIdentity/createRedirectWithIdentity.js":{script:function(e){"use strict";e.exports=({instanceManager:e,window:t,logger:n,getConfigOverrides:a})=>(o,r)=>{const{instanceName:i}=o,s=e.getInstance(i);if(!s)return n.warn(`Instance "${i}" not found when running "Redirect with identity."`),Promise.resolve();if(!r||!r.element)return n.warn('Clicked element not found when running "Redirect with identity." This action is meant to be used with a Core click event.'),Promise.resolve();if(!r.element.href)return n.warn('Invalid event target when running "Redirect with identity." This action is meant to be used with a Core click event using an "a[href]" selector.'),Promise.resolve();r.nativeEvent.preventDefault&&r.nativeEvent.preventDefault();const c=r.element.href,l=a(o),d=r.element.target||"_self";return s("appendIdentityToUrl",{url:c,edgeConfigOverrides:l}).then((({url:e})=>{t.open(e,d)}))}}}}},"mapping-table":{displayName:"Mapping Table",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP29c1cfa85ec74c28b3ef1369f262762b/",modules:{"mapping-table/src/lib/dataElements/mappingTable.js":{name:"mapping-table",displayName:"Mapping Table",script:function(e,t,n,a){"use strict";e.exports=function(e){if(null!=e){var t=e.dataElement;o();try{for(var n=0;n<e.size;n++){var r=e[n].method,i=e[n].output,s=e[n].input;if("exact match"===r){if(t===s)return i}else if("exact match i"===r){if("boolean"==typeof t)continue;if(t.toLowerCase()===s.toLowerCase())return i}else if("starts with"===r){if("boolean"==typeof t)continue;if(t.startsWith(s))return i}else if("contains"===r){if("boolean"==typeof t)continue;if(t.indexOf(s)>-1)return i}else if("regex"===r){if("boolean"==typeof t)continue;if(new RegExp(s).test(t))return i}else if("regex matching"===r){if("boolean"==typeof t)continue;var c=t.match(new RegExp(s));if(null!==c){for(var l=c.length-1;l>=1;l--)i=i.split("$"+l).join(c[l]);return i}}else if("is true"===r){if(!0===t)return i}else if("is false"===r&&!1===t)return i}}catch(e){a.logger.error("Error during evaluation: "+e.message)}if(!0===e.defaultValueEmpty)return;return t}};var o=function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e})}}}}},core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP1fdd2a6ec2ae468fb1d2cac08df65f83/",modules:{"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/dataElements/sessionStorage.js":{name:"session-storage",displayName:"Session Storage",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window");e.exports=function(e){try{return a.sessionStorage.getItem(e.name)}catch(e){return null}}}},"core/src/lib/dataElements/mergedObjects.js":{name:"merged-objects",displayName:"Merged Objects",script:function(e,t,n){"use strict";var a=n("../helpers/deepMerge");e.exports=function(e){var t=e.objects.slice();return t.unshift({}),a.apply(null,t)}}},"core/src/lib/dataElements/queryStringParameter.js":{name:"query-string-parameter",displayName:"Query String Parameter",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window"),o=n("@adobe/reactor-query-string");e.exports=function(e){var t=o.parse(a.location.search);if(!e.caseInsensitive)return t[e.name];for(var n=e.name.toLowerCase(),r=Object.keys(t),i=0;i<r.length;i++){var s=r[i];if(s.toLowerCase()===n)return t[s]}}}},"core/src/lib/dataElements/javascriptVariable.js":{name:"javascript-variable",displayName:"JavaScript Variable",script:function(e,t,n){"use strict";var a=n("../helpers/getObjectProperty.js");e.exports=function(e){return a(window,e.path)}}},"core/src/lib/dataElements/runtimeEnvironment.js":{name:"runtime-environment",displayName:"Runtime Environment",script:function(e,t,n,a){"use strict";var o=n("@adobe/reactor-window");e.exports=function(e,t){switch(e.attribute){case"buildDate":return a.buildInfo.buildDate;case"environmentStage":return o._satellite.environment.stage;case"propertyName":return o._satellite.property.name;case"propertyId":return o._satellite.property.id;case"ruleName":return t.$rule.name;case"ruleId":return t.$rule.id;case"eventType":return t.$type;case"eventDetail":return t.detail;case"DCRIdentifier":return t.identifier}}}},"core/src/lib/dataElements/cookie.js":{name:"cookie",displayName:"Cookie",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-cookie");e.exports=function(e){return a.get(e.name)}}},"core/src/lib/dataElements/pageInfo.js":{name:"page-info",displayName:"Page Info",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document");e.exports=function(e){switch(e.attribute){case"url":return a.location.href;case"hostname":return a.location.hostname;case"pathname":return a.location.pathname;case"protocol":return a.location.protocol;case"referrer":return a.referrer;case"title":return a.title}}}},"core/src/lib/conditions/valueComparison.js":{name:"value-comparison",displayName:"Value Comparison",script:function(e,t,n){"use strict";var a=n("../helpers/stringAndNumberUtils").isString,o=n("../helpers/stringAndNumberUtils").isNumber,r=n("../helpers/stringAndNumberUtils").castToStringIfNumber,i=n("../helpers/stringAndNumberUtils").castToNumberIfString,s=function(e,t){return t&&a(e)?e.toLowerCase():e},c=function(e){return function(t,n,o){return t=r(t),n=r(n),a(t)&&a(n)&&e(t,n,o)}},l=function(e){return function(t,n){return t=i(t),n=i(n),o(t)&&o(n)&&e(t,n)}},d=function(e){return function(t,n,a){return e(s(t,a),s(n,a))}},u={equals:d((function(e,t){return e==t})),doesNotEqual:function(){return!u.equals.apply(null,arguments)},contains:c(d((function(e,t){return-1!==e.indexOf(t)}))),doesNotContain:function(){return!u.contains.apply(null,arguments)},
startsWith:c(d((function(e,t){return 0===e.indexOf(t)}))),doesNotStartWith:function(){return!u.startsWith.apply(null,arguments)},endsWith:c(d((function(e,t){return e.substring(e.length-t.length,e.length)===t}))),doesNotEndWith:function(){return!u.endsWith.apply(null,arguments)},matchesRegex:c((function(e,t,n){return new RegExp(t,n?"i":"").test(e)})),doesNotMatchRegex:function(){return!u.matchesRegex.apply(null,arguments)},lessThan:l((function(e,t){return e<t})),lessThanOrEqual:l((function(e,t){return e<=t})),greaterThan:l((function(e,t){return e>t})),greaterThanOrEqual:l((function(e,t){return e>=t})),isTrue:function(e){return!0===e},isTruthy:function(e){return Boolean(e)},isFalse:function(e){return!1===e},isFalsy:function(e){return!e}};e.exports=function(e){return u[e.comparison.operator](e.leftOperand,e.rightOperand,Boolean(e.comparison.caseInsensitive))}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,n,a){"use strict";var o,r,i,s,c=n("@adobe/reactor-document"),l=n("@adobe/reactor-promise"),d=n("./helpers/decorateCode"),u=n("./helpers/loadCodeSequentially"),p=n("../../../node_modules/postscribe/dist/postscribe"),m=n("./helpers/unescapeHtmlCode"),g=n("../helpers/findPageScript").getTurbine,f=(r=function(e){p(c.body,e,{beforeWriteToken:function(e){var t=e.tagName&&e.tagName.toLowerCase();return o&&"script"===t&&(e.attrs.nonce=o),"script"!==t&&"style"!==t||(Object.keys(e.attrs||{}).forEach((function(t){e.attrs[t]=m(e.attrs[t])})),e.src&&(e.src=m(e.src))),e},error:function(e){a.logger.error(e.msg)}})},i=[],s=function(){if(c.body)for(;i.length;)r(i.shift());else setTimeout(s,20)},function(e){i.push(e),s()}),v=function(){if(c.currentScript)return c.currentScript.async;var e=g();return!e||e.async}();e.exports=function(e,t){var n;o=a.getExtensionSettings().cspNonce;var r={settings:e,event:t},i=r.settings.source;if(i)return r.settings.isExternal?u(i).then((function(e){return e?(n=d(r,e),f(n.code),n.promise):l.resolve()})):(n=d(r,i),v||"loading"!==c.readyState?f(n.code):c.write&&!1===a.propertySettings.ruleComponentSequencingEnabled?c.write(n.code):f(n.code),n.promise)}}},"core/src/lib/events/directCall.js":{name:"direct-call",displayName:"Direct Call",script:function(e,t,n,a){"use strict";var o={};window._satellite=window._satellite||{},window._satellite.track=function(e,t){e=e.trim();var n=o[e];if(n){var r={identifier:e,detail:t};n.forEach((function(e){e(r)}));var i=['Rules using the direct call event type with identifier "'+e+'" have been triggered'+(t?" with additional detail:":".")];t&&i.push(t),a.logger.log.apply(a.logger,i)}else a.logger.log('"'+e+'" does not match any direct call identifiers.')},e.exports=function(e,t){var n=o[e.identifier];n||(n=o[e.identifier]=[]),n.push(t)}}},"core/src/lib/events/domReady.js":{name:"dom-ready",displayName:"DOM Ready",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerDomReadyTrigger(t)}}},"core/src/lib/actions/directCall.js":{name:"direct-call",displayName:"Trigger Direct Call",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window");e.exports=function(e){if(e&&e.identifier){var t=e.detail;if(t&&Array.isArray(t.eventObjectEntries)&&t.eventObjectEntries.length){var n={};t.eventObjectEntries.forEach((function(e){n[e.key]=e.value})),a._satellite.track(e.identifier,n)}else a._satellite.track(e.identifier)}}}},"core/src/lib/conditions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source.call(t.element,t,t.target)}}},"core/src/lib/conditions/cookie.js":{name:"cookie",displayName:"Cookie",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-cookie"),o=n("../helpers/textMatch");e.exports=function(e){var t=a.get(e.name);return!!t&&(Array.isArray(e.cookieValues)?e.cookieValues:[{value:e.value,valueIsRegex:Boolean(e.valueIsRegex)}]).some((function(e){var n=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return o(t,n)}))}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerLibraryLoadedTrigger(t)}}},"core/src/lib/events/tabFocus.js":{name:"tab-focus",displayName:"Tab Focus",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),o=n("./helpers/once"),r=n("./helpers/visibilityApi")(),i=r.hiddenProperty,s=r.visibilityChangeEventType,c=[],l=o((function(){a.addEventListener(s,(function(){a[i]||c.forEach((function(e){e()}))}),!0)}));e.exports=function(e,t){l(),c.push(t)}}},"core/src/lib/events/windowLoaded.js":{name:"window-loaded",displayName:"Window Loaded",script:function(e,t,n){"use strict";var a=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){a.registerWindowLoadedTrigger(t)}}},"core/src/lib/events/click.js":{name:"click",displayName:"Click",script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window"),o=n("./helpers/createBubbly")(),r=new(n("./helpers/weakMap")),i=2,s=n("../helpers/stringAndNumberUtils").castToNumberIfString,c=function(e){if(!e.ctrlKey&&!e.metaKey&&e.button!==i)for(var t=e.target;t;){var n=t.tagName;if(n&&"a"===n.toLowerCase()){var o=t.getAttribute("href"),r=t.getAttribute("target");return o&&(!r||"_self"===r||"_top"===r&&a.top===a||r===a.name)?t:void 0}t=t.parentNode}};document.addEventListener("click",o.evaluateEvent,!0),e.exports=function(e,t){o.addListener(e,(function(n){var o=n.nativeEvent;if(!o.s_fe){var i=s(e.anchorDelay);if(i&&!r.has(o)){var l=c(o);l&&(o.preventDefault(),setTimeout((function(){a.location=l.href}),i)),r.set(o,!0)}t(n)}}))},e.exports.__reset=o.__reset}},"core/src/lib/events/historyChange.js":{name:"history-change",displayName:"History Change",script:function(e,t,n){"use strict";var a=n("./helpers/debounce"),o=n("./helpers/once"),r=window.history,i=window.location.href,s=[],c=function(e,t,n){var a=e[t];e[t]=function(){var t=a.apply(e,arguments);return n.apply(null,arguments),t}},l=a((function(){var e=window.location.href;i!==e&&(s.forEach((function(e){e()})),i=e)}),0),d=o((function(){r&&(r.pushState&&c(r,"pushState",l),r.replaceState&&c(r,"replaceState",l)),window.addEventListener("popstate",l),window.addEventListener("hashchange",l)}));e.exports=function(e,t){d(),s.push(t)}}},"core/src/lib/helpers/deepMerge.js":{script:function(e,t,n){"use strict";function a(e){return Array.prototype.slice.call(arguments,1).reduce((function(e,t){return null==t||Object.keys(t).forEach((function(n){var i=e[n],s=t[n];void 0===s&&void 0!==i||(Array.isArray(i)&&Array.isArray(s)?e[n]=i.concat(r(s)):o(i)&&o(s)?e[n]=a(i,s):e[n]=r(s))})),e}),e)}var o=n("../helpers/isPlainObject"),r=function(e){return o(e)?a({},e):Array.isArray(e)?a([],e):e};e.exports=a}},"core/src/lib/helpers/isPlainObject.js":{script:function(e,t,n){"use strict";var a=n("../../../node_modules/is-plain-object/dist/is-plain-object").isPlainObject;e.exports=a}},"core/node_modules/is-plain-object/dist/is-plain-object.js":{script:function(e,t){"use strict";function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){var t,a;return!1!==n(e)&&(void 0===(t=e.constructor)||!1!==n(a=t.prototype)&&!1!==a.hasOwnProperty("isPrototypeOf"))}Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=a}},"core/src/lib/helpers/getObjectProperty.js":{script:function(e){"use strict";e.exports=function(e,t){for(var n=t.split("."),a=e,o=0,r=n.length;o<r;o++){if(null==a)return;a=a[n[o]]}return a}}},"core/src/lib/helpers/stringAndNumberUtils.js":{script:function(e){"use strict";var t=function(e){return"number"==typeof e&&isFinite(e)},n=function(e){return"string"==typeof e||e instanceof String},a=function(e){return t(e)?String(e):e},o=function(e){return n(e)?Number(e):e};e.exports={isNumber:t,isString:n,castToStringIfNumber:a,castToNumberIfString:o}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,n){"use strict";var a=n("./decorators/decorateGlobalJavaScriptCode"),o=n("./decorators/decorateNonGlobalJavaScriptCode"),r={javascript:function(e,t){return e.settings.global?a(e,t):o(e,t)},html:n("./decorators/decorateHtmlCode")};e.exports=function(e,t){return r[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-promise"),o=n("./getSourceByUrl"),r=a.resolve();e.exports=function(e){var t=new a((function(t){var n=o(e);a.all([n,r]).then((function(e){var n=e[0];t(n)}))}));return r=t,t}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var n,a;n=this,a=function(){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(1));e.exports=o.default},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(){}function i(){var e=g.shift();if(e){var t=u.last(e);t.afterDequeue(),e.stream=s.apply(void 0,e),t.afterStreamStart()}}function s(e,t,n){function a(e){e=n.beforeWrite(e),f.write(e),n.afterWrite(e)}(f=new d.default(e,n)).id=m++,f.name=n.name||f.id,c.streams[f.name]=f;var o=e.ownerDocument,s={close:o.close,open:o.open,write:o.write,writeln:o.writeln};l(o,{close:r,open:r,write:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(t.join("")+"\n")}});var u=f.win.onerror||r;return f.win.onerror=function(e,t,a){n.error({msg:e+" - "+t+": "+a}),u.apply(f.win,[e,t,a])},f.write(t,(function(){l(o,s),f.win.onerror=u,n.done(),f=null,i()})),f}function c(e,t,n){if(u.isFunction(n))n={done:n};else if("clear"===n)return g=[],f=null,void(m=0);n=u.defaults(n,p);var a=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,n];return e.postscribe={cancel:function(){a.stream?a.stream.abort():a[1]=r}},n.beforeEnqueue(a),g.push(a),f||i(),e.postscribe}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=c;var d=o(n(2)),u=a(n(4)),p={afterAsync:r,afterDequeue:r,afterStreamStart:r,afterWrite:r,autoFix:!0,beforeEnqueue:r,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:r,error:function(e){throw new Error(e.msg)},releaseAsync:!1},m=0,g=[],f=null;l(c,{streams:{},queue:g,WriteStream:d.default})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=p+t,a=e.getAttribute(n);return d.existy(a)?String(a):a}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=p+t;d.existy(n)&&""!==n?e.setAttribute(a,n):e.removeAttribute(a)}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=o(n(3)),d=a(n(4)),u=!1,p="data-ps-",m="ps-style",g="ps-script",f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.root=t,this.options=n,this.doc=t.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new l.default("",{autoFix:n.autoFix}),this.actuals=[t],this.proxyHistory="",this.proxyRoot=this.doc.createElement(t.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return e.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();d.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},e.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},e.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,n=void 0,a=void 0,o=[];(t=this.parser.readToken())&&!(n=d.isScript(t))&&!(a=d.isStyle(t));)(t=this.options.beforeWriteToken(t))&&o.push(t);o.length>0&&this._writeStaticTokens(o),n&&this._handleScriptToken(t),a&&this._handleStyleToken(t)},e.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,u&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),u&&(t.actualInnerHTML=this.root.innerHTML),t):null},e.prototype._buildChunk=function(e){for(var t=this.actuals.length,n=[],a=[],o=[],r=e.length,i=0;i<r;i++){var s=e[i],c=s.toString();if(n.push(c),s.attrs){if(!/^noscript$/i.test(s.tagName)){var l=t++;a.push(c.replace(/(\/?>)/," "+p+"id="+l+" $1")),s.attrs.id!==g&&s.attrs.id!==m&&o.push("atomicTag"===s.type?"":"<"+s.tagName+" "+p+"proxyof="+l+(s.unary?" />":">"))}}else a.push(c),o.push("endTag"===s.type?c:"")}return{tokens:e,raw:n.join(""),actual:a.join(""),proxy:o.join("")}},e.prototype._walkChunk=function(){for(var e=void 0,t=[this.proxyRoot];d.existy(e=t.shift());){var n=1===e.nodeType;if(!n||!i(e,"proxyof")){n&&(this.actuals[i(e,"id")]=e,s(e,"id"));var a=e.parentNode&&i(e.parentNode,"proxyof");a&&this.actuals[a].appendChild(e)}t.unshift.apply(t,d.toArray(e.childNodes))}},e.prototype._handleScriptToken=function(e){var t=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,(function(){t._onScriptDone(e)})))},e.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},e.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,m),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},e.prototype._buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),d.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),t},e.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var n=this.doc.getElementById(t);n&&n.parentNode.replaceChild(e,n)},e.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},e.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},e.prototype._writeScriptToken=function(e,t){var n=this._buildScript(e),a=this._shouldRelease(n),o=this.options.afterAsync;e.src&&(n.src=e.src,this._scriptLoadHandler(n,a?o:function(){t(),o()}));try{this._insertCursor(n,g),n.src&&!a||t()}catch(e){this.options.error(e),t()}},e.prototype._buildScript=function(e){var t=this.doc.createElement(e.tagName);return d.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),e.content&&(t.text=e.content),t},e.prototype._scriptLoadHandler=function(e,t){function n(){e=e.onload=e.onreadystatechange=e.onerror=null}function a(){n(),null!=t&&t(),t=null}function o(e){n(),i(e),null!=t&&t(),t=null}function r(e,t){var n=e["on"+t];null!=n&&(e["_on"+t]=n)}var i=this.options.error;r(e,"load"),r(e,"error"),c(e,{onload:function(){if(e._onload)try{e._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){o({msg:"onload handler failed "+t+" @ "+e.src})}a()},onerror:function(){if(e._onerror)try{e._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){return void o({msg:"onerror handler failed "+t+" @ "+e.src})}o({msg:"remote script failed "+e.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&a()}})},e.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},e}();t.default=f},function(e){var t;t=function(){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(1));e.exports=o.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=o(n(2)),s=o(n(3)),c=a(n(6)),l=n(5),d={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.stream=n;var o=!1,s={};for(var l in i)i.hasOwnProperty(l)&&(a.autoFix&&(s[l+"Fix"]=!0),o=o||s[l+"Fix"]);o?(this._readToken=(0,c.default)(this,s,(function(){return t._readTokenImpl()})),this._peekToken=(0,c.default)(this,s,(function(){return t._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return e.prototype.append=function(e){this.stream+=e},e.prototype.prepend=function(e){this.stream=e+this.stream},e.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},e.prototype._peekTokenImpl=function(){for(var e in d)if(d.hasOwnProperty(e)&&d[e].test(this.stream)){var t=s[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},e.prototype.peekToken=function(){return this._peekToken()},e.prototype.readToken=function(){return this._readToken()},e.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},e.prototype.clear=function(){var e=this.stream;return this.stream="",e},e.prototype.rest=function(){return this.stream},e}();for(var p in t.default=u,u.tokenToString=function(e){return e.toString()},u.escapeAttributes=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=(0,l.escapeQuotes)(e[n],null));return t},u.supports=i,i)i.hasOwnProperty(p)&&(u.browserHasFlaw=u.browserHasFlaw||!i[p]&&p)},function(e,t){"use strict";t.__esModule=!0;var n=!1,a=!1,o=window.document.createElement("div");try{var r="<P><I></P></I>";o.innerHTML=r,t.tagSoup=n=o.innerHTML!==r}catch(e){t.tagSoup=n=!1}try{o.innerHTML="<P><i><P></P></i></P>",t.selfClose=a=2===o.childNodes.length}catch(e){t.selfClose=a=!1}o=null,t.tagSoup=n,t.selfClose=a},function(e,t,n){"use strict";function a(e){var t=e.indexOf("-->");if(t>=0)return new l.CommentToken(e.substr(4,t-1),t+3)}function o(e){var t=e.indexOf("<");return new l.CharsToken(t>=0?t:e.length)}function r(e){var t,n,a;if(-1!==e.indexOf(">")){var o=e.match(d.startTag);if(o){var r=(t={},n={},a=o[2],o[2].replace(d.attr,(function(e,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",n[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||d.fillAttr.test(o)&&o||"":t[o]="",a=a.replace(e,"")})),{v:new l.StartTagToken(o[1],o[0].length,t,n,!!o[3],a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===r?"undefined":c(r)))return r.v}}}function i(e){var t=r(e);if(t){var n=e.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var a=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(a)return new l.AtomicTagToken(t.tagName,a[0].length+t.length,t.attrs,t.booleanAttrs,a[1])}}}function s(e){var t=e.match(d.endTag);if(t)return new l.EndTagToken(t[1],t[0].length)}t.__esModule=!0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=a,t.chars=o,t.startTag=r,t.atomicTag=i,t.endTag=s;var l=n(4),d={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var o=n(5),r=(t.Token=function e(t,n){a(this,e),this.type=t,this.length=n,this.text=""},t.CommentToken=function(){function e(t,n){a(this,e),this.type="comment",this.length=n||(t?t.length:0),this.text="",this.content=t}return e.prototype.toString=function(){return"<!--"+this.content},e}(),t.CharsToken=function(){function e(t){a(this,e),this.type="chars",this.length=t,this.text=""}return e.prototype.toString=function(){return this.text},e}(),t.TagToken=function(){function e(t,n,o,r,i){a(this,e),this.type=t,this.length=o,this.text="",this.tagName=n,this.attrs=r,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1}return e.formatTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="<"+e.tagName;for(var a in e.attrs)if(e.attrs.hasOwnProperty(a)){n+=" "+a;var r=e.attrs[a];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[a]||(n+='="'+(0,o.escapeQuotes)(r)+'"')}return e.rest&&(n+=" "+e.rest),e.unary&&!e.html5Unary?n+="/>":n+=">",null!=t&&(n+=t+"</"+e.tagName+">"),n},e}());t.StartTagToken=function(){function e(t,n,o,r,i,s){a(this,e),this.type="startTag",this.length=n,this.text="",this.tagName=t,this.attrs=o,this.booleanAttrs=r,this.html5Unary=!1,this.unary=i,this.rest=s}return e.prototype.toString=function(){return r.formatTag(this)},e}(),t.AtomicTagToken=function(){function e(t,n,o,r,i){a(this,e),this.type="atomicTag",this.length=n,this.text="",this.tagName=t,this.attrs=o,this.booleanAttrs=r,this.unary=!1,this.html5Unary=!1,this.content=i}return e.prototype.toString=function(){return r.formatTag(this,this.content)},e}(),t.EndTagToken=function(){function e(t,n){a(this,e),this.type="endTag",this.length=n,this.text="",this.tagName=t}return e.prototype.toString=function(){return"</"+this.tagName+">"},e}()},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,(function(e,t){return/\\/.test(t)?t+'"':t+'\\"'})):t}t.__esModule=!0,t.escapeQuotes=n},function(e,t){"use strict";function n(e){return e&&"startTag"===e.type&&(e.unary=s.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function a(e,t){var a=e.stream,o=n(t());return e.stream=a,o}function o(e,t){var n=t.pop();e.prepend("</"+n.tagName+">")}function r(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1},e}function i(e,t,i){function s(){var t=a(e,i);t&&d[t.type]&&d[t.type](t)}var l=r(),d={startTag:function(n){var a=n.tagName;"TR"===a.toUpperCase()&&l.lastTagNameEq("TABLE")?(e.prepend("<TBODY>"),s()):t.selfCloseFix&&c.test(a)&&l.containsTagName(a)?l.lastTagNameEq(a)?o(e,l):(e.prepend("</"+n.tagName+">"),s()):n.unary||l.push(n)},endTag:function(n){l.last()?t.tagSoupFix&&!l.lastTagNameEq(n.tagName)?o(e,l):l.pop():t.tagSoupFix&&(i(),s())}};return function(){return s(),n(i())}}t.__esModule=!0,t.default=i;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,c=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},e.exports=t()},function(e,t){"use strict";function n(e){return null!=e}function a(e){return"function"==typeof e}function o(e,t,n){var a=void 0,o=e&&e.length||0;for(a=0;a<o;a++)t.call(n,e[a],a)}function r(e,t,n){for(var a in e)e.hasOwnProperty(a)&&t.call(n,a,e[a])}function i(e,t){return e=e||{},r(t,(function(t,a){n(e[t])||(e[t]=a)})),e}function s(e){try{return Array.prototype.slice.call(e)}catch(a){var t=(n=[],o(e,(function(e){n.push(e)})),{v:n});if("object"===(void 0===t?"undefined":p(t)))return t.v}var n}function c(e){return e[e.length-1]}function l(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}function d(e){return l(e,"script")}function u(e){return l(e,"style")}t.__esModule=!0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=n,t.isFunction=a,t.each=o,t.eachKey=r,t.defaults=i,t.toArray=s,t.last=c,t.isTag=l,t.isScript=d,t.isStyle=u}])},"object"==typeof t&&"object"==typeof e?e.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof t?t.postscribe=a():n.postscribe=a()}},"core/src/lib/actions/helpers/unescapeHtmlCode.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document").createElement("div");e.exports=function(e){return a.innerHTML=e,a.textContent||a.innerText||e}}},"core/src/lib/helpers/findPageScript.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-document"),o=function(e){for(var t=a.querySelectorAll("script"),n=0;n<t.length;n++){var o=t[n];if(e.test(o.src))return o}},r=function(){return o(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))};e.exports={getTurbine:r,byRegexPattern:o}}},"core/src/lib/actions/helpers/decorators/decorateGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-promise");e.exports=function(e,t){return{code:"<script>\n"+t+"\n</script>",promise:a.resolve()}}}},"core/src/lib/actions/helpers/decorators/decorateNonGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-promise"),o=0;e.exports=function(e,t){var n="_runScript"+ ++o,r=new a((function(t,o){_satellite[n]=function(r){delete _satellite[n],new a((function(t){t(r.call(e.event.element,e.event,e.event.target,a))})).then(t,o)}}));return{code:'<script>_satellite["'+n+'"](function(event, target, Promise) {\n'+t+"\n});</script>",promise:r}}}},"core/src/lib/actions/helpers/decorators/decorateHtmlCode.js":{script:function(e,t,n,a){"use strict";var o=n("@adobe/reactor-promise"),r=0,i={};window._satellite=window._satellite||{},window._satellite._onCustomCodeSuccess=function(e){var t=i[e];t&&(delete i[e],t.resolve())},window._satellite._onCustomCodeFailure=function(e){var t=i[e];t&&(delete i[e],t.reject())};var s=function(e){return-1!==e.indexOf("${reactorCallbackId}")},c=function(e,t){return e.replace(/\${reactorCallbackId}/g,t)},l=function(e){return e.settings.isExternal};e.exports=function(e,t){var n;return l(e)&&(t=a.replaceTokens(t,e.event)),s(t)?(n=new o((function(e,t){i[String(r)]={resolve:e,reject:t}})),t=c(t,r),r+=1):n=o.resolve(),{code:t,promise:n}}}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-load-script"),o=n("@adobe/reactor-promise"),r=n("../../helpers/findPageScript").byRegexPattern,i={},s={},c=function(e){return s[e]||(s[e]=a(e)),s[e]};_satellite.__registerScript=function(e,t){var n;if(document.currentScript)n=document.currentScript.getAttribute("src");else{var a=new RegExp(".*"+e+".*");n=r(a).getAttribute("src")}i[n]=t},e.exports=function(e){return i[e]?o.resolve(i[e]):new o((function(t){c(e).then((function(){t(i[e])}),(function(){t()}))}))}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window"),o=n("@adobe/reactor-document"),r=-1!==a.navigator.appVersion.indexOf("MSIE 10"),i="WINDOW_LOADED",s="DOM_READY",c="PAGE_BOTTOM",l=[c,s,i],d=function(e,t){return{element:e,target:e,nativeEvent:t}},u={};l.forEach((function(e){u[e]=[]}));var p=function(e,t){l.slice(0,g(e)+1).forEach((function(e){f(t,e)}))},m=function(){return"complete"===o.readyState?i:"interactive"===o.readyState?r?null:s:void 0},g=function(e){return l.indexOf(e)},f=function(e,t){u[t].forEach((function(t){v(e,t)})),u[t]=[]},v=function(e,t){var n=t.trigger,a=t.syntheticEventFn;n(a?a(e):null)};a._satellite=a._satellite||{},a._satellite.pageBottom=p.bind(null,c),o.addEventListener("DOMContentLoaded",p.bind(null,s),!0),a.addEventListener("load",p.bind(null,i),!0),a.setTimeout((function(){var e=m();e&&p(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){u[c].push({trigger:e})},registerDomReadyTrigger:function(e){u[s].push({trigger:e,syntheticEventFn:d.bind(null,o)})},registerWindowLoadedTrigger:function(e){u[i].push({trigger:e,syntheticEventFn:d.bind(null,a)})}}}},"core/src/lib/helpers/textMatch.js":{script:function(e){"use strict";e.exports=function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))}}},"core/src/lib/events/helpers/once.js":{script:function(e){"use strict";e.exports=function(e,t){var n;return function(){return e&&(n=e.apply(t||this,arguments),e=null),n}}}},"core/src/lib/events/helpers/visibilityApi.js":{script:function(e){"use strict";e.exports=function(){var e={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",webkitHidden:"webkitvisibilitychange"};for(var t in e)if(e.hasOwnProperty(t)&&void 0!==document[t])return{hiddenProperty:t,visibilityChangeEventType:e[t]};return{}}}},"core/src/lib/events/helpers/createBubbly.js":{script:function(e,t,n){"use strict";var a=n("./weakMap"),o=n("./matchesProperties"),r=n("./matchesSelector");e.exports=function(){var e=[],t=new a,n={addListener:function(t,n){e.push({settings:t,callback:n})},evaluateEvent:function(n,a){if(e.length&&!t.has(n)){for(var i=n.target,s=!1;i;){for(var c=!1,l=!1,d=0;d<e.length;d++){var u=e[d],p=u.settings.elementSelector,m=u.settings.elementProperties;if((!1!==u.settings.bubbleFireIfChildFired||!s)&&(i===n.target||!1!==u.settings.bubbleFireIfParent)&&(i===n.target||p||m&&Object.keys(m).length)&&(!p||r(i,p))&&(!m||o(i,m))){var g={};a?Object.keys(n).forEach((function(e){g[e]=n[e]})):g.nativeEvent=n,g.element=i,g.target=n.target,!1!==u.callback(g)&&(l=!0,u.settings.bubbleStop&&(c=!0))}}if(c)break;l&&(s=!0),i=i.parentNode}t.set(n,!0)}},__reset:function(){e=[]}};return n}}},"core/src/lib/events/helpers/weakMap.js":{script:function(e,t,n){"use strict";var a=n("@adobe/reactor-window").WeakMap;if(void 0===a){var o=Object.defineProperty,r=Date.now()%1e9;(a=function(){this.name="__st"+(1e9*Math.random()>>>0)+r+++"__"}).prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:o(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0,0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}e.exports=a}},"core/src/lib/events/helpers/matchesProperties.js":{script:function(e,t,n){"use strict";var a=n("./../../helpers/textMatch"),o=function(e,t){return"@text"===t||"innerText"===t?e.textContent||e.innerText:t in e?e[t]:e.getAttribute?e.getAttribute(t):void 0};e.exports=function(e,t){return!t||t.every((function(t){var n=o(e,t.name),r=t.valueIsRegex?new RegExp(t.value,"i"):t.value;return a(n,r)}))}}},"core/src/lib/events/helpers/matchesSelector.js":{script:function(e,t,n,a){"use strict";e.exports=function(e,t){var n=e.matches||e.msMatchesSelector;if(n)try{return n.call(e,t)}catch(e){return a.logger.warn("Matching element failed. "+t+" is not a valid selector."),!1}return!1}}},"core/src/lib/events/helpers/debounce.js":{script:function(e){"use strict";e.exports=function(e,t,n){var a=null;return function(){
var o=n||this,r=arguments;clearTimeout(a),a=setTimeout((function(){e.apply(o,r)}),t)}}}}}},"common-web-sdk-plugins":{displayName:"Common Web SDK Plugins",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP72fbeb9839644a1daa8eca9f84e02dcf/",modules:{}},contentsquare:{displayName:"Contentsquare",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP9153a9d558af4429bdd4dd0ea3bf7148/",settings:{cvars:[],project_id:"8018d00cf35b5",pii_selector:"#lpChat",pii_attribute_object:""},modules:{"contentsquare/src/lib/actions/uxaInstallation.js":{name:"uxa-installation",displayName:"Main Tracking Tag Installation",script:function(e,t,n,a){"use strict";e.exports=function(e){if(e&&a&&"function"==typeof a.getExtensionSettings){const t=a.getExtensionSettings(),n=t.project_id,o=t.pii_selector,r=t.pii_attribute_object,i=t.cvars;let s,c=[];const l=e.setPathInput,d=e.setQueryInput,u=(document.location.search,document.location.pathname),p=document.location.hash.replace("#","?__");window._uxa=window._uxa||[],s=""!=l?l+p:u+p;try{if(""!=i&&void 0!==i){let b=!0,h="";"object"==typeof i&&null===i[0]&&(b=!1);for(let y=0;y<i.length;y++){h=b?y+1:y;const _=i[y].key,w=i[y].value,C=i[y].scope;let E;""!==C&&void 0!==C||(E="3"),"4"!=C&&(E="4n"===C||"4an"===C?"4":C||"3",""!=_&&void 0!==_&&""!=w&&void 0!==w&&("0"===C?_uxa.push(["setCustomVariable",h,_,w]):_uxa.push(["setCustomVariable",h,_,w,parseInt(E)]))),"4"!==C&&"4an"!==C||(E="4",c.push({slot:h,key:_,value:w,scope:E}))}}let f=!1,v={};if(o&&(v.PIISelectors=[o],f=!0),r){let k=JSON.stringify(r.replaceAll("\n",""));k=k.replace(/\s/g,""),k=JSON.parse(k),k=JSON.parse(k),v.Attributes=k,f=!0}f&&_uxa.push(["setPIISelectors",v])}catch(x){}let m=!1;function g(){if(!m){m=!0;for(let e=0;e<c.length;e++){const t=c[e].slot,n=c[e].key,a=c[e].value,o=c[e].scope;""!=n&&void 0!==n&&""!=a&&void 0!==a&&_uxa.push(["setCustomVariable",t,n,a,parseInt(o)])}}}if(_uxa.push(["afterPageView",g]),d&&_uxa.push(["setQuery",d]),n)if("undefined"==typeof CS_CONF){_uxa.push(["setPath",s]);const P=document.createElement("script");P.type="text/javascript",P.async=!0,P.src="//t.contentsquare.net/uxa/"+n+".js",document.getElementsByTagName("head")[0].appendChild(P)}else _uxa.push(["trackPageview",s])}}}},"contentsquare/src/lib/actions/artificialPageviewInstallation.js":{name:"artificial-pageview",displayName:"Artificial Pageviews",script:function(e){e.exports=function(e){var t=e.query,n=document.location.search,a=document.location.pathname,o=document.location.hash;window._uxa=window._uxa||[],""!=t?(_uxa.push(["setQuery",n+(n?"&":"?")+t]),_uxa.push(["trackPageview",a+o.replace("#","?__")]),_uxa.push(["setQuery",n])):(_uxa.push(["setQuery",n]),_uxa.push(["trackPageview",a+o.replace("#","?__")]))}}}}}},company:{orgId:"1D4334B852784A2D0A490D44@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"Sitecore: nationwide.co.uk",settings:{domains:["nationwide.co.uk"],undefinedVarsReturnEmpty:!1,ruleComponentSequencingEnabled:!0},id:"PR96cd828464e349d7b51f46da3b9edc12"},rules:[{id:"RL19ca181f9c5542ec95b526af99e2a14a",name:"Target|Send Event Complete|Return Propositions",events:[{modulePath:"adobe-alloy/dist/lib/events/sendEventComplete/index.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RCce5ee57b31f6424caabbb2af3e822437-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL1cd5635a04ac48ab82946380da1a7eed",name:"DOM Ready|wa_consent||Deploy Code|ContentSquare",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:1},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"contentsquare/src/lib/actions/uxaInstallation.js",settings:{setPathInput:"",setQueryInput:"",setPathCheckbox:!1,setQueryCheckbox:!1},timeout:2e3,delayNext:!0}]},{id:"RL1f74e959a3d242989d6ea81aa90872a0",name:"[wa_consent] Clear cookies, set consent status and call wa_view",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){const e=_satellite.getVar("library load consent status");let t=_satellite.getVar("cookie consent|category|user experience");return void 0!==t&&"notset"!==t&&t!==e}},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC0ed7c50b00644ee091e937442edbbf42-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC3ab032c9ebce4ba19a8ae36b735e2ee8-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/directCall.js",settings:{identifier:"wa_view"},timeout:2e3,delayNext:!0}]},{id:"RL220a44ea1b5f491ea0ba04a9f0c08f53",name:"Page|Rightmove|Create Landing Flag Cookie and Rightmove Beacon",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:20}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){var e=!1;return(1==_satellite.getVar("third party|rightmove flag")||null==window.location.href.match(/cmpid/i)&&1==_satellite.getVar("referring url (evar100)").startsWith("https://www.rightmove.co.uk/"))&&(e=!0),e}},timeout:2e3},{modulePath:"core/src/lib/conditions/cookie.js",settings:{name:"landing_flag",value:"1"},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC029869e923f3438ba1201beeef47d572-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RCb8c4431580c942018dd39b44c6f2606e-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL2c8a8af274404751b67065e049998b0d",name:"Library Loaded|Deploy Code|LivePerson|Analytics",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:55}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'function lptrack(data, eventInfo){\n    if(window.console && window.JSON){\n          \n\t\tvar lpaction = {type:eventInfo.appName, \n                        lpdata: data, \n                        lpevent: eventInfo};\nif ((eventInfo.appName == "LP_OFFERS")||(eventInfo.eventName == "state" && data.state != "chatting" && data.state != "ended")||(eventInfo.eventName == "conversationInfo" && data.conversationId != undefined)){\n          if (nbs_ddl.action == undefined)\n          {\n            nbs_ddl.action = [];\n          }\n          nbs_ddl.action.unshift(lpaction);\n          wa_action();\n          }\n    }\n}\nlpTag.events.bind("LP_OFFERS", "OFFER_IMPRESSION", lptrack);\nlpTag.events.bind("LP_OFFERS", "OFFER_CLICK", lptrack);\nlpTag.events.bind("LP_OFFERS", "OFFER_TIMEOUT", lptrack);\nlpTag.events.bind("lpUnifiedWindow", "state", lptrack);\nlpTag.events.bind("lpUnifiedWindow", "conversationInfo", lptrack);\nlpTag.events.bind("lpUnifiedWindow", "engagementData", lptrack);\nlpTag.events.bind("lpUnifiedWindow", "minimized", lptrack);\nlpTag.events.bind("lpUnifiedWindow", "maximized", lptrack);\nlpTag.events.bind("lpUnifiedWindow", "windowClosed", lptrack);',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL39540af1da2a4ceaa35611db17b2d4ee",name:"Tab Focus|Page View",events:[{modulePath:"core/src/lib/events/tabFocus.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if(_satellite.getVar("previous page name (prop19)")!==_satellite.getVar("page|name (pagename)"))return!0}},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC4ff55da4f6d44927be774d14da761f3d-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/directCall.js",settings:{identifier:"wa_view"},timeout:2e3,delayNext:!0}]},{id:"RL422a158d185c447d87d3d2d22a1765e7",name:"[wa_view] FPID Fetch, Send Event and Call wa_postpage",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:10}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"doesNotEqual"},leftOperand:"%cookie consent|category|user experience%",rightOperand:"notset"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC4a93d7272fde4a36b790fe8a7f4e2d1d-source.min.js",language:"html",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{__adobe:{analytics:{eVar1:"%search term (evar1)%",eVar11:"%domain and path (evar11)%",eVar73:"%navigation data|internal (evar73)%",eVar75:"%home & exit page|campaign id (evar75)%",eVar98:"%campaign id (evar98)%",events:"event16=%calculator or tool|marketing prompt click (event16)%,event26=%calculator or tool|marketing prompt impression (event26)%,event44=%search|standard search event (event44)%,event99=%search|zero results event (event99)%,event100=%search|click through event (event100)%,event110=%search|search unavailable event (event110)%,event120=%wa_view fallback counter (event120)%,event324=%search|search paginated view (event324)%,event331=%search|recent search event (event331)%,event515=%fpid present (event515)%,event516=%fpid failure (event516)%",prop19:"%previous page name (prop19)%",prop28:"%fragment id page (prop28)%",prop44:"%page template (prop44)%",prop52:"%build id (prop52)%",prop61:"%nav tracking page name|internal (prop61)%",prop73:"%responsive state (prop73)%",eVar100:"%referring url (evar100)%",eVar105:"%cookie consent (evar105)%",eVar126:"%contentsquare integration key (eVar126)%",eVar135:"%error codes (evar135)%",eVar145:"%.co.uk short urls (evar145)%",eVar152:"%recipient id (evar152)%",products:"%product string|page (product)%"}}},customCode:function(e){const t=e.__adobe.analytics.events.split(",").filter((e=>{const[t,n]=e.split("=");return""!==n})),n=t.join(",");e.__adobe.analytics.events=n},transforms:{"__adobe.analytics":{clear:!0}},dataElementId:"DEa4cf6b5418904d51a7325b150054b12e"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%merge|xdm object|page%",data:"%data variable%",type:"web.webpagedetails.pageViews",instanceName:"alloy",personalization:{decisionScopes:"%target scopes%"},edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%datastream switch (staging)%"},production:{enabled:!0,datastreamId:"%datastream switch (live)%"},development:{enabled:!0,datastreamId:"%datastream switch (staging)%"}}},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/directCall.js",settings:{identifier:"wa_postpage"},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RCd5fd588f257f48ccb511691f661de1df-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL45ff222e74584ee8b83feab63b3b1bbf",name:"Interaction|ContentSquare|Send Artificial Pageview|reveal",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_action"},ruleOrder:5}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(e){const t=nbs_ddl.action.length-e.detail.arrayLength;if("reveal"===nbs_ddl.action[t]?.type)return!0}},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"contentsquare/src/lib/actions/artificialPageviewInstallation.js",settings:{query:"revealInteraction"},timeout:2e3,delayNext:!0}]},{id:"RL61dbb1b755ec4d308fc2be62b65666fc",name:"Page||Cookie Consent|Rightmove|Create Referral ID Cookie",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:80},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%third party|rightmove flag%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|customisation%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC952ebcde55e149dc980d3fbc34d8c280-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL63f7c817db3e4919b2068b3ae4927cb9",name:"Library Loaded|Deploy Code|LivePerson|Library",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"var lpSiteID = \"\";\n\nif (_satellite.getVar('environment stage') === \"development\" || _satellite.getVar('environment stage') === \"staging\"){\n  //development liveperson ID\n  lpSiteID = \"89865529\";\n}\nelse\n{\n  //live liveperson ID\n  lpSiteID = \"78722355\";\n}\n\nwindow.lpTag=window.lpTag||{},'undefined'==typeof window.lpTag._tagCount?(window.lpTag={wl:lpTag.wl||null,scp:lpTag.scp||null,site:lpSiteID||'',section:[]||'',tagletSection:lpTag.tagletSection||null,autoStart:lpTag.autoStart!==!1,ovr:lpTag.ovr||{},_v:'1.10.0',_tagCount:1,protocol:'https:',events:{bind:function(t,e,i){lpTag.defer(function(){lpTag.events.bind(t,e,i)},0)},trigger:function(t,e,i){lpTag.defer(function(){lpTag.events.trigger(t,e,i)},1)}},defer:function(t,e){0===e?(this._defB=this._defB||[],this._defB.push(t)):1===e?(this._defT=this._defT||[],this._defT.push(t)):(this._defL=this._defL||[],this._defL.push(t))},load:function(t,e,i){var n=this;setTimeout(function(){n._load(t,e,i)},0)},_load:function(t,e,i){var n=t;t||(n=this.protocol+'//'+(this.ovr&&this.ovr.domain?this.ovr.domain:'lptag.liveperson.net')+'/tag/tag.js?site='+this.site);var o=document.createElement('script');o.setAttribute('charset',e?e:'UTF-8'),i&&o.setAttribute('id',i),o.setAttribute('src',n),document.getElementsByTagName('head').item(0).appendChild(o)},init:function(){this._timing=this._timing||{},this._timing.start=(new Date).getTime();var t=this;window.attachEvent?window.attachEvent('onload',function(){t._domReady('domReady')}):(window.addEventListener('DOMContentLoaded',function(){t._domReady('contReady')},!1),window.addEventListener('load',function(){t._domReady('domReady')},!1)),'undefined'===typeof window._lptStop&&this.load()},start:function(){this.autoStart=!0},_domReady:function(t){this.isDom||(this.isDom=!0,this.events.trigger('LPT','DOM_READY',{t:t})),this._timing[t]=(new Date).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],hooks:lpTag.hooks||[],identities:lpTag.identities||[],ev:lpTag.ev||[]},lpTag.init()):window.lpTag._tagCount+=1;\n\n_satellite.logger.log(\"LP Tag Deployed\")",language:"javascript"},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'function lp_fallback() {\n  let lp_fail_flag = _satellite.getVar("lp_function_undefined");\n\n  if(lp_fail_flag === true){\n      let lp_section = [_satellite.getVar("page|name (pagename)")];\n      let lp_url = window.location.href;\n      lpTag.newPage(lp_url, {section: lp_section});\n      _satellite.setVar("lp_function_undefined", false);\n      _satellite.logger.info("LP ON_START event - fallback required and executed");\n\n  } else {\n      _satellite.logger.info("LP ON_START event - fallback NOT required");\n  }\n}\n\nwindow.lpTag.events.bind({\n        eventName : "ON_STARTED",\n        appName : "LPTAG",\n        func: lp_fallback,\n        triggerOnce : true\n      })',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RL6fad01ff012c41b49e5dd2dfc97b5c67",name:"[wa_postpage] Set Previous Page Name",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_postpage"},ruleOrder:10}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC5bec6f2cc1934e34ba5a4a33c32de41d-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL720b8dc192a445cf88ebacc789a5e572",name:"Page|Track|LivePerson",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:80}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC3a3e587191c746d6b623c03752f37361-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL768dcc85684d4bbaa1a46f13dc8fb274",name:"Library Loaded|Deploy Code|Signly",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){if("true"===localStorage.getItem("signlyEnabled"))return!0}},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'localStorage.setItem("showSignly", "true");',language:"javascript"},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<!--Nationwide created custom style to move Signly infront of the oneTrust cookie banner-->\n<style>#signly-app#signly-app\n  {\n    z-index: 99999998;\n    right: 1.5%;\n    bottom: 47px;\n    margin-bottom: 3%;\n}\n\n\n</style>\n\n\n<link rel="stylesheet" href="https://cdn.signly.co/release/latest/signly-dynamic-british.css">\n<script src="https://cdn.signly.co/release/latest/signly-dynamic-british.umd.min.js"></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RL7dff13adda1b4202ba60b9ff06bcbdda",name:"Page||Cookie Consent|Rightmove|Remove Campaign ID Cookie",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:80},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){var e=!1;return 1==_satellite.getVar("cookie consent|category|user experience")&&1==_satellite.getVar("cookie consent|category|customisation")&&(e=!0),e}},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RCa183b2a7e4a6417983b69e51701f6a87-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL84e8ee9ae3f94b45b25686aa649d45d8",name:"Interaction|ContentSquare|Send Artificial Pageview|tool result loaded",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_action"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(e){const t=nbs_ddl.action.length-e.detail.arrayLength;if("tool result loaded"===nbs_ddl.action[t]?.type)return!0}},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"contentsquare/src/lib/actions/artificialPageviewInstallation.js",settings:{query:"toolResultLoaded"},timeout:2e3,delayNext:!0}]},{id:"RL89a8b09425ba4fd8b1b9e18d033ba9ef",name:"Library Loaded||Cookie Consent|Deploy Code|Adobe Target Contentsquare Integration",events:[{modulePath:"adobe-alloy/dist/lib/events/sendEventComplete/index.js",settings:{},ruleOrder:2}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RCed08bdd808544edf9d2e7e446e111148-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL9037b65961e34785b85712514bb037f8",name:"Page||Cookie Consent|Rightmove|Create Campaign ID Cookie",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:80},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%third party|rightmove flag%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|customisation%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC88a58ffbdb2144cd86a1ba6cc948fe2c-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL9a02246f9cc14d97b53a38cd057ddbd5",name:"Page|Track|Adobe Analytics|Rightmove Beacon",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:5}],conditions:[{modulePath:"core/src/lib/conditions/cookie.js",settings:{name:"landing_flag",value:"2"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RCef53cd4e01554b098d32ee84d45abd8c-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC645894ce43394f48a73aadba2884da3d-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL9bb9066f64aa43fc9f46237973996496",name:"Page||Cookie Consent|Rightmove|Remove Referral ID Cookie",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:80},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){var e=!1;return 1==_satellite.getVar("cookie consent|category|user experience")&&1==_satellite.getVar("cookie consent|category|customisation")&&(e=!0),e}},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC8860472d35bf4ad9a63cbadd170ec813-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RL9ca60c67f8df481e887252092b49f68a",name:"Interaction|Track|Adobe Analytics|Rightmove Beacon",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_action"},ruleOrder:20}],conditions:[{modulePath:"core/src/lib/conditions/cookie.js",settings:{name:"landing_flag",value:"2"},timeout:2e3},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(e){const t=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[t].type)return!0}},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%calculator or tool name (evar108)%",rightOperand:"mortgage rates tool"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC1fff925135044938a4ece57605e3194d-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC8306f488578b4018a19dc6e6ff8a670a-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLa123446745844f94a7b64e0eba2aea2b",name:"[wa_action] FPID Fetch and Send Event",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_action"},ruleOrder:10}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"doesNotEqual"},leftOperand:"%cookie consent|category|user experience%",rightOperand:"notset"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC152d74e219c144ceb184d40e96ddfbb9-source.min.js",language:"html",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{__adobe:{analytics:{eVar11:"%domain and path (evar11)%",eVar35:"%interaction (evar35)%",eVar42:"%loan calc|metadata (evar42)%",eVar46:"%mortgage payment change calculator|metadata (evar46)%",eVar51:"%savings product finder tool|metadata (evar51)%",eVar54:"%check savings rates tool|metadata (evar54)%",eVar57:"%overdraft calculator tool|metadata (evar57)%",eVar63:"%mortgage overpayment calc|metadata (evar63)%",eVar72:"%liveperson metadata (evar72)%",eVar73:"%navigation data|external (evar73)%",eVar75:"%home & exit action|campaign id (evar75)%",eVar82:"%mortgage rates tool|metadata (evar82)%",eVar87:"%feedback tool text (evar87)%",eVar88:"%mortgage borrowing calculator|metadata (evar88)%",eVar89:"%mortgage erc calculator|metadata (evar89)%",eVar98:"%campaign id (evar98)%",events:"event16=%calculator or tool|marketing prompt click fallback (event16)%,event98=%calculator or tool complete (event98)%,event117=%liveperson impression (event117)%,event118=%calculator or tool|started (event118)%,event127=%liveperson offer click (event127)%,event215=%mortgage overpayment calc|current mortgage balance (event215)%,event216=%mortgage overpayment calc|current mortgage interest rate (event216)%,event217=%mortgage overpayment calc|current mortgage term remaining (event217)%,event218=%mortgage overpayment calc|one off payment amount (event218)%,event219=%mortgage overpayment calc|regular payment amount (event219) %,event220=%mortgage overpayment calc|overpayment term (event220)%,event226=%mortgage overpayment calc|term with overpayment (event226)%,event227=%mortgage overpayment calc|total saving (event227)%,event228=%mortgage overpayment calc|term reduction (event228)%,event229=%video|user play (event229)%,event230=%video|video playing (event230)%,event231=%video|user pause (event231)%,event232=%video|user seek (event232)%,event233=%video|video ended (event233)%,event234=%video|video progress reached (event234)%,event235=%video|video loaded (event235)%,event236=%video|video waiting (event236)%,event237=%video|player error (event237)%,event255=%overdraft calculator|overdraft charge (event255)%,event267=%overdraft calculator|overdraft amount (event267)%,event268=%overdraft calculator|overdraft days (event268)%,event269=%calculator or tool|zero results (event269)%,event270=%mortgage rates tool|property value (event270)%,event271=%mortgage rates tool|deposit amount (event271)%,event272=%mortgage rates tool|mortgage amount (event272)%,event273=%mortgage rates tool|additional borrowing amount (event273)%,event274=%mortgage rates tool|mortgage term (event274)%,event275=%mortgage rates tool|ltv tier (event275)%,event318=%mortgage borrowing calculator|requested term (event318)%,event319=%mortgage borrowing calculator|minimum term (event319)%,event320=%mortgage borrowing calculator|set purchase price (event320)%,event321=%mortgage borrowing calculator|requested loan amount (event321)%,event323=%mortgage borrowing calculator|max loan amount (event323)%,event325=%mortgage payment change calculator|mortgage amount (event325)%,event334=%liveperson initiated (event334)%,event335=%liveperson interactive (event335)%,event336=%liveperson postchat (event336)%,event337=%liveperson waiting (event337)%,event350=%loan calc|loan amount (event350)%,event354=%loan calc|representative apr (event354)%,event355=%mortgage borrowing calculator|helping hand payment min range value (event355) %,event356=%mortgage borrowing calculator|helping hand payment max range value (event356)%,event357=%mortgage borrowing calculator|helping hand max amount (event357)%,event358=%mortgage borrowing calculator|payment range max value (event358)%,event359=%mortgage borrowing calculator|payment range min value (event359)%,event360=%mortgage erc calculator|mortgage balance (event360)%,event373=%mortgage erc calculator|mortgage erc rate min (event373)%,event374=%mortgage erc calculator|mortgage erc rate max (event374)%,event375=%mortgage erc calculator|mortgage early repayment charge min (event375)%,event376=%mortgage erc calculator|mortgage early repayment charge max (event376)%,event377=%mortgage erc calculator|mortgage total min (event377)%,event378=%mortgage erc calculator|mortgage total max (event378)%",prop28:"%fragment id action (prop28)%",prop44:"%page template (prop44)%",prop52:"%build id (prop52)%",prop61:"%nav tracking page name|external (prop61)%",prop70:"%page|name (pagename)%",prop73:"%responsive state (prop73)%",eVar100:"%referring url (evar100)%",eVar101:"%kantar survey id (evar101)%",eVar105:"%cookie consent (evar105)%",eVar108:"%calculator or tool name (evar108)%",eVar114:"%video|metadata (evar114)%",eVar117:"%contact us tool|metadata (evar117)%",eVar118:"%routing tool|metadata (evar118)%",eVar120:"%hpi calculator|metadata (evar120)%",eVar124:"%feedback tool metadata (evar124)%",eVar126:"%contentsquare integration key (eVar126)%",eVar135:"%error codes (evar135)%",eVar141:"%signly|metadata (evar141)%",products:"%product string|action (product)%"}}},customCode:function(e){const t=e.__adobe.analytics.events.split(",").filter((e=>{const[t,n]=e.split("=");return""!==n})),n=t.join(",");e.__adobe.analytics.events=n},transforms:{"__adobe.analytics":{clear:!0}},dataElementId:"DEa4cf6b5418904d51a7325b150054b12e"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%merge|xdm object|action%",data:"%data variable%",type:"web.webinteraction.linkClicks",instanceName:"alloy",personalization:{decisionScopes:"%target scopes%"},documentUnloading:!0,edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"%datastream switch (staging)%"},production:{enabled:!0,datastreamId:"%datastream switch (live)%"},development:{enabled:!0,datastreamId:"%datastream switch (staging)%"}}},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC86fb1e22ef80408580dcd70437483456-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLa32b52dffaed482faa71cce55c7bad48",name:"Interaction|ContentSquare|Send Artificial Pageview|calculator result loaded",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_action"},ruleOrder:5}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(e){const t=nbs_ddl.action.length-e.detail.arrayLength;if("calculator result loaded"===nbs_ddl.action[t]?.type)return!0}},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"contentsquare/src/lib/actions/artificialPageviewInstallation.js",settings:{query:"calculatorResultLoaded"},timeout:2e3,delayNext:!0}]},{id:"RLaa902eec3e0b4b0d84ab266b4fc896f0",
name:"Library Loaded|Deploy Code|Dynatrace Development",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals",caseInsensitive:!0},leftOperand:"%environment stage%",rightOperand:"development"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%appdynamics check%"},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/16c6bc5bd3b/bf57888yvp/e8964d18fad4920e_complete.js" crossorigin="anonymous"></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLae7273371f964915a2f9ed97494de59f",name:"[Library Load] Consent Status",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:50}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"_satellite.setVar(\"library load consent status\", _satellite.getVar('cookie consent|category|user experience'));",language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RLb60ac6e9b13d40bcbd1f43e0a62ebaf2",name:"[Window Loaded] (wa_view missed flag) Call wa_view",events:[{modulePath:"core/src/lib/events/windowLoaded.js",settings:{},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return!0!==_satellite.getVar("page|wa_view called")}},timeout:2e3},{modulePath:"core/src/lib/conditions/customCode.js",settings:{source:function(){return"undefined"!=typeof nbs_ddl&&Boolean(nbs_ddl?.page?.name??!1)}},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC7a5c7598d2ae42849bf16e049d6abea1-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RCdc2ca397bbbb4d8c8cba003228587514-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLcc4f2ff7180a49bf8393f6f9c51e503f",name:"Interaction|Append ID|Tool|L&G Routing",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:"a[href]",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:99}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex"},leftOperand:"%this.hostname%",rightOperand:"nationwidequote.legalandgeneral.com"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/redirectWithIdentity/index.js",settings:{instanceName:"alloy",edgeConfigOverrides:{development:{}}},timeout:2e3,delayNext:!0}]},{id:"RLcedbdb9644df4d52917b667965deb154",name:"Interaction|ContentSquare|Send Artificial Pageview|Page View",events:[{modulePath:"core/src/lib/events/historyChange.js",settings:{},ruleOrder:5}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"contentsquare/src/lib/actions/artificialPageviewInstallation.js",settings:{query:""},timeout:2e3,delayNext:!0}]},{id:"RLd76188776cd44ef5a6e752f284035503",name:"Page||Cookie Consent|Deploy Code|Floodlight|Insert iFrame",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:60},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:70}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"doesNotEqual"},leftOperand:"%third party|floodlight activity%",rightOperand:"not set"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|targeting and marketing%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC6df710339cac4d03a6e3c9bcbaac2b73-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLe44ad371d93244339a1c53696ab5785b",name:"Library Loaded|Deploy Code|Dynatrace Production",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals",caseInsensitive:!0},leftOperand:"%environment stage%",rightOperand:"Production"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%appdynamics check%"},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/16c6bc5bd3b/bf73001pym/182c111d139865da_complete.js" crossorigin="anonymous"></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLe7c095b06a3a4442be949ff31d181877",name:"Library Loaded|Deploy Code|Dynatrace Non Prod",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals",caseInsensitive:!0},leftOperand:"%environment stage%",rightOperand:"staging"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%appdynamics check%"},negate:!0,timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:'<script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/164ae1b51de/bf47139xfg/1230cd4b64939e4a_complete.js" crossorigin="anonymous"></script>',language:"html"},timeout:2e3,delayNext:!0}]},{id:"RLe95e9de52f93491bb6fb7c09d1dac006",name:"Page|Deploy Code|Floodlight|Remove iFrame",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_view"},ruleOrder:10}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/a3acdf76791c/4e3d15bcff8b/dcc6d2377f3f/RC3001f18189774aecbea2d64826c88686-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLf143794371e94c6f84bbbee26e87bea7",name:"Library Load|Deploy Code|TMS Function Definitions",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"//We are setting this flag to keep a count of the number of times wa_view has been called, this is to help us know when to set referrer so we make sure it is correct for marketing channels\n\nvar waViewCalledFlag = 0;",language:"javascript"},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"window.wa_consent = (function () {_satellite.track('wa_consent')})",language:"javascript"},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:"window.wa_view = (function() {\n\t_satellite.track('wa_view');\n\n\t_satellite.setVar(\"page|wa_view called\", true);\n  \n    ++window.waViewCalledFlag;\n  \n\n});",language:"javascript"},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!1,source:'window.wa_action = (function(action) {\n\t_satellite.track(\'wa_action\', {\n      arrayLength: nbs_ddl.action.length,\n      actionName: "custom link tracking",\n      actionType: "other"\n\t});\n\n});',language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RLf368aee8b67c4e99a1655c66ee06476f",name:"Library Loaded|Deploy Code|Infinity Call Tracking",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:5},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|customisation%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3},{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|targeting and marketing%"},timeout:2e3}],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{global:!0,source:"(function(i,n,f,t,y,x,z) {\n    y=i._its=function(){return y.queue.push(arguments)};y.version='2.0';y.queue=[];z=n.createElement(f);z.async=!0;z.src=t;x=n.getElementsByTagName(f)[0];x.parentNode.insertBefore(z,x)})(window, document,'script','https://script.infinity-tracking.com/infinitytrack.js?i=16026');\n  window.uniqueId||(window.uniqueId=([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}));\n  window._its('init', '16026');window._its('setVariable','adobe_txid',window.uniqueId);\n  window._its('track');\n",language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RLf88336d7a76a49ec91f3f687a0627210",name:"DOM Ready|wa_consent||Deploy Code|Medallia",events:[{modulePath:"core/src/lib/events/domReady.js",settings:{},ruleOrder:1},{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"wa_consent"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"isTrue"},leftOperand:"%cookie consent|category|user experience%"},timeout:2e3}],actions:[{modulePath:"medallia-for-adobe-launch/lib/actions/load-medallia-digital.js",settings:{medallia_digital_asset:"https://nebula-cdn.kampyle.com/eu/we/264671/onsite/embed.js"},timeout:2e3,delayNext:!0}]}]};var _satellite=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(e){var n,a;return!1!==t(e)&&(void 0===(n=e.constructor)||!1!==t(a=n.prototype)&&!1!==a.hasOwnProperty("isPrototypeOf"))}function a(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function o(e){return e.substr(0,e.indexOf("["))}function r(e,t,n){if(e.length&&ut(t)){var i=e[0];if(1!==e.length){var s=e.slice(1);if(!a(i))return r(s,t[i],n);var c=t[i=o(i)];Array.isArray(c)&&c.forEach((function(e){return r(s,e,n)}))}else t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=n(t[i]))}}if(window.atob){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=document,c=Object.assign,l=window,d=l,u=function(e,t,n,a){var o,r=Boolean(t&&Array.isArray(n)),i=Boolean(r&&e),s=document.createElement("a");if(r){var c=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||c(),/^\/\/.+/.test(e)?s.href=d.location.protocol+e:s.href=e),s.hostname||c(),-1===n.indexOf(s.hostname)){var l=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw l.code="dynamic_host_not_allowed",l}}var u=function(){if(null!=o)return o;if(i){var e=s.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),o=s.protocol+"//"+e}else o="";return o},p=function(e){return i&&"string"==typeof e?[u(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},m={getTurbineHost:u,decorateWithDynamicHost:p,get isDynamicEnforced(){return r}};return d&&a.onDebugChanged((function(e){e?d.dynamicHostResolver=m:delete d.dynamicHostResolver})),m},p=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(n){t.push({rule:e,event:n})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},m="debug",g=function(e,t){var n=function(){return"true"===e.getItem(m)},a=function(t){e.setItem(m,t)},o=[],r=function(e){o.push(e)};return t.outputEnabled=n(),{onDebugChanged:r,getDebugEnabled:n,setDebugEnabled:function(e){n()!==e&&(a(e),t.outputEnabled=e,o.forEach((function(t){t(e)})))}}},f="Module did not export a function.",v=function(e,t,n){return function(a,o,r){r=r||[];var i=e.getModuleExports(a.modulePath);if("function"!=typeof i)throw new Error(f);var s=e.getModuleDefinition(a.modulePath),c=a.settings||{};!a.hasTransformedFilePaths&&s.filePaths&&(n(c,s.filePaths,a.modulePath),a.hasTransformedFilePaths=!0);var l=t(c,o);return i.bind(null,l).apply(null,r)}},b=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},h={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},y="\ud83d\ude80",_=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":y,w=!1,C=function(e){if(w&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(_),e!==h.DEBUG||window.console[e]||(e=h.INFO),window.console[e].apply(window.console,t)}},E=C.bind(null,h.LOG),k=C.bind(null,h.INFO),x=C.bind(null,h.DEBUG),P=C.bind(null,h.WARN),S=C.bind(null,h.ERROR),I=function(){var e=w;w=!0,C.apply(null,Array.prototype.concat(h.WARN,Array.prototype.slice.call(arguments))),e||(w=!1)},j={log:E,info:k,debug:x,warn:P,error:S,deprecation:I,get outputEnabled(){return w},set outputEnabled(e){w=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:E.bind(null,t),info:k.bind(null,t),debug:x.bind(null,t),warn:P.bind(null,t),error:S.bind(null,t)}}},T=l,O="com.adobe.reactor.",D=function(e,t){var n=O+(t||"");return{getItem:function(t){try{return T[e].getItem(n+t)}catch(e){return null}},setItem:function(t,a){try{return T[e].setItem(n+t,a),!0}catch(e){return!1}}}},N=D,R="dataElements.",L=N("sessionStorage",R),A=N("localStorage",R),V={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},M={},q=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},$=b,U=j,F={setValue:function(e,t,n){var a;switch(t){case V.PAGEVIEW:return void(M[e]=n);case V.SESSION:return void((a=q(n))&&L.setItem(e,a));case V.VISITOR:return void((a=q(n))&&A.setItem(e,a))}},getValue:function(e,t){var n;switch(t){case V.PAGEVIEW:return M.hasOwnProperty(e)?M[e]:null;case V.SESSION:return null===(n=L.getItem(e))?n:JSON.parse(n);case V.VISITOR:return null===(n=A.getItem(e))?n:JSON.parse(n)}}},B=function(e,t,n,a){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+n+(a?"\n"+a:"")},H=function(e,t,n,a,o){return function(r,i){var s=t(r);if(!s)return a?"":void 0;var c,l,d=s.storageDuration;try{c=e.getModuleExports(s.modulePath),l=e.getModuleDefinition(s.modulePath)}catch(e){return void U.error(B(s,r,e.message,e.stack))}if("function"==typeof c){var u,p=s.settings||{};!s.hasTransformedFilePaths&&l.filePaths&&(o(p,l.filePaths,s.modulePath),s.hasTransformedFilePaths=!0);try{u=c(n(p,i),i)}catch(e){return void U.error(B(s,r,e.message,e.stack))}return d&&(null!=u?F.setValue(r,d,u):u=F.getValue(r,d)),null==u&&null!=s.defaultValue&&(u=s.defaultValue),"string"==typeof u&&(s.cleanText&&(u=$(u)),s.forceLowerCase&&(u=u.toLowerCase())),u}U.error(B(s,r,"Module did not export a function."))}},z=b,W={text:function(e){return e.textContent},cleanText:function(e){return z(e.textContent)}},J=function(e,t,n){for(var a,o=e,r=0,i=t.length;r<i;r++){if(null==o)return;var s=t[r];if(n&&"@"===s.charAt(0)){var c=s.slice(1);o=W[c](o)}else if(o.getAttribute&&(a=s.match(/^getAttribute\((.+)\)$/))){var l=a[1];o=o.getAttribute(l)}else o=o[s]}return o},G=function(e,t,n){return function(a,o){var r;if(t(a))r=n(a,o);else{var i=a.split("."),s=i.shift();"this"===s?o&&(r=J(o.element,i,!0)):"event"===s?o&&(r=J(o,i)):"target"===s?o&&(r=J(o.target,i)):r=J(e[s],i)}return r}},Q=function(e,t){return function(n){var a=n.split(".")[0];return Boolean(t(n)||"this"===a||"event"===a||"target"===a||e.hasOwnProperty(a))}},X=function(e,t,n){var a={exports:{}};return e.call(a.exports,a,a.exports,t,n),a.exports},K=X,Y=j,Z=function(){var e={},t=function(t){var n=e[t];if(!n)throw new Error("Module "+t+" not found.");return n},n=function(){Object.keys(e).forEach((function(e){try{a(e)}catch(n){var t="Error initializing module "+e+". "+n.message+(n.stack?"\n"+n.stack:"");Y.error(t)}}))},a=function(e){var n=t(e);return n.hasOwnProperty("exports")||(n.exports=K(n.definition.script,n.require,n.turbine)),n.exports};return{registerModule:function(t,n,a,o,r){var i={definition:n,extensionName:a,require:o,turbine:r};i.require=o,e[t]=i},hydrateCache:n,getModuleExports:a,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},ee=j,te=!1,ne=function(e){return function(t,n){var a=e._monitors;a&&(te||(ee.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),te=!0),a.forEach((function(e){e[t]&&e[t](n)})))}},ae=j,oe=function(e,t,n){var a,o,r,i,s=[],c=function(a,o,r){if(!e(o))return a;s.push(o);var i=t(o,r);return s.pop(),null==i&&n?"":i};return a=function(e,t){var n=/^%([^%]+)%$/.exec(e);return n?c(e,n[1],t):e.replace(/%(.+?)%/g,(function(e,n){return c(e,n,t)}))},o=function(e,t){for(var n={},a=Object.keys(e),o=0;o<a.length;o++){var r=a[o],s=e[r];n[r]=i(s,t)}return n},r=function(e,t){for(var n=[],a=0,o=e.length;a<o;a++)n.push(i(e[a],t));return n},i=function(e,t){return"string"==typeof e?a(e,t):Array.isArray(e)?r(e,t):"object"==typeof e&&null!==e?o(e,t):e},function(e,t){return s.length>10?(ae.error("Data element circular reference detected: "+s.join(" -> ")),e):i(e,t)}},re=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var n in t)e[n]=t[n]}}},ie="undefined"!=typeof window&&window.Promise||void 0!==i&&i.Promise,se=ie,ce=function(e,t,n){return function(a,o,r,i){return i.then((function(){var i,s=a.delayNext;return new se((function(t,n){var o=e(a,r,[r]);if(!s)return t();var c=a.timeout,l=new se((function(e,t){i=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+c/1e3+" seconds to complete. "))}),c)}));se.race([o,l]).then(t,n)})).catch((function(e){return clearTimeout(i),e=t(e),n(a,o,e),se.reject(e)})).then((function(){clearTimeout(i)}))}))}},le=ie,de=function(e,t,n,a,o){return function(r,i,s,c){return c.then((function(){var c;return new le((function(t,n){var a=e(r,s,[s]),o=r.timeout,i=new le((function(e,t){c=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+o/1e3+" seconds to complete. "))}),o)}));le.race([a,i]).then(t,n)})).catch((function(e){return clearTimeout(c),e=t(e),a(r,i,e),le.reject(e)})).then((function(e){if(clearTimeout(c),!n(r,e))return o(r,i),le.reject()}))}))}},ue=ie.resolve(),pe=function(e,t,n){return function(a,o){return a.conditions&&a.conditions.forEach((function(t){ue=e(t,a,o,ue)})),a.actions&&a.actions.forEach((function(e){ue=t(e,a,o,ue)})),ue=(ue=ue.then((function(){n(a)}))).catch((function(){}))}},me=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},ge=function(e,t,n,a){return function(o,r){var i;if(o.conditions)for(var s=0;s<o.conditions.length;s++){i=o.conditions[s];try{var c=e(i,r,[r]);if(me(c))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(i,c))return n(i,o),!1}catch(e){return a(i,o,e),!1}}return!0}},fe=function(e,t){return function(n,a){e(n,a)&&t(n,a)}},ve=function(e){return function(t){var n=e.getModuleDefinition(t.modulePath);return n&&n.displayName||t.modulePath}},be=function(e){return function(t){var n=t.rule,a=t.event,o=e.getModuleDefinition(a.modulePath).name;return{$type:e.getModuleExtensionName(a.modulePath)+"."+o,$rule:{id:n.id,name:n.name}}}},he=function(e,t,n,a,o,r){return function(i,s){var c=s.rule,l=s.event;l.settings=l.settings||{};try{var d=o(s);t(l,null,[function(t){var a=n(d,t);i((function(){e(a,c)}))}])}catch(e){r.error(a(l,c,e))}}},ye=function(e,t,n,a){return function(o,r,i){var s=t(o);n.error(e(s,r.name,i)),a("ruleActionFailed",{rule:r,action:o})}},_e=function(e,t,n,a){return function(o,r,i){var s=t(o);n.error(e(s,r.name,i)),a("ruleConditionFailed",{rule:r,condition:o})}},we=function(e,t,n){return function(a,o){var r=e(a);t.log('Condition "'+r+'" for rule "'+o.name+'" was not met.'),n("ruleConditionFailed",{rule:o,condition:a})}},Ce=function(e,t){return function(n){e.log('Rule "'+n.name+'" fired.'),t("ruleCompleted",{rule:n})}},Ee=function(e,t,n){return function(a,o){var r;if(a.actions)for(var i=0;i<a.actions.length;i++){r=a.actions[i];try{e(r,o,[o])}catch(e){return void t(r,a,e)}}n(a)}},ke=function(e,t,n,a){return function(o,r){a("ruleTriggered",{rule:r}),e?n(r,o):t(r,o)}},xe=function(e,t,n){return'Failed to execute "'+e+'" for "'+t+'" rule. '+n.message+(n.stack?"\n"+n.stack:"")},Pe=function(e,t){return t&&!e.negate||!t&&e.negate},Se=[],Ie=!1,je=function(e){Ie?e():Se.push(e)},Te=function(e,t,n){e(t).forEach((function(e){n(je,e)})),Ie=!0,Se.forEach((function(e){e()})),Se=[]},Oe=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},De={};Object.defineProperty(De,"__esModule",{value:!0}),De.isPlainObject=n;var Ne,Re=j,Le=c,{isPlainObject:Ae}=De,Ve=function(e,t){return Ae(t=t||{})?t=Le({},t,e):Le(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return Re.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},Me=function(e,t){return function(n,a){var o=e[n];if(o){var r=o.modules;if(r)for(var i=Object.keys(r),s=0;s<i.length;s++){var c=i[s],l=r[c];if(l.shared&&l.name===a)return t.getModuleExports(c)}}}},qe=function(e,t){return function(){return t?e(t):{}}},$e=function(e,t,n){return function(a){if(n){var o=a.split(".");o.splice(o.length-1||1,0,"min"),a=o.join(".")}return e(t)+a}},Ue=".js",Fe=function(e){return e.substr(0,e.lastIndexOf("/"))},Be=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},He=function(e,t){Be(t,Ue)||(t+=Ue);var n=t.split("/"),a=Fe(e).split("/");return n.forEach((function(e){e&&"."!==e&&(".."===e?a.length&&a.pop():a.push(e))})),a.join("/")},ze={exports:{}};Ne=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(a){function o(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=a.write?a.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in r)r[c]&&(s+="; "+c,!0!==r[c]&&(s+="="+r[c].split(";")[0]));return document.cookie=t+"="+n+s}}function i(e,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],i=0;i<r.length;i++){var s=r[i].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(a.read||a)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[l]=c,e===l)break}catch(e){}}return e?o[e]:o}}return o.set=r,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(t,n){r(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}return n((function(){}))},ze.exports=Ne();var We=ze.exports,Je={get:We.get,set:We.set,remove:We.remove},Ge=ie,Qe=function(e,t){return new Ge((function(n,a){t.onload=function(){n(t)},t.onerror=function(){a(new Error("Failed to load script "+e))}}))},Xe=function(e){var t={};if(!e||"string"!=typeof e)return t;var n=e.trim().replace(/^[?#&]/,""),a=new URLSearchParams(n),o=a.keys();do{var r=o.next(),i=r.value;if(i){var s=a.getAll(i);1===s.length?t[i]=s[0]:t[i]=s}}while(!1===r.done);return t},Ke=function(e){var t="{{space}}",n=new URLSearchParams;return Object.keys(e).forEach((function(a){var o=e[a];"string"==typeof e[a]?o=o.replace(/ /g,t):["object","undefined"].includes(typeof o)&&!Array.isArray(o)&&(o=""),Array.isArray(o)?o.forEach((function(e){n.append(a,e)})):n.append(a,o)})),n.toString().replace(new RegExp(encodeURIComponent(t),"g"),"%20")},Ye="@adobe/reactor-",Ze={cookie:Je,document:s,"load-script":function(e){var t=document.createElement("script");t.src=e,t.async=!0;var n=Qe(e,t);return document.getElementsByTagName("head")[0].appendChild(t),n},"object-assign":c,promise:ie,"query-string":{parse:function(e){return Xe(e)},stringify:function(e){return Ke(e)}},window:l},et=function(e){return function(t){if(0===t.indexOf(Ye)){var n=t.substr(Ye.length),a=Ze[n];if(a)return a}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},tt=Me,nt=qe,at=$e,ot=j,rt=He,it=et,st=function(e,t,n,a,o,r,i){var s=e.extensions,c=e.buildInfo,l=e.environment,d=e.property.settings;if(s){var u=tt(s,t);Object.keys(s).forEach((function(p){var m=s[p],g=m.settings;Array.isArray(m.filePaths)&&(g=r(g,m.filePaths));var f=nt(a,g);if(m.modules){var v=ot.createPrefixedLogger(m.displayName),b=at(i,m.hostedLibFilesBaseUrl,c.minified),h={buildInfo:c,environment:l,property:{name:e.property.name,id:e.property.id},getDataElementValue:o,getExtensionSettings:f,getHostedLibFileUrl:b,getSharedModule:u,logger:v,propertySettings:d,replaceTokens:a,onDebugChanged:n.onDebugChanged,get debugEnabled(){return n.getDebugEnabled()}};Object.keys(m.modules).forEach((function(e){var n=m.modules[e],a=it((function(n){var a=rt(e,n);return t.getModuleExports(a)}));t.registerModule(e,n,p,a,h)}))}})),t.hydrateCache()}return t},ct=Je,lt=j,dt=function(e,t,n,a,o){var r=lt.createPrefixedLogger("Custom Script");e.track=function(e){lt.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=r,e.notify=function(e,t){switch(lt.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:r.info(e);break;case 4:r.warn(e);break;case 5:r.error(e);break;default:r.log(e)}},e.getVar=a,e.setVar=o,e.setCookie=function(e,t,n){var a="",o={};n&&(a=", { expires: "+n+" }",o.expires=n);var r='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+a+").";lt.deprecation(r),ct.set(e,t,o)},e.readCookie=function(e){return lt.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),ct.get(e)},e.removeCookie=function(e){lt.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),ct.remove(e)},e.cookie=ct,e.pageBottom=function(){},e.setDebug=n;var i=!1;Object.defineProperty(e,"_container",{get:function(){return i||(lt.warn("_satellite._container may change at any time and should only be used for debugging."),i=!0),t}})},{isPlainObject:ut}=De,pt=s,mt=c,gt=u,ft=p,vt=g,bt=v,ht=H,yt=G,_t=Q,wt=Z,Ct=ne,Et=oe,kt=re,xt=ce,Pt=de,St=pe,It=ge,jt=fe,Tt=ve,Ot=be,Dt=he,Nt=ye,Rt=_e,Lt=we,At=Ce,Vt=Ee,Mt=ke,qt=xe,$t=Pe,Ut=Te,Ft=Oe,Bt=Ve,Ht=D,zt=st,Wt=dt,Jt=function(e,t){return function(n,a,o){return e&&ut(n)&&Object.keys(n).length&&Array.isArray(a)&&a.length?(a.forEach((function(e){Boolean(null!=o&&/^core\/.*actions.*\/customCode\.js$/.test(o))&&"source"===e&&!n.isExternal||r(e.split("."),n,t)})),n):n}},Gt=j,Qt=window._satellite;if(Qt&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var Xt=Qt.container;delete Qt.container;var Kt=mt({},Xt.buildInfo);Object.defineProperty(Kt,"environment",{get:function(){return Gt.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),Xt.environment.stage}}),Xt.buildInfo=Kt;var Yt,Zt=vt(Ht("localStorage"),Gt),en="";pt.currentScript&&pt.currentScript.getAttribute("src")&&(en=pt.currentScript.getAttribute("src"));try{Yt=gt(en,Boolean(Xt.company.dynamicCdnEnabled),Xt.company.cdnAllowList,Zt)}catch(e){throw Gt.warn("Please review the following error:"),e}var tn,nn=Jt(Yt.isDynamicEnforced,Yt.decorateWithDynamicHost),an=wt(),on=Xt.property.settings.undefinedVarsReturnEmpty,rn=Xt.property.settings.ruleComponentSequencingEnabled,sn=Xt.dataElements||{},cn=function(e){return sn[e]},ln=function(){return tn.apply(null,arguments)},dn=ht(an,cn,ln,on,nn),un={},pn=kt(un),mn=_t(un,cn),gn=yt(un,cn,dn);tn=Et(mn,gn,on),Wt(Qt,Xt,Zt.setDebugEnabled,gn,pn),zt(Xt,an,Zt,tn,dn,nn,Yt.decorateWithDynamicHost);var fn=Ct(Qt),vn=bt(an,tn,nn),bn=Tt(an),hn=Lt(bn,Gt,fn),yn=Rt(qt,bn,Gt,fn),_n=Nt(qt,bn,Gt,fn),wn=At(Gt,fn),Cn=Dt(Mt(rn,jt(It(vn,$t,hn,yn),Vt(vn,_n,wn)),St(Pt(vn,Ft,$t,yn,hn),xt(vn,Ft,_n),wn),fn),vn,Bt,qt,Ot(an),Gt);Ut(ft,Xt.rules||[],Cn)}return e(Qt)}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();